# 生成AIの回答精度においてプロンプトよりも大事なもの

ref: <https://www.youtube.com/watch?v=AANyrVWEkYU>

## 講師情報

- ワンダー佐藤氏
- 生成AIとプロンプトエンジニアリングの専門家

## 主要なポイント

1. **COT（Chain of Thought）の本質**
   - COTは推論モデル（GPT-4のO1/O3モデル、Claudeの拡張モデル）で使われる手法
   - 数学的・論理的な精度を向上させる方法で、複雑な問題解決に有効
   - 本質的には「プロンプト」ではなく「表示形式」が重要
   - COTは「言葉の単なるテクニックの名前」であり、本質的には「空」または「無自性」（仏教的表現）
   - 回層構造的に表示される文脈になっていれば、どのようなプロンプトでもCOTと同様の効果が得られる

2. **重要なのは回層構造と分解**
   - 「ステップバイステップで考えて」というプロンプトだけでは不十分
   - 回層構造（階層的な思考過程）と問題の分解が精度向上のカギ
   - 形式の表示がうまくいかないと精度は上がらない
   - プロンプトエンジニアリングによって回層構造的に思考される文脈を形成する必要がある
   - サンプルとして回層構造を表示させることも効果的

3. **AIの「油断」問題**
   - 簡単なタスクではAIがリソースを十分に使わない傾向がある（「油断」と表現）
   - タスクが簡単そうに見えるとAIはリソースを十分に使わなくなる
   - 難易度を設定して全力を出させることが重要
   - 回層構造プロンプトで自動的に対応できる
   - 最初から難しい問題として認識させると全力で回答する

4. **アテンションの重要性**
   - 段階を細かく分けることで複雑なアテンションヘッドを使用できる
   - 形式の表示よりもアテンションの動きが重要
   - アテンションの動きを予想してコントロールできれば、プロンプトの具体的な言葉は二次的

## 効果的なプロンプト設計のポイント

1. **「油断せずに認識」** - AIに油断させない
   - 問題の難易度を高く認識させる
   - 「この問題は複雑なので注意深く考えてください」などの指示

2. **「分解」** - 問題を分解する要素を含める
   - 「問題を小さな部分に分けて考えてください」
   - 分解プロンプトは正答率向上に非常に重要

3. **回層構造の形成** - 確認、フィードバック、修正、結論などの層を作る
   - 6層の回層構造例：認識→分解→確認→フィードバック→修正→結論
   - 各回層に論理的な因果関係を持たせる

4. **回答は最後に出す** - 途中で回答を出すと後で修正が効かなくなる
   - 「回答を出す前に」と指定する
   - 「回答は最後に出してください」と指示
   - 仮回答を途中で出すと修正できなくなる問題を回避

5. **マークダウン形式の活用**
   - 回層とH3までナンバリングする
   - 構造化された表示を促進する

## 実験例：「スターゲートプロジェクトのTは何個」

### 通常の質問方法

- 単純に「スターゲートプロジェクトのTは何個？」と質問
- AIは繰り返し誤答（正解は3だが、多くの場合2と回答）
- 何度試しても同じ誤りを繰り返す傾向がある

### COTプロンプト使用時

- 「段階的に考えて」「ステップバイステップで考えて」といったプロンプトを追加
- 回層構造的な表示になると正答率が向上
- 分解されて表示される場合に正解（3個）が得られる

### 成功するパターンの特徴

- 問題が複数のステップに分解される
- 各ステップが回層的に（階層的に）表示される
- 3回層以上の深い構造になっている
- セクションとサブセクションに分かれている

### 失敗するパターンの特徴

- ステップが踏まれていても分解が不十分
- 回層が浅い（1-2層程度）
- 早い段階で答えを出してしまう

### 最適なプロンプト例

```
油断せずに認識してください。
問題を分解してください。
回層構造で表示してください。
回答を出す前に確認してください。
スターゲートプロジェクトのTは何個ですか？
```

## プロンプト設計の実践

### 初期プロンプト設計例

```
油断せずに認識してください。
分解することで正答率が上がります。
確認→フィードバック→修正→結論という回層を作ってください。
状況を踏まえて、スターゲートプロジェクトのTは何個か答えてください。
```

### 表示例の活用

- 回層構造の例をプロンプトに含める
- AIがその構造に従って回答する傾向がある
- 認識→分解→確認→結論という流れを例示

## リーズモデルのベストプラクティス

- OpenAIの公式ページでは推論モデルではCOTプロンプト（「ステップバイステップで考えて」など）を明示しなくても良いとされている
- 講師の実験では、明示した方が回数が増え、内容も専門的に深く文章生成される
- 難易度に合わせた深度設計はユーザー側で行うと精度が高くなる

## 実践例：AIの未来予測

### プロンプト設計

```
AIの未来を予測してください。
以下の回層構造で回答してください：
1. 現状分析
2. 要素の分解
3. 潜在的な問題の抽出
4. 問題解決と統合
5. 予想外の未来

回層の数字が大きいほど回層が深くなります。
各回層は論理的な因果関係を持つようにしてください。
過剰思考で回層構造的に表示してください。
回層とH3まではナンバリングしてください。
マークダウンで書いてください。
結論は最後まで出さないでください。
```

### 5層の回層構造の詳細

1. **現状分析**
   - 現在のAI技術の発展状況
   - 社会への影響と普及状況
   - 主要企業や研究機関の取り組み

2. **要素の分解**
   - 技術的要素（アルゴリズム、計算力、データ）
   - 社会的要素（経済、法律、倫理）
   - 人間的要素（心理、哲学、文化）

3. **潜在的な問題の抽出**
   - ブラックボックス問題
   - バイアスと公平性の問題
   - 雇用と経済格差の問題
   - 人間の意味喪失の問題

4. **問題解決と統合**
   - 説明可能なAI（XAI）の開発
   - ベーシックインカムとリスキリングの組み合わせ
   - 人間中心のAI設計
   - 国際的な規制とガバナンス

5. **予想外の未来**
   - 感情を理解し共感するAIの出現
   - 人間らしさの再定義
   - 死後の対話を可能にする技術
   - 人間とAIの共進化

### 得られた洞察の例

- **ブラックボックス問題**: AIの判断基準が不透明なことによる信頼性の問題
- **説明可能なAI**: 決定プロセスを人間が理解できる形で説明できるAIの必要性
- **ベーシックインカム**: AI導入による雇用喪失への対応策
- **リスキリング**: 新しいスキルの習得による労働市場への再参入
- **感情理解AI**: 人間の感情を理解し、適切に反応できるAI
- **死後の対話**: 故人のデータを元に作られたAI人格との対話の可能性
- **結論**: 「AIの未来は技術の進化ではなく、人間の意識の進化」

## AIライティング実演：ブログ作成

### プロセス

1. 5層構造で生成された回答をブログ形式に変換
2. セクションごとに内容を深める指示
3. 文章量を増やして深掘りするテクニック

### 成果物の特徴

- 論理的に繋がった階層構造
- 各セクションが因果関係を持って展開
- 人間の意識の問題に焦点を当てた深い考察
- 様々な観点からの多角的分析

## 結論

プロンプトエンジニアリングの本質は特定の言葉を覚えることではなく、AIが段階的に考え、問題を分解して深く分析するような構造を作り出すことです。回層の深さ、種類、重要度を人間側が定義し、論理的に繋がった思考プロセスを促すことが、高品質な回答を得るための鍵となります。

### 実践のためのチェックリスト

1. AIに「油断」させないプロンプトを含める
2. 問題を「分解」するよう明示的に指示する
3. 回層構造を定義し、各回層の種類と重要度を設定する
4. 回層間の論理的な繋がりを指示する
5. 回答は最後に出すよう設定する
6. 可能であれば回層構造の例を示す
7. マークダウンなどの形式を指定して構造化を促進する
