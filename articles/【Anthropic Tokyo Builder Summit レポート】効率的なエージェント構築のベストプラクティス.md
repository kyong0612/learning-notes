---
title: "【Anthropic Tokyo Builder Summit レポート】効率的なエージェント構築のベストプラクティス"
source: "https://zenn.dev/kmotohas/articles/a36c1e11b3f029#%E3%82%B3%E3%83%B3%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E8%85%90%E6%95%97-%EF%BC%88context-rot%EF%BC%89-%E3%81%AE%E5%95%8F%E9%A1%8C"
author: "kmotohas"
published: 2025-10-29
created: 2025-10-31
description: "Anthropic Tokyo Builder Summitで発表された、効率的なAIエージェント構築のベストプラクティスに関するレポート。エージェント構築前のチェックリスト、ツール設計、プロンプト設計とコンテキスト管理について解説。"
tags:
  - "clippings"
  - "LLM"
  - "Claude"
  - "Anthropic"
  - "AIエージェント"
  - "ベストプラクティス"
---

## イベント概要

2025年10月28日、八芳園で開催されたAnthropic Tokyo Builder Summitにて、Anthropicの技術者による「効率的なエージェントの構築」セッションが行われました。本セッションでは、Stephanie Pang氏（Claude Skillsエンジニア）とHannah Li氏（ファインチューニングエンジニア）が、エージェント構築の最新ベストプラクティスを解説しました。

## エージェント構築前のチェックリスト

エージェントはすべてのユースケースに適しているわけではありません。構築前に以下の4つの重要な質問を確認する必要があります。

### ① そのタスクは十分に複雑か？

- タスクがディシジョンツリーとして分解できる場合、エージェントよりもアルゴリズムやワークフローとして実装する方が効果的
- ワークフローの方がコスト効率が良く、制御も容易

### ② そのタスクには十分に価値があるか？

- **具体例**: カスタマーサポートケースで1タスクあたり10セント程度のコストしかかかっていない場合、10セントは約30,000トークンに相当し、エージェントに必要な十分なターン数を実行できない
- **推奨アプローチ**: 一般的なシナリオをワークフローで処理し、本当に複雑なケースだけをエージェントに回す

### ③ タスクの全ての部分が実行可能か？

- エージェントループのボトルネックは、コストと待機時間の増加につながる
- エージェントが頻繁に失敗する場合は、タスクのスコープを縮小するか、より小さなサブタスクに分割することを検討

### ④ エラーまたはエラー発見にかかるコストは？

- エラーが高リスクであったり発見が困難な場合、エージェントを長時間自律的に動作させることは難しい
- **対策**:
  - 読み取り専用アクセスのみを与える
  - Human-in-the-loopパラダイムを採用し、より頻繁に許可を求める
- **注意**: これらの制限はエージェントのスケーラビリティを制限する

### 具体例：コーディングタスク

コーディングはエージェントに適したユースケースの代表例：

- **複雑性**: デザインからPRまでのプロセスはディシジョンツリーに収まらない ✓
- **価値**: 良いコードを書くことには高い価値がある ✓
- **実行可能性**: 最新のClaudeモデルはコーディングに優れている ✓
- **エラーコスト**: ユニットテストやCIで検証可能 ✓

これらの理由から、Claudeを使ったコーディングエージェントが急増しています。

## ツール設計のベストプラクティス

### 基本設計原則

ツールは**明確で理解しやすい**ものである必要があります。

- 人間に対してタスクを振る時と同様、環境やタスクについて詳しくない相手にツールを渡す際には配慮が必要
- パラメータのスキーマと型を慎重に検討（例：数値は文字列ではなく整数や浮動小数点数として型付け）

### ツール出力の設計

**エラー出力**:

- エージェントが何が問題だったかを理解し、自力でデバッグ・改善できるだけの十分な情報を含める

**成功出力**:

- 状態の変化を含めることで、エージェントが次のステップを計画できるようにする

### ツールの階層化（Tool Scaffolding）

複雑なタスクでは多くのツールが必要になりますが、エージェントが同時に大量のツールを扱うにはまだ課題があります。

**テクニック**:

- **動的ツール発見**: すべてのツールをコンテキストウィンドウにリストするのではなく、高レベルのツールセットやMCP（Model Context Protocol）を提示し、Claudeがそれらを「ダブルクリック」して詳細なツールを確認できるようにする
- **Tool Search Tool**: メタツールとして、すべてのツールの中から最も関連性の高いものを検索できる機能を提供

### Claudeを活用した設計

- **コードレビュアーとして活用**: ツール設計時にClaudeに作成したツールが理解しやすく使いやすいかをチェックさせる
- **繰り返し改善**: Claudeと繰り返しやり取りしながら改善することで、より良い設計に到達

### 自己検証ツールの重要性

エージェントが自律的に長時間作業できるようにするには、**自己検証ツール**の提供が重要です。

**コーディングエージェントの例**:

- ユニットテストを実行して、書いたコードが正しく動作するか確認
- リンターを実行して、コードスタイルをチェック
- ビルドツールで、変更がコンパイルエラーを起こしていないか確認

これらのツールがあることで、エージェントは「ユーザーに結果を返して確認してもらう」という往復を減らし、自律的に作業を続けることができます。

## プロンプト設計とコンテキスト管理

### プロンプトの基本原則

効果的なプロンプト設計のポイント：

- **明確性**: タスクを明確に定義する
- **例示**: 具体例を含める
- **制約**: 明確な制約条件を設定する

### コンテキストウィンドウの管理

大規模なタスクでは、コンテキストウィンドウの管理が重要：

- 必要な情報のみを含める
- 優先度に基づいて情報を整理
- 古い情報や不要な情報を適切に削除

## 重要な結論と発見

1. **エージェントは万能ではない**: すべてのタスクにエージェントが適しているわけではなく、4つのチェックリストで適性を判断すべき

2. **ツール設計の重要性**: 明確で理解しやすいツール設計が、エージェントの成功の鍵

3. **自己検証の必要性**: エージェントの自律性を高めるには、自己検証ツールが不可欠

4. **階層化アプローチ**: 大量のツールを扱う際は、動的ツール発見やメタツールの活用が効果的

5. **コスト効率の考慮**: シンプルなタスクはワークフローで処理し、複雑なタスクのみエージェントを活用することで、コスト効率を最適化できる

## 技術的な正確さに関する注記

- 本記事は2025年10月28日のイベントレポートであり、最新の技術動向を反映
- Anthropicの公式エンジニアによる発表内容に基づいているため、信頼性が高い
- MCP（Model Context Protocol）などの最新技術についても言及されている
