---
title: "claude codeで投資戦略を考えてみた｜にとり"
source: "https://note.com/neet_uncle/n/nb793a6962ca7"
author:
  - "[[にとり]]"
published: 2026-02-14
created: 2026-02-17
description: "Claude Codeを使って日本株の投資戦略（ロングショート）のアイデア出しと検証を行った実体験。LLMによる戦略生成のボトルネック（コンテキスト汚染、過学習リスク）と、定量評価が可能なトレード分野とAIの相性の良さの両面を考察した記事。"
tags:
  - "clippings"
  - "Claude Code"
  - "AI"
  - "投資戦略"
  - "システムトレード"
  - "LLM"
  - "ロングショート"
---

## 概要

日本株の日次ロングショート戦略を運用する著者（にとり）が、Claude Codeを使って投資戦略のアイデア出しと検証を行った実体験を共有する記事。「AIに戦略を考えさせればエッジが見つかるのでは？」という問いに対し、思ったほど簡単ではなかったボトルネックと、トレード分野とAIの相性の良さの両面について考察している。

## 主要なトピック

### コンテキストの入力制限と汚染

- 「すでに考えたアイデアとは別の視点のアイデアをください」という指示が構造的に難しい
- **禁止リストの問題**: 出したアイデアを禁止リストとして渡すと、リストが増えるほどコンテキストが汚染され、逆に禁止したアイデアの近傍から抜け出せなくなる
- 最初の10〜20個まではそれっぽいアイデアが出るが、それ以降は禁止アイデアの微修正版しか出なくなる
- 履歴をクリアしてゼロから回すと、毎回似たようなアイデアが出てしまう
- **有効だったアプローチ**: 自分がコアの方針を考え、深掘りさせる方法。著者は自分のアイデアをベースに半日で約60個のnotebookを作成し検証・改善を繰り返した結果、それっぽい戦略に辿り着いた
- ただし直近になるほど戦略のリターンが薄くなる傾向あり
- tickデータを使ったアイデアだったため、場中の執行コストを考えるとリターンが薄い可能性がある
- [J-Quants API](https://jpx-jquants.com/ja/spec/eq-trades)のアドオンでは2年分のtickデータしかないため、過去10年分を別途購入していた（約20万円の投資）

### 複数モデルの活用

- Claude Codeだけでなく、[MixSeek Quant Insight](https://zenn.dev/gamella/articles/a624a7eb2c78f7)を活用してGrok、Gemini、GPTにもアイデアを出させた
- Claude Codeでは出てこなかった分析の切り口が得られた
- MixSeekは複数ラウンド自動で改善を回してくれるため、思いつけない視点の探索に有効
- Claude haikuは回答が最後まで出せず終了してしまうため、sonnetの方が適している

### トレード分野とAIの相性がいい理由

- **定量的な評価が可能**: 評価関数を適切に設計しリスク管理の考え方をモデルに伝えれば、改善のフィードバックループを無限に回せる
- 戦略を出す → バックテストで評価 → 結果をフィードバック → 改善案を出す、のサイクルを自動化できる
- デザインや文章など「いい感じかどうか」を人間が判断する領域と比較して、評価基準を固めやすい
- LLMワークフロー設計でも評価部分が問題になりがちだが、投資は定量評価できる点で相性が良い

### AIが出したアイデアをそのまま使う危うさ

- **評価関数に含まれないリスクの無視**: AIは評価関数に入っていないものを考慮しない
  - トレードコストを無視した規模感の提案
  - スリッページを無視した理想的な約定前提の戦略
- **過学習の問題**: AIに雑に機械学習をさせるだけでは過学習を回避できない。自分なりの判断基準がないとバックテストだけ強く本番で使えない戦略になる
- **法的リスク**: tickデータとAPI発注を組み合わせた高頻度の注文操作が「見せ玉」（相場操縦）に該当する可能性をAIは判断しない
- ドメイン知識がない参入者ほどこうしたリスクに気づけない

### 「誰でもbot作れる時代」に問われること

- Claude Codeで勝てるアイデアを見つけられる人よりも、分析したいことが思いつかなくなって「無理かも」となる人の方が多くなる見込み
- **ドメイン知識の重要性**: LLMワークフロー設計と同様、ドメイン知識を持つ人が暗黙知を言語化して丁寧に組み立てる必要がある
- AIへの指示出しでも、何を分析すべきかを知っている人と「戦略を考えて」と投げるだけの人では結果が全く異なる

### トレードが暗黙知中心のドメインだからこそ

- AIの影響で誰でもbotを作れるレベルにハードルが下がるのは間違いない
- **トレードの本質**: 本当に価値がある情報ほど公開されない世界。エッジを見つけたら黙って使うのが合理的
- 桐谷広人氏の発言「評論家は自分で儲けられないから評論家をやっている」を引用し、公開情報の限界を指摘
- LLMの学習データが公開情報中心であることを考えると、LLMが自力で勝てる戦略に辿り着けない方が自然
- 現時点でLLMが出す戦略は「どこかで見たことある、基本に忠実だがセンスを感じない」ものが多い

## 重要な事実・データ

- **約60個のnotebook**: 著者が半日で作成し検証・改善を繰り返した数
- **tickデータ10年分**: 約20万円で購入（J-Quants APIアドオンでは2年分のみ）
- **431いいね**: noteマネーにピックアップされた人気記事

## 結論・示唆

### 著者の結論

- AIで簡単に勝てる戦略が見つかるわけではない
- ドメイン知識を持つ人間がコアの方針を考え、AIに深掘り・検証させるアプローチが有効
- トレードは定量評価が可能なためAIとの相性は良いが、評価関数外のリスク（コスト、法規制、過学習）に注意が必要
- 暗黙知中心のドメインではLLMだけでは限界がある

### 実践的な示唆

- LLMにゼロからアイデアを出させるより、人間がコア方針を決めて深掘りさせる方が効果的
- 複数のLLMモデル（Claude、Grok、Gemini、GPT）を使い分けることで多角的な分析が可能
- 評価関数の設計にはドメイン知識（トレードコスト、スリッページ、法規制）が不可欠
- バックテスト結果だけでなく、実運用を想定したリスク評価が重要

## 関連リソース

- [J-Quants API（tickデータ）](https://jpx-jquants.com/ja/spec/eq-trades)
- [MixSeek Quant Insight](https://zenn.dev/gamella/articles/a624a7eb2c78f7)
- [桐谷さんの発言に関するYahoo!ニュース記事](https://news.yahoo.co.jp/articles/c27efbd8b0a53e4126646a15d34af7ff066b82f8)

## 制限事項・注意点

- 本記事は情報提供を目的としており、投資勧誘を目的としていない
- 投資に関する決定は読者自身の判断で行うこと（著者による免責事項）
- 著者の個人的な経験と感覚に基づく内容であり、普遍的な結論ではない

---

*Source: [claude codeで投資戦略を考えてみた｜にとり](https://note.com/neet_uncle/n/nb793a6962ca7)*