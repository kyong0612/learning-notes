---
title: "自律を育てる組織とアーキテクチャ ─ 管理画面リプレイスでの試行錯誤から"
source: "https://tech.commune.co.jp/entry/2025/10/28/171706"
author:
  - "[[commmune_kondo]]"
published: 2025-10-28
created: 2025-10-30
description: "Series #1｜本稿は概念と枠組みの共有。具体実装は #2・#3 へ。 TL;DR ・6年以上の成長で Next.js の進化に追従するコストが増え、開発速度と知識分散に課題が見え始めた ・管理画面を段階的に刷新し、技術的負債を計画的に解消しながら高速な開発体制を構築（ユーザー影響は最小化） ・初期は AI 活用や新技術の前提を楽観視し、計画をリベース。以降は機能オーナーシップ/コロケーション設計、外部知見、ドキュメント/テスト強化で並行開発できる自律的なチームへ"
tags:
  - "clippings"
  - "Next.js"
  - "アーキテクチャ"
  - "チーム開発"
  - "技術的負債"
  - "リファクタリング"
  - "コロケーション設計"
  - "自律的組織"
  - "ドキュメンテーション"
  - "App Router"
---

## 概要

本記事は、Communeにおける6年以上続くプロダクトの管理画面リプレイスプロジェクトを通じて、組織とアーキテクチャの戦略をどのように整合させて自律的なチームを育てたかを記録したものです。これはシリーズの第1弾で、概念と枠組みの共有に焦点を当てており、具体的な実装詳細は後続の#2・#3で解説予定です。

## 背景と課題

### プロジェクト発足の背景

**技術的な蓄積と課題**

- Communeは初期からNext.jsを採用した6年以上のプロダクト
- Next.jsの大規模な進化（特にApp Router）に追従できず、コードベースとの間に大きなギャップが発生
- 部分的な修正では対処不可能な状態に

**顕在化した問題**

- 開発速度の低下
- コードの属人化傾向
- 新機能追加時の影響予測の困難さ
- 新メンバーのオンボーディング時間の増加

### プロジェクトの選定と方針

**対象の選定**

- 管理画面をリプレイス対象として選定（ユーザー画面より複雑度が低い）
- 段階的な置き換え戦略で安全性を確保
- 30項目以上の機能を細分化して対応

## プロジェクトの試行錯誤

### 初期の停滞とその要因

**要因1：AI自動化への過信**

- 当初、AI活用で開発を加速できると期待
- しかし仕様の複雑さから自動生成では対応不可能と判明
- 結果として計画が遅延

**要因2：技術的負債の顕在化**

- App Routerの事例が少なく、ベストプラクティスを探れるほどの知見が不足
- テストカバレッジ不足（UI/コンポーネント修正完了後に実装予定だった）
- 計画のリベース（修正）が必要に

### 立て直しの三施策

**1. 基本方針の明文化**

- データフェッチング戦略の定義
- コンポーネント構造の標準化
- 設計ガイドラインの策定

**2. テスト戦略の根本的見直し**

- 手動検証の非効率性を認識
- 自動テストの早期導入に方針転換
- テストカバレッジの確保を優先事項に

**3. ドキュメントによる合意形成**

- エンジニアが仕様を文章化
- PdM（プロダクトマネージャー）とQAがレビュー
- 合意内容を記録として残し、参照可能に
- 非同期コミュニケーションの基盤を構築

### 並行開発体制への転換

**組織の再設計**

- **従来**: 複数人で1ページを分担開発
- **変更後**: 「1ページ = 1オーナー」の原則を採用
- 複数エンジニアによる非同期並行作業が可能に

**新たな課題と対処**

- 権限の曖昧さによる決定遅延 → ガイドライン整備で対応
- 設計の不統一による保守性低下リスク → テスト標準化と外部知見導入で対処

## アーキテクチャの転換：コロケーション志向

### レイヤー志向からコロケーション志向へ

**従来のアプローチ（レイヤー志向）**

- 技術的な層（コンポーネント層、ロジック層、テスト層など）で分離
- 機能追加時に複数の層を横断する必要があり調整コストが高い

**新しいアプローチ（コロケーション志向）**

- 機能単位でコンポーネント、ロジック、テスト、型定義を同じ場所にまとめる
- 関連するコードが物理的に近接し、変更の影響範囲が明確に
- フィーチャー単位での独立性向上

**効果**

- 設計戦略と組織戦略の整合により、調整コストを大幅削減
- アーキテクチャのリデザインを約1ヶ月で完了

### トレードオフへの対処

**リスク**: 各機能が独立することで設計の統一性喪失の可能性

**対策**

1. 外部知見の導入とテックリード主導のガイドライン策定
2. 設計議論への積極的参加
3. コードレビュー体制の強化
4. 標準パターンの共有

## ドキュメント文化の定着

### 自然発生的な文化形成

**きっかけ**

- チームに英語が不慣れなメンバーの参加
- 非同期コミュニケーションの必要性の高まり

**結果**

- 合意事項や仕様を文章で残す習慣が自然に定着
- 時差を越えた情報共有が実現
- 言語の多様性が予期せぬ組織的強みに

**ドキュメントの種類**

- 仕様書（エンジニア作成、PdM/QAレビュー）
- 設計ガイドライン
- テスト戦略
- 合意事項の記録

## 外部知見の戦略的導入

### 技術アドバイザーの役割

**協力者**: 業務委託技術アドバイザーのakfm氏

**主な貢献**

1. 「Next.jsの考え方」シリーズの提供
   - 設計議論の指標として機能
   - チーム全体の理解度向上
2. フロントエンドテスト戦略の策定
   - 実践的なアプローチの提示
3. トレードオフ判断時の現実的な指導
   - 理想論ではなく、プロジェクトの制約を踏まえた助言

**効果**

- ドメイン知識（Communeの事業理解）とフレームワーク知識（Next.js専門性）の組み合わせ
- チームにとって最適な形を模索可能に
- 内部の知見不足を補完

## 自律と当事者意識を育てる仕組み

### 三つの重要要素

**1. 機能単位での開発とオーナーシップ**

- 各エンジニアが特定の機能やページに対する明確な責任を持つ
- 決定権限の所在が明確
- 当事者意識の向上

**2. エンジニアによるアーキテクチャ理解**

- なぜこの設計にしたのかの共有
- ガイドラインの背景にある思想の理解
- 設計判断への参加

**3. 学びの組織内共有**

- 個人の学びをチーム全体に還元
- ドキュメントを通じた知識の蓄積
- 組織文化としての定着

## 戦略の振り返りと成果

### 核心的な気づき

**「責務の明確化」の威力**
> "人もアーキテクチャも、責務をどこまで担うのかをはっきり示したことで、自律的に動けるようになった"

- 人（組織）: 各エンジニアの担当範囲と決定権限の明確化
- アーキテクチャ: 各モジュールの責務と境界の明確化
- 両者の整合により、調整コストを削減しながら自律性を向上

### 副次的な効果

**AI活用との相性向上**

- コロケーション設計により、コンテキストが局所化
- AIツールが必要な情報にアクセスしやすくなった
- 定量データはまだ取得中

**機能横断調整コストの削減**

- レイヤード設計では複数層の調整が必要だった
- フィーチャー単位の切り分けにより、影響範囲が局所化

## 今後の展望

**プロジェクトの状況**

- 現在も進行中
- 本記事は概念と枠組みの共有に特化

**シリーズ続編の予告**

- **#2（Aleksei著）**: アーキテクチャ方針の詳細
  - 具体的な設計パターン
  - 実装上の工夫
- **#3（Aleksei著）**: テストと運用の枠組み
  - テスト戦略の詳細
  - 継続的な品質保証の仕組み

## 重要な教訓

### 1. 新技術への楽観視のリスク

- AI自動化やApp Routerなどの新技術に対する過度な期待
- 実際の複雑さやチームの習熟度を考慮した現実的な計画が必要

### 2. アーキテクチャと組織の整合性

- コンウェイの法則: システム設計は組織構造を反映する
- 意図的に両者を整合させることで、最大の効果を発揮

### 3. ドキュメントの戦略的重要性

- 単なる記録ではなく、合意形成と知識共有の基盤
- 非同期・分散チームでは特に重要

### 4. 外部知見の価値

- 内部の知見不足を認識し、適切なタイミングで外部専門家を活用
- ドメイン知識と技術専門性の組み合わせが効果的

### 5. 責務の明確化が自律を生む

- 曖昧な責任分担は意思決定の遅延と品質低下を招く
- 明確な境界と権限により、個人とチームの自律性が向上
