# 何となくのコードレビューを小さくて素早く価値あるプロセスに変えるための参考値や考え方

ref: <https://mtx2s.hatenablog.com/entry/2024/12/23/201616>

## コードレビューの現状と課題

- コードレビューはチームやプロジェクトで目的が曖昧になりがち。
- レビュー待ちのブランチが多くなるとマージコンフリクトが発生しやすい。

## コードレビューの価値

コードレビューは、以下のような多面的な価値を提供します。

### 教育

- 知識の共有: コードは知識の伝承手段として利用され、ベストプラクティスを学び合う場となる。
- 新人育成: チーム標準や方針を新しいメンバーが学ぶ機会を提供。

### 規範の維持

- チームの一貫性: コードスタイルや設計アプローチの統一により、チーム全体の規範を維持。
- 文化形成: 個々のメンバーの癖を統一することで、チームのまとまりを作る。

### ゲートキーピング

- 品質保証: チーム基準やポリシーに基づきコードの品質を維持。
- 製品安定性: 設計や実装の妥当性を確認し、不具合を防ぐ。

### 事故防止

- 早期発見: 動作の不具合やセキュリティの脆弱性を事前に発見・修正。
- 信頼性向上: 問題を早期対応することで、プロダクト全体の信頼性を高める。

### 属人化の防止と知識拡散

- 属人化の解消: 新しいコードの理解者を増やし、知識をチーム全体に広げる。
- バス係数向上: 特定のメンバーへの依存を減らし、チーム全体のレジリエンスを高める。

## 調査からの具体的成果

- リグビーとバードの調査では、コードレビューによりプロジェクトファイルに触れる開発者が66%～150%増加。
- Googleでは「教育」や「規範の維持」に特化しており、設計品質の向上に寄与。

## 静的解析ツールの効果

- 動作に影響を与えない改善がレビューで多く行われている（例: 変数名変更や空白の調整）。
- 静的解析ツールを活用することでレビューコストを削減可能。
- ツールのノイズを減らし、精度を上げるカスタマイズが必要。

## 効率的なレビューのための指標

- 1回のコードレビューの時間: 数時間以内に収める。
- 変更サイズ: 小さな単位（中央値約24～78行）が理想。
- レビュアー人数: 基本1～2人で十分。

## 推奨されるコードレビューのプロセス

- レビューの目的と効果を明確化し、仕組みやガイドラインを整備する。
- 開発ブランチの生存期間を短く保ち、リードタイムを削減する。
- レビュー対象の変更を小さく分割して扱う。
