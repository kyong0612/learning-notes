# 呪文からパターンへ：PKMフレームワークで変わるプロンプトエンジニアリング

ref: <https://zenn.dev/tesla/articles/0efaff25096435>

記事の内容を取得するため、ウェブから最新情報を収集します。

## 1. PKMフレームワークの概念と目的

- **PKMとは**: ポリシー(Policy)、ナレッジ(Knowledge)、メカニズム(Mechanism)の頭文字から成るフレームワーク
- **目的**: プロンプトを抽象的に扱い、モジュール化できる枠組みを提供すること
- **位置づけ**: 単なる書式テンプレートではなく、プロンプトを設計・分析・管理するための概念的枠組み
- **背景**: 「呪文」のように扱われがちなプロンプトを、体系的なパターンとして扱うため

## 2. 従来の手続き型プロンプトとの違い

### 従来の手続き型アプローチ

- **前提条件**: タスクの背景や条件を設定（「あなたは○○の専門家として...」）
- **目的**: 実行すべきタスクや目標（「○○について分析してください」）
- **期待する出力**: 結果のフォーマットや内容（「箇条書きで3つの要点を...」）

### PKMとの主な違い

1. **概念的フレームワーク vs. テンプレート**: PKMは分析・設計のための枠組み、手続き型は書き方の型
2. **管理視点**: PKMはシステム的管理、手続き型は個別プロンプト作成に特化
3. **診断アプローチ**: PKMは機能要素ごとの分解診断、手続き型は全体での診断
4. **スケーラビリティ**: PKMは大規模AIシステム管理に適合、手続き型は個別ユースケース向き
5. **チーム協業**: PKMは共通言語として機能、手続き型は個人レベルの理解に適している

## 3. プロンプトの三大要素

### ポリシー (Policy)

- **定義**: AIの行動指針と制約を定義する要素
- **役割**: 「何をすべきか/すべきでないか」の境界設定
- **小分類**:
  - 倫理的境界（有害コンテンツ制限など）
  - 専門性の限界（医療・法律アドバイスの制限など）
  - 表現スタイル規定（応答トーン、長さ基準など）
  - 情報取扱規則（不確実情報の表示方法など）
- **実装例**:

  ```
  - 常に正確で有用な情報を提供し、不確実な場合はその旨を明示する
  - 医療・法律・財務に関する専門的助言には専門家への相談を推奨する
  - 回答は簡潔かつ具体的にする
  ```

### ナレッジ (Knowledge)

- **定義**: AIが利用可能な知識基盤を定義する要素
- **役割**: 「何を知っているか」「どの情報に基づき回答するか」の規定
- **小分類**:
  - 事実情報（歴史・科学・地理等の基礎知識など）
  - 概念理解（理論的フレームワーク、抽象概念など）
  - 文化的コンテキスト（言語・文化的ニュアンスなど）
  - メタ知識（自己の知識限界の認識など）
  - ドメイン特化知識（特定分野の専門知識）
- **実装例**:

  ```
  - 科学、歴史、文化など幅広い情報を提供（2023年10月までの情報に限定）
  - 学術的・科学的合意に基づいた情報を優先し、複数視点を提示
  - 文化的背景や地域差を考慮した回答を心がける
  ```

### メカニズム (Mechanism)

- **定義**: AIの思考・処理プロセスを定義する要素
- **役割**: 「どのように考え、どのように回答するか」のプロセス規定
- **小分類**:
  - 思考パターン（ステップバイステップ推論など）
  - 出力構成法（構造化された回答設計など）
  - 精度管理（回答品質の内部検証など）
  - 適応戦略（質問タイプへの対応調整など）
  - 相互作用パターン（質問の明確化など）
- **実装例**:

  ```
  - 複雑な質問には段階的に考えを展開し、推論過程を明示する
  - 質問の意図が不明確な場合は、明確化を求める
  - 回答は関連性の高い情報から構成し、重要点を強調する
  ```

## 4. PKMフレームワークの適用方法

### プロンプトタイプ別の適用法

- **システムプロンプト**: ポリシーを最重視、AIの全体的行動範囲と制約を定義
- **ユーザープロンプト**: タスク固有の制約、関連情報、出力形式を個別に指定

### 実践的な分析例

**手続き型プロンプト**:

```
あなたは栄養士です。ダイエット中の人向けの健康的な朝食レシピを3つ提案してください。各レシピには材料、カロリー、調理手順を含め、箇条書きで簡潔に説明してください。
```

**PKM分析**:

- **ポリシー要素**: 「健康的な」「ダイエット中の人向け」
- **ナレッジ要素**: 「栄養士です」
- **メカニズム要素**: 「3つ提案」「材料、カロリー、調理手順を含め」「箇条書きで簡潔に」

### プロンプト診断プロセス

1. **問題の特定**: 回答の具体的問題点を特定
2. **カテゴリの特定**: 三大要素のどれに関連するか判断
3. **小分類の特定**: より具体的な問題カテゴリを特定
4. **具体的修正**: 問題に対応する解決策を適用
5. **テストと反復**: 修正したプロンプトで再テスト

### 典型的な問題と解決策

- **ポリシー関連**: 制約の厳しさ/曖昧さ → 具体的な例による境界定義
- **ナレッジ関連**: 知識の偏り/不足 → 基本事実の明示的記述
- **メカニズム関連**: 思考ステップの飛躍 → 明示的な思考手順の指定

## 5. PKMフレームワークのメリット

1. **体系的な問題解決**: 根本原因特定と的確な修正、要素ごとの最適化
2. **コードベースとしての管理**: 構造化データとしての管理、バージョン管理との統合
3. **チーム間のコラボレーション**: 共通フレームワークによる円滑なコミュニケーション
4. **モジュール化と再利用**: 成功パターンのライブラリ化、要素の再利用
5. **体系的なテストと評価**: 要素ごとの評価基準設定、要素単位でのA/Bテスト

このフレームワークにより、「呪文」的な不透明なプロンプトから「パターン」化された体系的なフレームワークへと移行し、より効率的かつ効果的なAIシステムの設計が可能になります。
