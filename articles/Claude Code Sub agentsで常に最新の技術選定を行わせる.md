---
title: "Claude Code Sub agentsで常に最新の技術選定を行わせる"
source: "https://zenn.dev/studio/articles/00c3002e93adb1"
author:
  - "miyaoka"
published: 2024-07-28
created: 2025-07-31
description: |
  Claude CodeのSub agents機能を活用し、AIに最新の技術仕様を調査させ、常に最適な技術選定を行わせる方法についての解説。AIの知識の古さを克服し、開発効率を向上させる具体的な手法と効果を紹介する。
tags:
  - "Claude Code"
  - "AI"
  - "Sub agents"
  - "技術選定"
  - "開発効率化"
---

## 概要

- **課題**: Claude CodeのようなAIエージェントは、内部知識が古いために最新ではない技術選定をしてしまうことがある。例えば、Tailwind CSS v4のセットアップを依頼しても、v3時代の設定（`tailwind.config.js`の作成など）で進めてしまう。
- **解決策**: 最新仕様の調査を専門とする`spec` Sub agentを作成。このエージェントは、技術選定が必要な場面で自動的に呼び出され、公式ドキュメントを検索し、最新のベストプラクティスに基づいた設定を提供する。

## Sub agentsの適切な使い方

- **専門家モデルの課題**: `backend-architect`のような専門家Sub agentは、タスクをワンショットで実行し結果を返すだけ。メインエージェントは処理の詳細を把握できず、対話による修正や割り込みができないため、ブラックボックス化しやすい。
- **ワンショットタスクが最適**: Sub agentsは、対話が不要で自己完結するタスクに向いている。仕様調査や特定のセットアップなどがその例。

## 実際の利用例：Tailwind CSSのセットアップ

1. **ユーザーの指示**:
    `appsにvue,vite,typescript,tailwind,@egoist/tailwindcss-iconsでセットアップしてほしい`

2. **メインエージェントの処理**:
    - Todoリストを作成。
    - セットアップの途中で、古い知識（v3）に基づいた具体的な指示（`postcss`, `autoprefixer`のインストール、設定ファイル作成）をSub agentに投げてしまう。

3. **Sub agentの処理**:
    - メインエージェントの指示を鵜呑みにせず、各モジュールの最新バージョンと公式ドキュメントを調査。
    - 調査の結果、**Tailwind v4ではPostCSSや設定ファイルが不要である**ことを突き止め、メインエージェントの誤った指示を修正し、正しい技術選定を行う。
    - この自律的な修正能力が、人間による手戻りをなくし、開発効率を大幅に向上させる。

## 調査レポートの作成と知識の蓄積

- Sub agentは調査に数分かかることがあるため、その待ち時間に調査結果をドキュメントとして出力させる。
- これにより、以下のようなメリットが生まれる。
  - **知識の蓄積**: 調査結果がドキュメントとして残るため、チームのノウハウになる。
  - **透明性の確保**: なぜその技術が選定されたのか、明確な根拠が得られる。
  - **トークン消費の削減**: 調査と内容の読み込みは独立したSub agent内で行われるため、メインエージェントのトークン消費を抑えられる。

## Sub agentの設定と呼び出し

- **設定**: Sub agentには、その役割を明確に記述する。
- **動的選択**: メインエージェントはコンテキストに応じて動的にSub agentを選択するが、より確実に使わせるには、メインエージェントの`CLAUDE.md`（システムプロンプト）にも「こういう状況ではこのSub agentを使う」と明記するのが効果的。
- **名指し呼び出し**: ユーザーが`@`メンションでSub agentを直接呼び出し、特定の調査を依頼することも可能。（例：「`@spec` pnpmとbunの並列実行の機能差を調べて」）

## まとめ

- Claude Code Sub agentsを活用することで、AIの知識の古さに起因する問題を解決し、常に最新のベストプラクティスに基づいた開発が可能になる。
- 特に変化の速いフロントエンド開発において、この仕組みは非常に有効。
- 自分が詳しくない技術分野でも、古いプラクティスを誤って採用してしまうリスクを低減できる。
