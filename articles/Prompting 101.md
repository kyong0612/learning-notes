---
title: "Prompting 101"
source: "https://www.youtube.com/watch?v=ysPbXH0LpIE"
author:
  - "[[Anthropic]]"
published: 2025-08-01
created: 2025-08-03
description: "Anthropicの応用AIチームによるプロンプトエンジニアリングの実践的ガイド。スウェーデンの保険会社の事故分析を例に、段階的にプロンプトを改善する方法を実演。"
tags:
  - "clippings"
  - "prompt-engineering"
  - "Claude"
  - "AI"
  - "best-practices"
  - "tutorial"
topics:
  - "プロンプトエンジニアリング基礎"
  - "段階的プロンプト改善"
  - "構造化プロンプト"
  - "Few-shot学習"
  - "拡張思考"
event: "Code w/ Claude"
speakers:
  - "Hannah Moran"
  - "Christian Ryan"
organization: "Anthropic"
location: "San Francisco, CA, USA"
---
# Prompting 101 - 文字起こし全文

## 講演概要

本講演は、Anthropicの応用AIチームのHannah MoranとChristian Ryanによる「Prompting 101」です。2025年5月22日にサンフランシスコで開催された「Code w/ Claude」イベントで発表されました。

## 導入とプロンプトエンジニアリングの基礎

Hannahが講演の冒頭で挨拶し、プロンプトエンジニアリングのベストプラクティスについて実際のシナリオを使って解説すると説明しました。プロンプトエンジニアリングとは、言語モデルとコミュニケーションを取り、目的の結果を得るための手法です。これは、モデルに明確な指示を書き、タスクを完了するために必要なコンテキストを提供し、最適な結果を得るために情報をどのように配置するかを考える実践です。

講演では、実際の顧客から着想を得た実例を使用すると発表されました。画像を分析し、画像から事実情報を抽出し、Claudeにそこで見つけた内容について判断させるという興味深いケースです。

## 実際の使用事例：スウェーデンの保険会社

Christianが具体的なシナリオを説明しました。スウェーデンの保険会社で働き、日常的に自動車保険の請求を処理することを想像してください。このケースでは2つの情報があります：

1. 自動車事故報告書フォーム - 事故が実際に発生する前に何が起こったかを詳細に記述
2. 人間が描いた事故の様子のスケッチ

これら2つの情報をClaudeに渡して分析させます。

### 最初の試行

Christianは実際にAnthropicのコンソールでデモを行いました。Claude 4モデルを使用し、温度を0に設定し、最大トークン予算を大きく設定しました。最初の非常にシンプルなプロンプトでは、Claudeが事故報告書を見直し、事故で何が起こったか、誰が過失があるかを判断するように指示しました。

しかし、この最初のプロンプトを実行すると、Claudeは「チャッパンガン」という街で起こったスキー事故だと判断しました。これは理解できる間違いですが、プロンプトで実際に何が起こっているかの設定を何も行っていなかったためです。

### プロンプトエンジニアリングの反復的性質

この最初の推測は悪くありませんが、まだClaudeに多くの直感を組み込むことができます。プロンプトエンジニアリングは非常に反復的で実証的な科学です。この場合、Claudeが車両環境にいることを理解し、スキーとは関係ないことを確実にするテストケースを持つことができます。このようにして、解決しようとしている問題に実際に取り組むように、プロンプトを反復的に構築していきます。

## 優れたプロンプト構造のベストプラクティス

Hannahが優れたプロンプト構造について説明しました。チャットボットとの対話的なやり取りとは異なり、APIを使用するタスクでは、Claudeに一度のメッセージを送信し、やり取りなしに一度でタスクを成功させたいと考えます。

推奨される構造は以下の通りです：

1. **タスク記述を最初に設定** - Claudeに「あなたはここで何をするのか？あなたの役割は何か？今日達成しようとしているタスクは何か？」を伝える
2. **コンテンツを提供** - この場合、画像（フォームと事故の図）。これは動的コンテンツで、他のシステムから取得することもある
3. **詳細な指示を提供** - Claudeがタスクを進める方法と推論に取り組む方法の段階的リスト
4. **例を提供** - 受け取る可能性のあるコンテンツの例と、そのコンテンツに対してどのように応答すべきか
5. **重要事項の再確認** - Claudeがこのタスクについて理解すべき重要な事項を繰り返し、「さあ、作業を開始してください」と伝える

### 10のポイント詳細構造

より詳細な10ポイントの構造が紹介されました：

1. タスクコンテキスト
2. トーンコンテキスト
3. 背景詳細、データ、文書、画像
4. 詳細指示
5. 例
6. 会話履歴
7. 即座のタスクのリマインダー
8. 重要なガイドラインのリマインダー
9. 出力フォーマット
10. 前置入力

## 段階的なプロンプト改善

### バージョン2：タスクとトーンのコンテキスト

Christianが2番目のバージョンを紹介しました。タスクコンテキストでは、Claudeがどのようなシナリオで作業しているかをより詳しく説明します。また、トーンコンテキストも追加し、Claudeが事実に基づき、自信を持って対応することを求めました。Claudeが見ているものを理解できない場合、推測して誤解を招くのではなく、確実でない場合は評価を行わないように指示しました。

このバージョンでは、AIアシスタントがスウェーデン語の自動車事故報告書を見直す人間の請求調整者を支援することを指定し、人間が描いたインシデントのスケッチであり、完全に確信がない場合は評価を行わないことを明記しました。

実行すると、Claudeはスキー事故ではなく自動車事故であることを理解し、車両Aがチェックボックス1にマークされ、車両Bが12にマークされていることを認識しました。しかし、過失のある人を完全に確信して判断するための情報がまだ不足していました。これは良いことで、事実に基づかない主張をしないことを確実にするタスク設定に従っています。

### バージョン3：背景情報の追加

Hannahがフォームについて多くの情報を知っていることを説明しました。フォームは毎回同じで、決して変わりません。これは、Claudeに見ることになるフォームの構造を伝える素晴らしい情報です。フォームの記入方法は変わりますが、フォーム自体は変わりません。

このような情報をシステムプロンプトに配置することが推奨され、プロンプトキャッシングにも適しています。これにより、Claudeは毎回フォームが何であるかを理解しようとする時間を節約し、何を期待すべきかをすでに知っているため、フォームをより良く読むことができます。

### 情報の構造化

Claudeは構造と組織を非常に好むため、プロンプトで標準的な構造に従うことが推奨されます。XMLタグなどのデリミタを使用でき、markdownもClaudeには有用ですが、XMLタグはその中に何があるかを実際に指定できるため便利です。

バージョン3では、システムプロンプトにフォームについて知る必要があるすべての情報を提供しました。これはスウェーデンの自動車事故フォームで、スウェーデン語で記載され、特定のタイトルを持ち、2つの列があり、異なる車両を表し、17行それぞれの意味をClaudeに伝えました。

人間がフォームを記入するため完璧ではなく、円を描いたり、走り書きしたり、ボックスにXを入れない可能性があることも伝えました。フォームを読む際に探すべき多くの種類のマーキングがある可能性があります。

このバージョンを実行すると、Claudeは追加のコンテキストにより、フォームが何であるかについての説明により少ない時間を費やし、より自信を持って車両Bが過失があると判断しました。

### 例とFew-shot学習

Christianが例（few-shot）の重要性を強調しました。これはClaudeを導く強力なメカニズムです。Claudeが正しく判断するのが困難だが、人間の直感とラベル付きデータで正しい結論に到達できるシナリオや状況がある場合、その情報をシステムプロンプトに組み込むことができます。

ビジュアル例を持つことができ、base64でエンコードした画像を例に渡すデータの一部として含めることができます。その上で、それをどのように分解して理解するかの説明を持つことができます。

これは、アプリケーションの限界を押し広げる方法の重要な部分であり、間違いが発生した場所のフィードバックループを得て、それをシステムプロンプトに追加し、次回似たような例が発生したときに例セットで参照できるようにします。

### 会話履歴

会話履歴も例と同様の効果があります。これは、Claudeがあなたに代わって作業する際に、十分なコンテキスト豊富な情報が手の届くところにあることを確実にするために使用されます。

この保険会社のケースは背景で動作するものですが、より多くのユーザー向けアプリケーションを構築する場合、長い会話履歴があり、それが関連する場合、システムプロンプトに含めるのに完璧な場所です。なぜなら、Claudeが作業するコンテキストを豊かにするからです。

## 最終的なプロンプトの完成

### 詳細な指示と順序の重要性

Hannahがプロンプトの最終部分として、即座のタスクのリマインダーと従うべき重要なガイドラインのリマインダーを追加することを説明しました。これを行う理由には、幻覚の防止があります。Claudeがプロンプトやデータで見つけていない詳細を発明しないようにしたいと考えています。

Claudeが分析の順序も重要であることが発見されました。人間なら、最初に図面を見て何が起こっているかを理解しようとはしないでしょう。それはかなり不明確で、箱と線の束です。追加のコンテキストなしにその図面が何を意味するかを本当に知りません。

しかし、フォームがあり、最初にフォームを読んで自動車事故について話していることを理解し、特定の時間に車両が何をしていたかを示すチェックボックスを見ることができれば、図面に何があるかを理解する方法についてもう少し知ることができます。

### バージョン4：段階的分析

このバージョンでは、Claudeに以下の順序で分析を行うよう指示しました：

1. まずフォームを見る
2. 非常に注意深く見る
3. どのボックスがチェックされているかを確認
4. 何も見落としていないことを確認
5. そこで見たもののリストを作成
6. その後スケッチに移る

この指示により、Claudeは非常に注意深く各ボックスを検査し、その作業を示すようになりました。これはプロンプトエンジニアリングで気づくことの一つで、以前のプロンプトではClaudeにフォームで見たことをどの程度伝えるかを決めさせていましたが、各ボックスを注意深く検査するよう指示したため、まさにそれを行います。

### 出力フォーマットとガイドライン

Christianが最終的な重要なステップとして、出力フォーマットを説明しました。データエンジニアがこのLLMアプリケーションで作業している場合、すべての華やかな前置きは素晴らしいですが、最終的には情報をSQLデータベースなどに保存したいと考えています。

Claudeが判断を下すために必要な他の部分は、アプリケーションにとってそれほど必要ではありません。アプリケーションには詳細な情報が欲しいのです。

この最終バージョンでは、重要なガイドライン部分を追加しました。これは、Claudeから得たい機械的な動作を強化し、補強するものです。要約が明確で簡潔で正確であることを確実にし、分析しているデータ以外にClaudeの評価を妨げるものがないことを確実にします。

出力フォーマットについては、Claudeに最終判定をXMLタグで包むよう求めました。他のすべてのものはアプリケーションで無視し、実際に評価しているもののみを見ます。

### 実行結果

このバージョンを実行すると、より簡潔な要約を求めたため、以前よりもはるかに簡潔になりました。最終的に、最終判定XMLタグで出力が包まれます。

このデモを通じて、スキー事故から、2番目のバージョンでのおそらく自動車事故の不確実で不安定な出力から、実際にアプリケーションを構築し、実際の自動車保険会社を支援できる、はるかに厳密にフォーマットされた自信のある出力に進歩しました。

## 高度なテクニック

### 前置入力（Pre-filled Responses）

Claudeの出力を形作る別の重要な方法は、Claudeの口に言葉を入れる、または前置入力と呼ばれる手法です。XMLタグの解析は良いですが、JSON構造化出力が欲しい場合もあります。これは非常に簡単で、Claudeが特定の形式で出力を開始する必要があることを追加するだけです。

これは例えば、開き角括弧や、旅程のXMLタグ、または最終判定XMLタグなどです。これは、すべての前置きなしに（ただし、それもClaudeが望む手順を通して推論することを確実にするために出力を形作る上で重要ですが）、Claudeがどのように応答すべきかを形作る素晴らしい方法です。

### 拡張思考（Extended Thinking）

Claude 3.7と特にClaude 4は、拡張思考が利用可能なハイブリッド推論モデルです。これは、プロンプトエンジニアリングの支えとして拡張思考を使用できることを強調したいことです。

基本的に、これを有効にしてClaudeが実際に考える時間を持つようにできます。思考タグとスクラッチパッドを追加します。その美しさは、そのトランスクリプトを分析してClaudeがデータにどのようにアプローチしているかを理解できることです。

チェックボックスがあり、事故で起こったシナリオを段階的に進む場合、これをシステムプロンプト自体に構築するのに実際にClaudeを助けようとすることができます。これはトークン効率が良いだけでなく、私たちの直感を持たないこれらの知的モデルが、提供するデータに実際にどのようにアプローチするかを理解する良い方法です。

そのため、システムプロンプトが大幅に改善される方法を実際に分解しようとする上で非常に重要です。

## 締めくくり

Christianが講演を締めくくり、今日来てくれたことに感謝しました。彼らは一日中周りにいるので、プロンプトについて質問がある場合は、ぜひ声をかけてくださいと述べました。

Hannahが、1時間後にエージェント向けプロンプティングがあり、現在はClaude Plays Pokémonの素晴らしいデモがあることを告知しました。このセッションではQ&Aの時間がありませんでしたが、話したい場合はぜひ見つけてほしいと述べ、来てくれたことに感謝しました。

---

この講演は、プロンプトエンジニアリングの実践的なアプローチを提供し、実際の顧客事例を通じて段階的にプロンプトを改善する方法を示した包括的なガイドでした。スウェーデンの保険会社の自動車事故分析という具体的な例を通じて、基本的なプロンプトから高度に構造化された本番対応のプロンプトまでの進化を実証しました。
