# Measuring developer productivity? A response to McKinsey

ref: <https://tidyfirst.substack.com/p/measuring-developer-productivity>

<em>コンサルティング大手は、ソフトウェア開発者の生産性を測定できると主張する独自の手法を考案しました。しかし、彼らが測定しているのは「活動」であり、ビジネスの観点からの生産性ではありません。また、活動の測定には、彼らが対処していないコストやリスクが伴います。ここでは、私たちがどのように測定を考えているかを示します。パート1。（Gergely のバージョンは[こちら](https://newsletter.pragmaticengineer.com/p/measuring-developer-productivity)。）</em>

> Facebook では、（ここで Kent が語ります）マッキンゼーが推奨するような調査を実施しました。最初の1年間は順調で、その調査は当時の開発者の感情の状態について貴重なフィードバックを提供してくれました。
>
> その後、調査結果をより読みやすくして時系列の傾向を追えるようにしようという動きが出ました。そこで、調査から全体スコアを算出するようになりました。たとえば、4.5 の評価が 4 に変わるといった具合です。どうなったのでしょうか？ごく自然な流れで、これもまた1年間はうまくいきました。
>
> 次に、そのスコアが業績評価に現れるようになりました。「彼らは非常に優秀で、スコアが 4.5 だ」といった形で。これもまた1年間続きました。
>
> そして、ついにはそのスコア自体が目標となりました。「今期の評価期間で 4.2 から 4.5 に上げろ」と。そして、スコアは集約されるようになりました。あるマネージャーのスコアは部下の平均、取締役のスコアはその下にいるマネージャーたちの平均となりました。
>
> その結果、事態は大きく逸脱し始めました。取締役はより良いスコアを求めてマネージャーに圧力をかけ、マネージャーは個々の貢献者と交渉してより高い調査スコアを獲得しようとしました。「5 をくれれば『期待を上回る』評価にする」などと。最終的には、組織的な意味合いにかかわらず、スコアの低いマネージャーやチームが解雇されるようになりました。

以上の流れは、「物事がどう進んでいるかを知りたい」という段階から、「物事の進み具合がますます不明瞭になった。そして、人々はシステムを操作しているため、状況は確実に悪化している」という状態へと変わりました。なぜこのようなことが起こったのでしょうか？それは、測定を行い、それに対して（金銭や地位で）インセンティブを与えるようになったからです。そして、測定は行動の変化を引き起こします――すなわち、誰もが重要だと認識する成果を犠牲にしてでも、測定スコアを上げるための創意工夫が生まれるのです。

**この2部構成の記事では、「ソフトウェア開発者の生産性を測定できるのか？」という問いに対し、エンジニアリングリーダーが持つべき視点を提供しようとしています。**  
これには、私たちの見解、プロとしての経験、そして実際にうまくいった方法が反映されています：
  
- **Kent Beck**  
  40年以上にわたるソフトウェアエンジニアリングの経験を持ち、その間、開発者の生産性を測定しようと試み、失敗し、また再挑戦してきました。
  
- **Gergely Orosz**  
  15年のソフトウェアエンジニアリング経験、うち5年間はエンジニアリングチームのマネジメント経験があります。

2週間前、マッキンゼーは「Yes, you can measure software developer productivity.（はい、ソフトウェア開発者の生産性は測定できます）」という記事を発表しました。この記事では、同社がすでに約20社で採用されている開発者の生産性測定のアプローチを持ち、さらにその独自手法の展開を進める準備ができていると主張しています。

とはいえ、私たちはマッキンゼーの記事およびその測定手法について詳細な批判には踏み込みません。記事に見られる考え方はあまりにも単純すぎ、ハイパフォーマンスなソフトウェアエンジニアリングチームのダイナミクスを無視しています。しかし、この記事が書かれた理由は明確です。CEO や CFO は、CTO が「ソフトウェアエンジニアリングは測定が難しい」と手を挙げるのにイライラしており、営業部門や採用チームのように個々に測定やノルマがある他部門と同様に、エンジニアリングにも個別の評価指標があってほしいと考えているのです。

現実には、エンジニアリングリーダーは、今日、開発者の生産性をどのように測定するかという問いを避けることはできません。もし回避しようとすると、CEO や CFO が代わりにマッキンゼーに依頼し、CTO が抗議してもマッキンゼーが独自のフレームワークを展開し、「Developer Velocity Benchmark Index（開発者の速度ベンチマーク指数）」「Contribution Analysis（貢献度分析）」「Talent Capability（人材能力）」といった独自の指標で報告を始めるリスクがあるのです。

私たちは、このようなフレームワークの導入は誤った方向性であり、必ず逆効果をもたらすと考えています。マッキンゼーのフレームワークは、組織や企業のエンジニアリングカルチャーに、長い年月をかけて修復することになるほど大きなダメージを与える可能性が高いのです。そこで、回避せずにこの問いに向き合い、要求の厳しい CEO や CFO に応える方法を探ることにしました。

本記事では以下の点について論じます：

- ソフトウェアエンジニアリングサイクルのメンタルモデル
- なぜ生産性を測定する必要があるのか？
- 営業や採用はなぜこれほど正確に生産性を測定できるのか？
- ソフトウェアエンジニアリングにおける測定のトレードオフ

**この記事は誰のために書かれたのか？**  
ソフトウェア開発者、エンジニアリングリーダー、そしてハイパフォーマンスなソフトウェア開発チームの育成に関心のあるすべての人のために書かれました。ここでいう「ハイパフォーマンス」とは、顧客を満足させ、仕事に来るのが楽しく、意味のない指標で常に測定されると感じさせないチームを指します。私たちの目標は、実践的なリーダーが「害を及ぼさずに」測定を行うための提案をできるようにし、ソフトウェア開発者がより生産的になる手助けをすることです。

マッキンゼーのような記事を読む際は、対象が非常に異なり、特定の読者―すなわち、ソフトウェア開発の経験がほとんどない、または全くない非技術系の CEO や CFO―向けに書かれていることを念頭に置いてください。エンジニアリングは他の部署と同じ扱いを受けるべきものであり、営業や採用と同様の測定方法を求める傾向があります。たとえその結果、誤ったフレームワークが開発文化にダメージを与えたとしてもです。

---

### ソフトウェアエンジニアリングの価値に関するメンタルモデル

ソフトウェアエンジニアリングはどのように価値を生み出すのでしょうか？たとえば、ある機能を作り、それを顧客に提供し、その後改善していくという一連のサイクルを考えてみます。典型的なケースとして、スタートアップで自律性が高く、顧客と調和したエンジニアリングチームの場合を想定します。

まず、次に何をするかを決め、そしてそれを実行します。これが「努力（effort）」です。すなわち、計画、コーディングなどのプロセスです。この努力を通じて、機能そのもの、コード、設計書などという「成果物（output）」が生み出されます。その成果物の結果、顧客は行動を変え、これが「結果（outcome）」となります。例えば、機能のおかげで、顧客がオンボーディング中につまずく回数が減るかもしれません。そして、その行動変化により、フィードバック、収益、口コミといった「影響（impact）」がもたらされるのです。

---

### なぜ生産性を測定する必要があるのか？

まず最初に問いたいのは：

**誰が、なぜ生産性を測定しようとするのか？**

この問いは非常に重要で、その目的によって答えは大きく異なります。以下は一般的な例です：

1. **CTO が、解雇すべきエンジニアを見極めたい場合**  
   「組織内のエンジニアの生産性をどのように測定して、最も生産性の低い10％を特定し、解雇すればいいのか？」  
   このケースは、近年の大規模なレイオフの影響もあり、以下のような方法が考えられます：
   - 最新の業績評価スコアに基づいて最低のパフォーマーを特定する（ただし、これらのデータはやや古い可能性がある）。
   - 在籍期間に基づいて判断し、「最後に入社した者から解雇する」方法を取る（パフォーマンスのデータは使わず、最近入社した者ほど影響が少ないと仮定する）。
   - プルリクエストの数、完了したチケット数など、測定が容易な指標で判断する（つまり、努力や成果物で決める）。
   - マネージャーに、解雇すべきエンジニアの人数を特定させる（チーム内のダイナミクスや、辞意を示しつつあるエンジニアといった定量化しにくい情報も活用する）。

   ただし、レイオフの場合、チームダイナミクスが大きく影響するため、これらのアプローチだけでは最適な結果を得られない可能性が高いです。また、上層部が中間管理職に関与させたくない場合、誤った指標に基づいて決定が下されるリスクもあります。

2. **投資機会の比較のため**  
   「どのチームが、追加の人員投入により最も効率的な成果を上げるのか、生産性をどう測定すべきか？」  
   この場合、投資収益率（ROI）を比較する必要があります。これは生産性そのものの問題ではなく、追加のリソース投入がどれだけの影響（アウトカムやインパクト）をもたらすかという問題です。

3. **パフォーマンス管理のため**  
   「エンジニアの生産性をどのように測定して、トップ10％を評価・報酬化し、下位4分の1のエンジニアを改善のために特定すべきか？」  
   測定の方法はいくつか存在し、指標で管理することも可能ですが、誤差が生じやすい面があります。実際、ハンズオンのマネージャーなら、自身のチーム内で最も優れている人とそうでない人をすぐに挙げ、成果物を詳しく検証することで対処できます。これが「パフォーマンスキャリブレーション」という標準的な手法です。

4. **自己成長を望むソフトウェアエンジニアの場合**  
   「自分自身の生産性をどのように測定し、どの指標を改善すればより良いエンジニアになれるのか？」  
   これはもっと多くのエンジニアが自問すべき問いです。例えば以下の2つの方法が考えられます：
   - テスト駆動開発（TDD）を実践する際、同時に赤いテストが1つだけ存在する状態を目指す。この方法は、努力と成果物の両方を測定できます。期待通りに「赤いテストが1つ」である状態を自信を持って、意図的かつ継続的に維持できるようになるまでを目標とします。
   - 毎日1件のプルリクエストをマージする目標を設定し、1週間単位で追跡する。この指標は努力と成果物の両面を含み、小さなコミットを促し、レビューしやすく、承認を得やすくなります。また、チームの基準に沿った正確なコードを書く動機付けにもなります。

これらの「スコア」を継続的に追跡し、改善に取り組めば、ほぼ間違いなくソフトウェアエンジニアとしての効率は向上するでしょう。しかし、もしこれらの指標をマネージャーに見せ、その評価基準で業績が判断されてしまったらどうなるでしょう？それは災難です。なぜなら、結果や影響ではなく、単に成果物の量で評価されることになるからです。たとえば、新しい言語を学んでチームの支援を行う実験的な取り組みをすると、成果物の量が一時的に減少してしまい、チーム全体の結果が改善されているにもかかわらず、評価が下がる可能性があるのです。

---

### なぜ営業や採用はこれほど正確に生産性を測定できるのか？

ソフトウェアエンジニアリング業界全体として、個々人の生産性を測定する点では、他の部門に比べてずっと劣っていると認めざるを得ません。例えば営業部門について、Kent が以前所属していた会社の営業およびエンジニアリングの幹部会議での実例を紹介します。

> 「あの会議では、営業チームの各メンバーが進捗報告を行い、内容はこうでした：
>
> 『我がチームの今期の目標は60万ドルで、実際は52万ドルを達成しました。私はその達成できなかったことに責任を持ちます。その理由と、次期目標65万ドルを達成するための改善策、さらに今後2四半期にわたる追加の取り組みについて説明します。質問はありますか？』
>
> 質問があれば、営業部長は個々の営業担当者について、どれだけノルマを上回っているか、または下回っているかを徹底的に掘り下げ、会議に参加している全員が理解できる形で説明しました。
>
> それからエンジニアリング側の番になりました。正直なところ、その対比は極めて明確でした。典型的なエンジニアリングの進捗報告は次のようなものでした：
>
> 『今期は Feature A を出荷し、技術的負債の移行で若干遅れています。来期は Feature B を出荷して移行を追いつかせます。質問はありますか？』
>
> もし遅れについて質問があっても、個々人についての言及はなく、通常は予期せぬ困難や技術的負債、APIなど、非エンジニアには理解しにくい要因が説明されるだけでした。」

営業やカスタマーサポートの責任のレベルは、エンジニアリング部門に対してCEOが観察するものとは全く異なるスケールにあります。しかし、CEO が全体の部門コストを検証すると、エンジニアリング部門は営業よりもコストが高い場合がほとんどです。

また、営業だけでなく採用部門も、「採用すべき人数」という明確な目標を持っています。採用チームは、自分たちの目標に対して何パーセント達成しているか、どれだけの採用担当者が追加で必要か、また、最も成果のある採用担当者とそうでない担当者を数値で示すことが可能です。

CEO の立場に立って考えてみると、営業は生産性を明確に測定でき、採用も同様です。では、なぜエンジニアリングはそうではないのでしょうか？

ここで再び、先の「努力―成果物―結果―影響」というメンタルモデルに立ち返ります。たとえば、営業チームが取引成立数を指標にする場合、この指標は「結果」または「影響」に分類されます。同様に、採用チームの主な指標である「採用人数」も「影響」にあたります。

---

### ソフトウェアエンジニアリングにおける測定のトレードオフ

ソフトウェアエンジニアリングチームの効率を測定するための代表的なフレームワークのひとつに、DORA フレームワークがあります。このフレームワークで注目されているのは以下の点です：

<em>4 つの DORA 指標は、それぞれが「結果」または「影響」を測定する</em>  
つまり、DORA の各指標は成果やインパクトを捉えています。

また、別の測定手法として SPACE フレームワークがあります。これは、満足度（Satisfaction）、パフォーマンス（Performance）、活動（Activity）、コミュニケーション（Communication）、効率（Efficiency）の5要素（SPACE）を捉えようとします。SPACE は DORA と同様に成果や影響に注目しますが、定量的な指標を厳密には定めず、例示的な指標を提示するにとどまります。ただし、SPACE フレームワークで注意喚起されている「コード行数」のような指標は、実際には努力や成果物を測定してしまう傾向があります。

私たちがマッキンゼーのシステムに対して抱く批判のひとつは、DORA や SPACE とは異なる独自の指標のほとんどが、努力または成果物を測定している点です。

では、このアプローチの問題点は何でしょうか？  
まず第一に、これらの指標を気にするのは、それらを収集している人々だけであり、顧客も経営陣も投資家も本当に関心を持っているわけではありません。  
第二に、そして最も重要なのは、これらの指標を収集・評価する行為が、実際に顧客が重視する成果（例えば、収益性）を生み出すチームの働きに干渉してしまうことです。

なぜマッキンゼーは努力の測定方法を追加しているのでしょうか？  
それは、努力の測定が最も容易だからです。しかし、マッキンゼーのアプローチは、測定行為自体がエンジニアの働き方を変えてしまい、システムを「操作（ゲーム化）」しようとする行動を引き起こすという重要な真実を無視しています。

**サイクルの早い段階で測定すればするほど、測定は容易になります。しかし、その反面、意図しない副作用を引き起こす可能性が高まります。**  
たとえば、利益のみを測定する極端なケースを考えてみましょう。良い点は、会社全体で目標が一致するということです。しかし悪い点は、誰がどの程度利益に貢献したかを割り出すのがほぼ不可能になることです。成果物や努力を測定してその帰属問題を解決しようとすれば、そのコストとして、人々の行動が変わり、指標を上げるためにシステムを操作してしまうインセンティブが生まれてしまいます。

では、利益にどれだけ貢献したかという個人の評価を測定するために、マイクロな測定（細かい指標による評価）を導入し、会社のビジネスを台無しにする誘惑に駆られるでしょうか？　決してそんなことはありません。

**私たちは、エンジニアリングリーダーには「結果」や「影響」といった指標に目を向け、何を測定すべきかを見極めることを強く提案します。**  
確かに努力を測る誘惑はありますが、なぜなら、営業や採用部門は、朝9時にオフィスにいることや送信したメールの数で評価されることはないからです。彼らは「結果」や「影響」に基づいて評価されています。

では、エンジニアリングチームに対してどのような「結果」や「影響」を測定できるのでしょうか？  
DORA や SPACE がいくつかの手がかりを与えてくれますが、私たちはさらに次の2点を提案します：

- **チームごとに、週に1回は顧客を満足させる**  
  一見取るに足らない成果に思えるかもしれませんが、実際には非常に難しい目標です。最も生産性の高いチームや柔軟な会社であれば達成可能です。スタートアップがこれほど迅速に動き、優れた実行力を発揮する理由は、必要性からそうせざるを得ない状況にあるからです。たとえこの指標が測定されていなくとも。

- **チームが約束したビジネスインパクトを実現する**  
  Meta、Uber などの急成長するテック企業で「インパクト」が重視される理由は、ビジネスがエンジニアに対してビジネス理解と、企業目標の達成を優先するようなインセンティブを与えているからです。たとえば、ある設定変更によって年間200万ドルのコスト削減が実現できるのと、5か月のエンジニアリング期間を要する年間50万ドルのコスト削減とでは、どちらが価値が低いでしょうか？　答えは「そんなことはない」です。インパクトのみに焦点を当てるのではなく、最終的にビジネス価値を生み出すことが重要です。

---

### Takeaways（まとめ）

ビジネス側からは、ソフトウェア開発チームの生産性を数値化する圧力が確実に高まっています。マッキンゼーのような企業は、この明確な需要に応えて、まさにその目的を果たすフレームワークを提供しようとしています。

努力や成果物を測定するのは魅力的な手法ですが、これらはエンジニアリングカルチャーに悪影響を及ぼすトレードオフが伴います。エンジニアリングリーダーは、これらのトレードオフを十分に考慮し、開発者のインセンティブがどのように変わるかを見極める必要があります。

パート2（木曜日公開予定）では、「結果」や「影響」だけを測定することの危険性についてさらに掘り下げ、ソフトウェア開発者の生産性をどのように、あるいはすべきではないかについて私自身の考えをお伝えします。

*(※ Kent: 私は Gergely Orosz と彼の貴重な The Pragmatic Engineer スタックを用いてこの文章を書いています。ぜひ購読をご検討ください。木曜日のパートでは、測定に関して何をすべきか、また何をすべきでないかについて私自身の見解をお伝えします。)*
