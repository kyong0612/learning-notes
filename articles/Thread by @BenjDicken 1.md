---
title: "Thread by @BenjDicken"
source: "https://x.com/benjdicken/status/1977760225659928683?s=12"
author:
  - "[[@BenjDicken]]"
published: 2025-10-14
created: 2025-10-15
description: |
  PostgreSQLにおける物理的レプリケーションと論理的レプリケーションの違い、それぞれのトレードオフ、そして使用ケースについての解説スレッド
tags:
  - "clippings"
  - "PostgreSQL"
  - "データベース"
  - "レプリケーション"
---
**Ben Dicken** @BenjDicken [2025-10-13](https://x.com/BenjDicken/status/1977760225659928683)

Postgresにおけるレプリケーションには2つの方法があります：物理的レプリケーションと論理的レプリケーション。

どちらも優れた機能ですが、異なるトレードオフがあります。

物理的レプリケーションは完全なWALをレプリカに送信し、プライマリノードのバイトレベルのコピーを作成します。つまり、プライマリのCPUオーバーヘッドは低いのですが、同じPostgreSQLバージョン間でのみ互換性があります（さらに一部の拡張機能やglibcのバージョンも一致する必要があります）。そして、クロスアーキテクチャのレプリケーションはできません！

これにより、高可用性のプライマリ-レプリカ構成には有用ですが、バージョンアップグレードや異なるプラットフォームへの移行には非現実的です。

論理的レプリケーションは行レベルの抽象化で動作します。バイト/ブロックレベルのミラーリングは行わないため、PostgreSQL 10以降（導入されたバージョン）のすべてのメジャーバージョン間で動作可能です。

より柔軟ではありますが、移行の万能薬ではありません。論理的レプリケーションはDDLやシーケンスをレプリケートしないため、ここでは手動での調整が必要です。また、大規模なデータベース（例えば1TB以上）を移行する際には遅く、パフォーマンス問題につながる可能性があるため、慎重な計画が必要です。

どちらを使うべきか？言いたくありませんが...コンテキスト次第で、時にはpg_dumpのようなツールと併用すべきです。

![Postgresレプリケーションというタイトルの表。列は抽象化、バイトレベル、バージョン一致、相互運用、レプリケート、オーバーヘッド。行はPhysicalとLogicalでラベル付け。Physical行：ブロック、はい、必須、いいえ、いいえ、はい、低い。Logical行：行、いいえ、不要、はい、はい、いいえ、高い。PhysicalとLogicalのラベルは緑とシアンで強調表示されています。](https://pbs.twimg.com/media/G3JqZWbagAAsiFT?format=jpg&name=large)

---

**Nik Samokhvalov** @samokhvalov [2025-10-13](https://x.com/samokhvalov/status/1977863067292590518)

CPUは厄介です

存在する上限は、物理的レプリケーションよりも論理的レプリケーションの方が解決しやすいです

実際、物理的レプリケーションでは解決不可能なものもあります - これがシャーディングの主要な理由の1つです

---

**Ben Dicken** @BenjDicken [2025-10-13](https://x.com/BenjDicken/status/1977867546184302645)

物理的レプリケーションではCPUオーバーヘッドが無制限になると言っているのですか？考えられる最悪のシナリオはどのようなものでしょうか？

---

**Subhash Pophale** @SubhashPophale [2025-10-13](https://x.com/SubhashPophale/status/1977791160887476644)

論理的レプリケーションはCDCのために主キーが必要です。これは元のテーブルに主キーがない場合の別の問題です

---

**Ben Dicken** @BenjDicken [2025-10-13](https://x.com/BenjDicken/status/1977798129652285550)

良い指摘です！ほとんどは良いスキーマ設計の実践として既に持っているはずですが、常に例外があります。移行前にスキーマの改善が必要なケースもあるでしょう。

---

**DefaultBlameAcceptor** @database\_comedy [2025-10-14](https://x.com/database_comedy/status/1977893695392219462)

物理レプリカを論理レプリカに変換して、大規模データベースの初期同期待ち時間をスキップできます（PostgreSQL 17以降）。

---

**Julian Hamann** @jhamann93 [2025-10-13](https://x.com/jhamann93/status/1977762230587335086)

Supabaseでこれらを実行したことはありますか？supabase_adminユーザーを中心に内部的に構造化されているため、pg_dumpなどを使用する際にいくつかの細かい点があります。この件についてあなたの専門知識を聞けると興味深いです。

---

**Andres Rey** @Andres\_v\_Rey [2025-10-13](https://x.com/Andres_v_Rey/status/1977831194361245717)

論理的レプリケーションは、ゼロダウンタイム移行と選択的なテーブルレプリケーションで輝きます。物理的レプリケーションはより高速ですが、バージョンに固定されます。クロスリージョン設定では、論理的レプリケーションがデータをフィルタリングする柔軟性を提供します。
