---
title: "仕様を変えて速くする —— パフォーマンス改善とAIによる“先回り”検証"
source: "https://kaminashi-developer.hatenablog.jp/entry/2025/09/11/faster-with-ai-spec-change"
author:
  - "Shimmy (@naoya7076)"
published: 2025-09-11
created: 2025-09-12
description: "AIに仮実装をさせることで実装の難所を事前に発見し、より良い仕様へ素早く変更した実例"
tags:
  - "エンジニア"
  - "TechBlog"
  - "技術検証"
  - "パフォーマンス改善"
  - "AI"
  - "仕様変更"
---

![](https://cdn-ak.f.st-hatena.com/images/fotolife/k/kaminashi-developer/20250910/20250910230251.png)

## はじめに

本記事では、AIによる仮実装を活用して技術的な実装の難所を事前に特定し、より良い仕様へと迅速に改善した実例を紹介します。仕様検討段階での「本当に実装可能か？」という不安を解消し、手戻りを防ぐためのアプローチです。

## 背景

### 承認一覧画面のパフォーマンス問題

クラウドサービス「カミナシ レポート」の承認一覧画面では、従来、初期表示時に全件データを取得していました。しかし、データ量の増加に伴い、表示に数分かかるケースが発生し、パフォーマンスが深刻な問題となっていました。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/k/kaminashi-developer/20250910/20250910224307.png)
*カミナシレポートの承認一覧画面*

SQLチューニングやインデックス最適化といった技術的改善だけでは限界があったため、「全件取得」から「期間指定取得」へと仕様を変更する方針となりました。

## 仕様の変更プロセス

### Before & After

- **Before**: 承認対象の全レポートを取得し、絞り込みはユーザー操作に依存。
- **After**: 初期表示は直近1ヶ月分のみ取得し、ユーザーは最大3ヶ月まで期間を変更可能に。

この変更により、初期表示速度を改善し、将来的なデータ増加にも耐えうる仕様を目指しました。

### 初期の仕様案と課題

当初検討されていたUIは、セレクトボックスとカレンダーを組み合わせた多段構造で、複雑なものでした。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/k/kaminashi-developer/20250910/20250910224445.png)
*期間フィルターの初期仕様*

この仕様には、コンポーネント間の複雑な状態管理や、使用しているUIライブラリ（Ant Design）の制約といった潜在的な実装リスクがありました。

### AIによる仮実装と課題の明確化

このリスクを具体的に検証するため、AIにUIコンポーネントの仮実装を依頼しました。その結果、以下の問題が明らかになりました。

1. 親子孫の3層コンポーネント間での複雑なstate受け渡しが必要。
2. Ant DesignのRangePickerは、カレンダーパネルだけを独立して表示するAPIがなく、独自実装が必要になる。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/k/kaminashi-developer/20250910/20250910224544.png)
*赤枠が問題の箇所*

AIが生成したコードという具体的な物証があったことで、「実装が難しそう」という曖昧な懸念が、「UIライブラリの制約により、ここが複雑化する」という明確な課題としてチーム（PM、デザイナー、エンジニア）で共有できました。

### 仕様の見直しと最終決定

AIによる仮実装で得られた知見を基に、仕様を再検討しました。最終的に、Ant Designの標準コンポーネントをそのまま活用するシンプルなUIに変更しました。

- 初期表示は直近1ヶ月分に固定。
- RangePickerを直接使用して期間を指定（上限3ヶ月）。
- 複雑な多段UIを廃止。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/k/kaminashi-developer/20250910/20250910224628.png)
*新しい承認一覧の期間フィルター*

この仕様変更により、実装の複雑さが大幅に軽減され、開発期間の短縮にも繋がりました。

## 成果

### 表示速度の大幅な改善

リリース後、ベンチマーク対象の各企業で画面の初期表示時間が大幅に短縮されました。特に改善が顕著だった企業では、表示速度が約26.7倍も向上しました。

| 企業名 | 表示速度改善倍率 |
| :--- | :--- |
| A社 | 約18倍 |
| B社 | 約4.7倍 |
| C社 | 約26.7倍 |
| D社 | 約7倍 |

### エンドポイントのレイテンシ低下

関連するエンドポイントのレイテンシも、リリース後に明確に低下が確認できました。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/k/kaminashi-developer/20250910/20250910224701.png)
*承認一覧エンドポイントのレイテンシ*

## まとめ

本件では、パフォーマンス問題を解決するために「仕様変更」というアプローチを取りました。その過程でAIに仮実装をさせたことにより、以下の利点が得られました。

- **迅速なPoC作成**: 人が実装するよりも素早く検証用のコードを作成できた。
- **課題の具体化**: 実際のコードを基に議論することで、技術的制約や複雑さを具体的かつ高い確度でチームに共有できた。
- **手戻りの削減**: エンジニアが本格的に実装する前に課題を発見し、仕様を修正できたため、手戻りを未然に防げた。

AIを活用して実装の難所を“先回り”して検証することで、より効果的な仕様を迅速に決定し、開発をスムーズに進めることができました。

## 参考資料

- [パフォーマンスを改善するには仕様変更が1番はやい - Speaker Deck](https://speakerdeck.com/yamamotohiroya/pahuomansuwogai-shan-surunihashi-yang-bian-geng-ga1fan-hayai)
