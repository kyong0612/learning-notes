---
title: "関数型ドメインモデリングの著者、Scott Wlaschinさんの出たポッドキャストが良すぎたので和訳した(2)-2"
source: "https://zenn.dev/jtechjapan_pub/articles/41a5cd66900e36"
author:
  - "tomohisa"
published: 2025-09-27
created: 2025-10-04
description: |
  Compiled Conversation #8/#9でのScott Wlaschin氏インタビューを和訳し、Railway Oriented Programmingによるエラーハンドリング、依存性注入の考え方、関数型言語普及の背景を整理したまとめ。
tags:
  - "clippings"
  - "F#"
  - "functional-programming"
  - "DDD"
  - "error-handling"
---

## Domain Modeling Made Functional Part 2 with Scott Wlaschin

Compiled Conversation #8/#9のポッドキャストをLLM翻訳と手作業で和訳したパート2-2。Railway Oriented Programmingを中心に、関数型アプローチでのエラーハンドリングと依存性管理、関数型言語の普及状況に焦点を当てる。

### 登場人物

- Ed Mann（ホスト）: Compiled Conversationの司会。課題の深掘りを促す質問役。
- Scott Wlaschin（ゲスト）: 『Domain Modeling Made Functional』著者。F#コミュニティを牽引し、関数型アプローチの実践的手法を解説。

### エラーハンドリング - Railway Oriented Programming

- Scottが提唱したRailway Oriented Programmingは、成功/失敗の二系統を型システムで表現し、関数合成を途切らせずにエラー処理を組み込む手法として紹介。
- 代数的データ型（選択型）が成功値と失敗値を同一の型として扱える点を強調し、例外に依存せずにエラー情報が型シグネチャで明示される利点を解説。
- Goのようにタプルでエラーを返す手法は冗長になりがちだが、関数を渡す高階関数とアダプタを活用すれば、成功トラックとエラートラックを滑らかにつなげられると説明。
- 値としてのエラーを標準化することで、例外捕捉の漏れが防げる点と、関数型以外の言語にRailway Orientedなライブラリが移植されつつある状況への所感を共有。

### 依存性注入と純粋関数

- オブジェクト指向でのDIに相当する手法として、関数パラメータに依存関係（IO関数など）を渡す「パラメータ注入」を推奨。
- 非決定的なIOや乱数などの副作用はシステムの縁に隔離し、ビジネスロジックは純粋関数として決定的に保つべきと主張。
- ワークフローでは「意思決定」と「副作用実行」を分離し、最後にまとめて副作用を実行する設計を例示。これによりモックが不要になり、テストでは実装関数を別の純粋な関数に差し替えるだけで済むと説明。

### 暗黙的な例外について

- エラーは「致命的バグ（パニック）」「ドメインで予期されるエラー」「インフラ起因のエラー」の3種に分類でき、それぞれ対処が異なると整理。
- Null参照やメモリ不足など回復不能なものは例外で上位まで伝播させ、アプリ全体で握る設計を推奨。
- ファイル欠如などドメインで想定されるエラーはResult型などで明示的に扱い、例外化しない方が制御フローが明確になると強調。
- ネットワークタイムアウトなどインフラ由来のエラーは再試行戦略と併用し、限界までリカバリを試みた上で例外に昇格させるなど状況に応じたハンドリングが必要と指摘。

### なぜ関数型プログラミング言語は一般的でないのか

- OOが広まった背景を、90年代のインターネット普及期にJavaが標準となった「偶然の経路依存性」と分析。
- 関数型言語は歴史的にはCと同時期に誕生したが、当時は学術寄りでドメインモデリングにフォーカスしていなかったことが普及の遅れにつながったと振り返る。
- Scalaのようなマルチパラダイム言語では、OO派と関数型派が混在しコードベースが分断される課題を例示。強いパラダイムを持つ言語の方が保守性を保ちやすいと主張。
- C#が多機能化で複雑化する一方、F#は10年前とほぼ同じスタイルで読み書きできる安定性があると評価し、企業開発に最適な実用志向の関数型言語として推奨。
- プログラミング言語は学びやすいが、根底のパラダイム転換が難しいとし、言語間での思考法の学習が価値ある投資だとまとめる。

### 重要な結論・示唆

- **Railway Oriented Programmingは、型で成功/失敗を明示しながらエラー連鎖を整理する強力なメタファーである。**
- **副作用を境界に押し出し純粋関数を維持することで、テスト容易性と保守性が大きく向上する。**
- **エラーは性質別に分類し、例外・値・再試行のどれを適用するか設計時に決めるべきである。**
- **言語選択ではパラダイムの一貫性が保守性に直結し、F#のような静的関数型言語はエンタープライズでも実用的な選択肢となる。**

### 制約・注意点

- 記事はポッドキャストをLLMベースで和訳しており、細部表現や文字起こしに誤りが残っている可能性があると著者が明記している。
- 本記事はパート2を3分割したうちの(2)-2であり、前後回を参照することで議論の連続性を把握できる。

### 参考リンク

- ポッドキャスト本編: <https://compiledconversations.com/9/>
- Ed Mannの告知ポスト: <https://x.com/edd_mann/status/1968226905091609043>
- Scott Wlaschinの告知ポスト: <https://x.com/ScottWlaschin/status/1970594352679526570>
- 著者の告知ポスト: <https://x.com/tomohisa/status/1971469948141871104>
- 連載の他パート: (1)-1 <https://zenn.dev/jtechjapan_pub/articles/b0ab091b9d1946> / (1)-2 <https://zenn.dev/jtechjapan_pub/articles/788dea679049cb> / (1)-3 <https://zenn.dev/jtechjapan_pub/articles/17675dd2adf7a8> / (2)-1 <https://zenn.dev/jtechjapan_pub/articles/8c1c7c88f216bd> / (2)-3 <https://zenn.dev/jtechjapan_pub/articles/13850e51d2b05a>
