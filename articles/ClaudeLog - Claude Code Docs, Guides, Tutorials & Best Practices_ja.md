---
title: "ClaudeLog - Claude Code ドキュメント、ガイド、チュートリアル、ベストプラクティス"
source: "https://claudelog.com/mechanics/custom-agents/"
author:
  - "[[Wilfred Kasekende]]"
  - "[[musistudio]]"
  - "[[ClaudeLog]]"
published: 2025-07-04
created: 2025-07-28
description: "特化したAIアシスタントとタスク委任のためのClaude Codeのカスタムエージェントシステムを理解する。"
tags:
  - "clippings"
---
`Sub-agent`は常にClaude Codeの最大の強みの一つでした。しかし、ユーザーがいつ手動で呼び出すかを知り、どのような専門知識を与えるべきかを覚えておく必要があるという期待が、一般ユーザーにとってこの機能の利用を妨げていました。もうそんなことはありません...

`カスタムエージェント`は、特定のタスクを解決するために利用できる特化したエージェントです。これらは、`ツール`が自動的に呼び出されるのと同様の方法で、**Claudeによって自動的に呼び出されます！**

このアプローチは、信じられないほどの可能性をもたらします！MCPツールエコシステムがどれほど信頼性が高く、よく開発されているかを考えると、私たちが協力してエージェントを構築し、共有し、交換する活気ある未来を思い描いています。もし素晴らしいエージェントを持っているか、既存のエージェントを改良したい場合は、ぜひ[r/ClaudeAI](https://www.reddit.com/r/ClaudeAI/)にアクセスしてください。

従来の`サブエージェント`とは異なり、`カスタムエージェント`は、`委任元エージェント`から独立した独自の`カスタムシステムプロンプト`、ツール、コンテキストウィンドウを持っています。`カスタムエージェント`は、特化され、隔離され、効率的であるように設計されています。その設定はClaude Codeにネイティブに統合されており、サードパーティのペルソナ管理ツールを必要としません。

---

### これまでとは全く違うゲームになる

**自動委任** - この仕組みは、特化された隔離エージェントへのタスクの自動委任により、強力でスケーラブルです。統合プロセスはシームレスで、ツールを使用する際のClaudeの信頼性に基づいています。Claudeは、リクエストのタスク説明、エージェント設定の説明フィールド、現在のコンテキスト、および利用可能なツールに基づいてタスクを委任します。

**手動呼び出し不要** - どの役割の`サブエージェント`をいつ使うべきかを覚えておく必要はもうありません。Claudeは、適切なツールを自動的に選択するのと同じように、タスクを適切なスペシャリストにインテリジェントにルーティングします。ただし、特に多くの`カスタムエージェント`オプションでClaudeを溢れさせた場合、セットアップ内でタスクルーティングがどれほど信頼できるかをベンチマークする必要があります。

### 主な利点

- **独立したコンテキストウィンドウ** - 各`カスタムエージェント`は、`委任元エージェント`とは別の独自のコンテキストウィンドウで動作します。これにより、`委任元エージェント`にすべての詳細を気にさせることなく、より大きなタスクを完了でき、異なるタスクが[コンテキストを汚染する](https://claudelog.com/mechanics/poison-context-awareness/)のを防ぎながら、最高のパフォーマンスを維持します。
- **特化したシステムプロンプト** - 個々の`カスタムエージェント`のシステムプロンプトは正確にスコープでき、冗長なコンテキストの継承を避けることで、限られたコンテキストウィンドウを節約します。
- **役割固有のツール** - エージェントに特定のツールを設定することで、信頼できるエージェントのみが特定のタスクを実行できるようにし、セキュリティ問題を防止するのに役立ちます。特定のエージェントは、その役割における信頼性についてテストおよび評価できます。このファーストパーティレベルの統合は、[役割分割サブエージェント](https://claudelog.com/mechanics/split-role-sub-agents/)のコンセプトを次のレベルに引き上げます！
- **コミュニティでの共有** - 洗練されれば、`カスタムエージェント`はプロジェクト間、チーム内、さらには[r/ClaudeAI](https://www.reddit.com/r/ClaudeAI/)で共有でき、絶えず進化する特化エージェントの協調的なエコシステムを構築します。

---

### クイックスタートガイド

`カスタムエージェント`はClaude Code [v1.0.60](https://claudelog.com/claude-code-changelog/#v1060)で導入されました。

**1\. カスタムエージェントインターフェースを開く**

```markdown
/agents
```

**2\. '新しいエージェントを作成' を選択** プロジェクトレベルまたはユーザーレベルの`カスタムエージェント`を作成するかを選択します。

**3\. エージェントを定義する**

- **推奨**: まずClaudeで生成し、その後カスタマイズして独自のものにする
- エージェントの詳細と、いつ使用すべきかを説明する
- 特定のツールを選択するか、空白のままにしてすべてのツールを継承する
- システムプロンプトを編集して、役割、機能、アプローチを定義する
- エージェントの色を選ぶ
- `カスタムエージェント`の設定を確認する

**4\. 保存して使用** これで`カスタムエージェント`が利用可能になりました！ Claudeは適切な場合に自動的に使用するか、明示的に呼び出すこともできます: `この関数を分析するためにアルゴリズム複雑度スペシャリストエージェントを使用してください。`

**ファイル形式**:

```yaml
---
name: your-agent-name
description: このエージェントをいつ呼び出すべきかの説明
tools: tool1, tool2, tool3  # オプション - 省略した場合はすべてのツールを継承
---

ここにエージェントのシステムプロンプトを記述します。役割、機能、
問題解決へのアプローチを定義します。具体的な指示、
ベストプラクティス、エージェントが従うべき制約を含めます。
```

---

### 基本的な使い方

**自動呼び出し** - 作成されると、`カスタムエージェント`は自動的に動作します。Claudeはリクエストとエージェントの説明に基づいて適切なエージェントを選択して使用します。

**手動呼び出し** - 特定のエージェントを明示的にリクエストすることもできます:

```markdown
この関数を分析するためにアルゴリズム複雑度スペシャリストエージェントを使用してください。
```

**タスク委任** - Claudeは、さまざまな操作に対して自動的にツールを選択するのと同様に、特化された隔離エージェントにタスクをインテリジェントにルーティングします。

---

### 設定

`カスタムエージェント`は、YAMLフロントマター付きのMarkdownファイルとして、次の2つの場所に保存されます:

| タイプ | 場所 | スコープ | 優先度 |
| --- | --- | --- | --- |
| プロジェクトエージェント | `.claude/agents/` | 現在のプロジェクトで利用可能 | 最高 |
| ユーザーエージェント | `~/.claude/agents/` | すべてのプロジェクトで利用可能 | 低い |

エージェント名が競合する場合、プロジェクトレベルのエージェントがユーザーレベルのエージェントよりも優先されます。

**設定フィールド**

| フィールド | 必須 | 説明 |
| --- | --- | --- |
| name | はい | 小文字とハイフンを使用した一意の識別子 |
| description | はい | エージェントの目的の自然言語による説明 |
| tools | いいえ | 特定のツールのカンマ区切りリスト。省略した場合、メインスレッドからすべてのツールを継承 |

---

### ベストプラクティス

- **Claude生成から始める** - 最初のエージェントをClaudeで生成し、その後カスタマイズして独自のものにします。
- **関心の分離** - プログラミングと同様に、`カスタムエージェント`の関心事をより良く分離することで、パフォーマンス、保守性、検証可能性、共有可能性が向上します。
- **例を提供する** - システムプロンプトに肯定的/否定的な例を含めます。LLMはパターンの認識と反復に優れているため、十分に多くの異なるインスタンスを提供してください。
- **段階的なツール拡張** - `カスタムエージェント`のために慎重にスコープされたツールのセットから始め、その動作を検証し、最適なパフォーマンスに必要な追加機能を特定しながら、段階的にツールのスコープを拡大します。

---

### コミュニティのビジョン

エージェントワークフローの未来に非常に興奮しています！私たちは皆で協力して、さまざまなエージェントの最適なインスタンスを洗練させ、互いに共有すべきです。ユーザーがいつエージェントをアクティブにするかを理解する必要がないため、この種のイニシアチブは自動委任によってはるかに実現可能になります。

カスタムエージェントの共有は、単一のMarkdownファイルをコピーするだけの簡単なものです。たとえば、あるプロジェクト用に作成された`code-reviewer.md`エージェントは、チームメイトやコミュニティと即座に共有できます:

```yaml
---
name: code-reviewer
description: 専門のコードレビュースペシャリスト。品質、セキュリティ、保守性のためにコードを積極的にレビューします。コードを記述または変更した直後に使用します。
tools: Read, Grep, Glob, Bash
---

あなたは、高いコード品質とセキュリティ基準を保証するシニアコードレビュアーです。

呼び出されたとき:
1. git diff を実行して最近の変更を確認します
2. 変更されたファイルに焦点を当てます
3. すぐにレビューを開始します

レビューチェックリスト:
- コードはシンプルで読みやすいか
- 関数と変数は適切に命名されているか
- 重複したコードはないか
- 適切なエラーハンドリング
- 公開されたシークレットやAPIキーはないか
- 入力検証が実装されているか
- 良好なテストカバレッジ
- パフォーマンスへの配慮がされているか
- アルゴリズムの時間計算量が分析されているか
- 統合されたライブラリのライセンスがチェックされているか

優先度別に整理されたフィードバックを提供します:
- 重要な問題（修正必須）
- 警告（修正すべき）
- 提案（改善を検討）

問題の修正方法の具体例を含めます。
```

あなたの目標は、さまざまなドメインからの実戦で試された`カスタムエージェント`の包括的なコレクションを構築し、あらゆるタスクに効果的に取り組めるようにすることです。

**公式ドキュメント**: [サブエージェント ドキュメント](https://docs.anthropic.com/en/docs/claude-code/sub-agents)

**参照**: [タスクエージェントツール](https://claudelog.com/mechanics/task-agent-tools/) | [エージェントエンジニアリング](https://claudelog.com/mechanics/agent-engineering/) | [r/ClaudeAI](https://www.reddit.com/r/ClaudeAI/)

**著者**:[InventorBlack](https://www.linkedin.com/in/wilfredkasekende/) | [Command Stick](https://commandstick.com/) CTO | [r/ClaudeAi](https://reddit.com/r/ClaudeAI) Mod
