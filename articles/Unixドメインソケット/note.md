# Unixドメインソケット

ref: <https://ascii.jp/elem/000/001/415/1415088/>

## 基本概念

Unixドメインソケットは、同一コンピュータ内のプロセス間通信を実現する仕組みです[1]。以下の特徴があります：

- POSIX系OS（LinuxやmacOSなど）で利用可能
- コンピュータ内部での高速な通信が可能
- ファイルシステム上のパスを使って通信相手を特定

## 通信方式

**ストリーム型**と**データグラム型**の2種類の通信方式をサポートしています[1]：

- ストリーム型：TCPのような信頼性の高い双方向通信
- データグラム型：UDPのようなメッセージ単位の通信

## 仕組みと特徴

**ソケットファイル**

- 通信用の特殊なファイルとして作成される[1]
- ファイルパスを通信の識別子として使用
- パーミッションによるアクセス制御が可能

**高速性の理由**

- 外部ネットワークインターフェースを介さない
- カーネル内部で完結する通信を実現
- ウェブサーバとデータベース間などの通信で性能向上が期待できる[1]

## 実装例

**サーバ側の基本実装**

```go
listener, err := net.Listen("unix", "socketfile")
defer listener.Close()
conn, err := listener.Accept()
```

**クライアント側の基本実装**

```go
conn, err := net.Dial("unix", "socketfile")
```

## 注意点

- WindowsではUnixドメインソケットの代わりに「名前付きパイプ」を使用[1]
- サーバ側で`Close()`を呼ばないとソケットファイルが残り続ける
- Go言語では正しくクローズするとソケットファイルは自動的に削除される[1]

このように、Unixドメインソケットは同一マシン上のプロセス間通信において、高速で信頼性の高い通信手段を提供します。

Sources
[1]  <https://ascii.jp/elem/000/001/415/1415088/>
[2] Unixドメインソケット (1/2) <https://ascii.jp/elem/000/001/415/1415088/>
