# AI駆動開発で苦労した話 〜笑えないけど笑うしかない日々〜

ref: <https://zenn.dev/securenavi_tech/articles/4bce0b5b25441f>

## 概要

この記事は、SecureNaviの新規プロダクト開発においてAI駆動開発を全面的に取り入れた経験を共有しています。著者は、生成AIが生成したコードの割合が99.9％以上で、開発生産性が2倍以上向上したことを報告していますが、同時に多くの「笑えない出来事」も経験しました。主に「Claude 3.5 Sonnet」を活用した開発プロセスについて書かれています。

## 技術スタック

- バックエンド: Kotlin, Spring Boot, jOOQ, Ktlogger, Kotest, MockK
- フロントエンド: Next.js, Tailwind CSS, shadcn/ui, Vitest
- IDE: Cursor, Intellij, WebStorm
- E2E: Playwright
- データベース: MySQL
- マイグレーションツール: Flyway

## AI駆動開発の課題と対応策

### 1. AIの低姿勢な態度

AIは自分が悪くなくても常に「申し訳ございません」から会話を始めることが多い。

### 2. 短期記憶の限界

AIはすぐに自分の行ったことを忘れてしまうため、指示した作業が無限ループに陥ることがよくある。対策として、循環を指摘し、問題点と試したアプローチを明確にするよう促すことが効果的。

### 3. 自作自演のバグ報告

AIは自分が書いたコードの問題を「発見」したかのように報告してくる。対策として、具体的なコマンド実行手順を明確に指示すると良い。

### 4. UIの理解が難しい

AIには「目が見えない」ため、画面のUIの問題を説明するのが難しい。スクリーンショットを提示し、コンポーネントに境界線や背景色を付けて視覚的に説明すると効果的。

### 5. 自信過剰な誤り

AIは自信満々に間違えることがある（特に文字数のカウントなど）。システムコマンドで確認させることで正しい結果を認識させることができる。

### 6. 時間感覚のズレ

AIの知識は過去のデータに基づいているため、現在の日付や時間を正確に把握していない。dateコマンドで現在時刻を確認させることが必要。

### 7. 開発環境の前提を無視

AIはシステムの前提条件を無視して指示を出すことがある（例：Dockerで動いているDBに対してローカルインストールを指示するなど）。

### 8. 危険なコマンド実行

AIは環境を破壊しかねない危険なコマンドも躊躇なく実行することがある。ルール設定で防止できるが、コンテキストのバランスも考慮する必要がある。

### 9. 常駐コマンドの問題

AIは自分の判断で様々なコマンドを実行するが、常駐型コマンドが無限ループに陥ることもある。

## 効果的な利用方法

1. **コンテキストを適切な大きさに抑える**：必要なコードと設計書だけをコンテキストに含め、情報過多を避ける。

2. **ログの活用**：問題を切り分けるためにログを活用し、AIに状況を正確に認識させる。

3. **小刻みなバージョン管理**：小さな目標達成ごとにコミットし、AIが混乱した場合は変更を取り消して再度指示する。

4. **作業切り替え時は新しいチャットを開始**：作業内容が変わる場合は新しいComposerに切り替えて不要なコンテキストを消去する。

## 結論

著者は、AI駆動開発は小規模で単純なアプリケーションでは驚くほど効果的だが、拡張性や保守性を求める本格的な開発では「失敗の山」を築くことになると述べています。しかし、その困難を乗り越えられるだけの経験とタフさを持つエンジニアにとっては、現時点でもAI駆動開発は実践する価値があり、生産性を何倍にも引き上げる可能性があるとしています。著者はドメイン駆動設計とAI駆動開発の相性が良いという結論に至り、今後の開発アプローチに大きな示唆を得たと締めくくっています。
