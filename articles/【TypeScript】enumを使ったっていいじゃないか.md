---
title: "【TypeScript】enumを使ったっていいじゃないか"
source: "https://zenn.dev/rikson/articles/2025-08-13_rikson_let-me-use-enums-in-typescript"
author:
  - "Riku Takeuchi"
published: 2025-08-13
created: 2025-08-17
description: |
  TypeScriptで定数をどのように表現するかは意見が分かれるテーマです。本稿では、enumの特徴とその代替手段を整理し、何を採用すべきかを考察します。
tags:
  - "TypeScript"
  - "enum"
  - "tech"
---

本稿では、TypeScriptにおける`enum`（列挙型）の特徴、その代替手段、そして何を採用すべきかについて考察します。`enum`がなぜ推奨されないのか、そのメリット・デメリットを理解し、技術選択の一助とすることを目指します。

## 列挙型（enum）とは

`enum`はTypeScript独自の構文で、定数を集合としてまとめて扱うことができます。文字列だけでなく数値も利用でき、数値の場合は自動で連番が付与されたり、値から名前を逆引きしたりすることも可能です。

```ts
// 文字列enum
enum Mode {
  Auto = 'Auto',
  UDP = 'UDP',
  TCP = 'TCP',
}

// 数値enum
enum Mode {
  Auto, // 0
  UDP,  // 1
  TCP,  // 2
}
console.log(Mode[0]); // "Auto"
```

### 利用シーン

- **マジックナンバーの回避**: `connect(1)` のようなコードを `connect(Mode.UDP)` と書くことで、コードの可読性を向上させます。
- **タイポの防止**: 文字列リテラル `'Aut'` のようなタイポを防ぎます。
- **構造化**: 関連する定数を一つのグループとして扱えます。
- **公称型**: 文字列`enum`は公称型として扱われるため、`'Auto'`のような文字列リテラルを直接代入できず、より厳密な型チェックが可能です。

## enumへの批判

`enum`はその利便性の一方で、いくつかの批判も存在します。

1. **JavaScriptの構文からの逸脱**: TypeScriptはJavaScriptのスーパーセットですが、`enum`はJavaScriptに存在しない独自の構文です。
2. **Tree-Shakingが効かない**: `enum`は即時関数にコンパイルされるため、未使用のメンバーもバンドルに含まれてしまい、ファイルサイズが最適化されません。
3. **`const enum`の罠**:
    - Tree-Shakingの問題を解決するために導入された`const enum`は、Babelでコンパイルできなかったり、インクリメンタルビルド時に値の変更が反映されないという問題があります。
4. **Node.jsとの非互換性**: 最新のNode.jsでTypeScriptを直接実行する際、`enum`構文はサポートされていません（実験的なフラグを除く）。
5. **型の安全性**: 数値`enum`に任意の数値を代入できてしまう問題がありました（TypeScript 5.0で解決済み）。また、存在しない値で逆引きすると`undefined`が返ります。
6. **挙動の一貫性がない**: 数値`enum`は非公称型、文字列`enum`は公称型と、挙動に一貫性がありません。

## 代替手段とトレードオフ

`enum`の代わりに以下の方法が考えられます。

### ユニオン型

定数を`const`で定義し、その`typeof`からユニオン型を作成します。

- **メリット**: シンプル。
- **デメリット**: 公称型ではないため、文字列リテラルを直接代入できてしまいます。また、関連する定数をまとめる工夫が必要です。

```ts
const MODE_AUTO = 'Auto'
const MODE_UDP = 'UDP'
type Mode = typeof MODE_AUTO | typeof MODE_UDP;
```

### オブジェクトリテラル

`as const`を付けたオブジェクトリテラルから型を生成します。

- **メリット**: `enum`のように値をひとまとまりに扱えます。
- **デメリット**: 型定義がやや冗長になり、こちらも公称型ではありません。

```ts
const Mode = {
  Auto: 'Auto',
  UDP: 'UDP',
} as const;
type Mode = (typeof Mode)[keyof typeof Mode];
```

## 結論

`enum`には確かにいくつかの問題点が存在しますが、逆マッピングを使わない、BabelやNode.jsでの直接実行をしないなど、特定の条件下では問題とならないケースも多いです。特に文字列`enum`がもたらす公称型の安全性は、コーディングスタイルを統一する上でメリットとなります。

最終的にはどの方法も一長一短であり、絶対的な正解はありません。プロジェクトの規模やチームの規約、個人の好みに応じて最適なものを選択することが重要です。共同開発では、チーム内での合意形成が最も大切と言えるでしょう。
