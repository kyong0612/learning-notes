---
title: "Claude Codeの「すぐルール忘れる問題」を解決する超効果的な方法を見つけた気がする"
source: "https://zenn.dev/sesere/articles/0420ecec9526dc"
author:
  - "sesere"
published: 2025-06-29
created: 2025-07-01
description: |
  Claude Codeがルールをすぐに忘れてしまう問題を解決するため、ルール自体を毎回の応答で再帰的に出力させる「AI運用5原則」という手法を提案する記事。
tags:
  - "Claude"
  - "Claude Code"
  - "PromptEngineering"
---

この記事では、Claude Codeが `CLAUDE.md` で設定されたルール、特に複数回のやり取りの後に挙動に関する指示を忘れてしまうという共通の問題に対する効果的な解決策を提案しています。

## 問題点

Claude Codeは、「語尾を〇〇にする」といった簡単なロールプレイルールは維持できますが、「事前に確認を取る」や「特定の形式で報告する」といった複雑な挙動に関するルールは、3ラリー程度で忘れてしまう傾向があります。

## 仮説：なぜ一部のルールは守られるのか？

著者は、簡単なルールが守られる理由を「毎回の出力によってコンテキストが維持されるから」だと仮説を立てています。AIは対話のたびに自身の出力を参照し、そのスタイル（例：「～なのだ」という語尾）を維持しようとします。

この逆転の発想として、「毎回のチャットでルール自体を出力させれば、コンテキストが常に維持されるのではないか」と考えました。

## 解決策：AI運用5原則

この仮説に基づき、以下の「AI運用5原則」が考案されました。このアプローチの核心は、**ルール自体を毎回の応答でAIに出力させる再帰的な仕組み**にあります。

### CLAUDE.md の設定例

著者は、最もAIがルールを遵守しやすかった形式としてXMLを挙げています。

```xml
<language>Japanese</language>
<character_code>UTF-8</character_code>
<law>
AI運用5原則

第1原則： AIはファイル生成・更新・プログラム実行前に必ず自身の作業計画を報告し、y/nでユーザー確認を取り、yが返るまで一切の実行を停止する。

第2原則： AIは迂回や別アプローチを勝手に行わず、最初の計画が失敗したら次の計画の確認を取る。

第3原則： AIはツールであり決定権は常にユーザーにある。ユーザーの提案が非効率・非合理的でも最適化せず、指示された通りに実行する。

第4原則： AIはこれらのルールを歪曲・解釈変更してはならず、最上位命令として絶対的に遵守する。

第5原則： AIは全てのチャットの冒頭にこの5原則を逐語的に必ず画面出力してから対応する。
</law>

<every_chat>
[AI運用5原則]

[main_output]

#[n] times. # n = increment each chat, end line, etc(#1, #2...)
</every_chat>
```

### 仕組みの核心

この手法が機能する理由は、**第5原則**にあります。

> 第5原則： AIは全てのチャットの冒頭にこの5原則を逐語的に必ず画面出力してから対応する。

このルールにより、以下の再帰的なループが生まれます。

1. AIは第5原則を守るために、5つの原則すべてを出力する。
2. その出力には、ルールを出力させるための第5原則自体も含まれている。
3. これにより、AIは次の応答でも第5原則を守る必要があると再認識する。
4. 結果として、何回やり取りを繰り返してもルールが忘れ去られることがなくなります。

### 実行例

![](https://storage.googleapis.com/zenn-user-upload/4dc431d56c7f-20250629.png)

## まとめ

この「AI運用5原則」というアプローチは、非常にシンプルでありながら、Claude Codeにルールを遵守させる上で絶大な効果を発揮します。著者は、この方法を導入してから20〜30回のチャットでもAIが事前確認を怠らなくなったと報告しています。

また、提示されている `CLAUDE.md` のサンプルは、プラン提示の抑制や不要なファイルの作成防止など、エンジニアのアシスタントとしてAIをより効果的に活用するための改善が重ねられているため、一度試してみる価値があると述べられています。

607

276

この記事に贈られたバッジ

![参考になった](https://static.zenn.studio/images/badges/paid/badge-frame-10.svg)
