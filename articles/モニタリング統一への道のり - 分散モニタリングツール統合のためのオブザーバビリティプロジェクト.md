---
title: "モニタリング統一への道のり - 分散モニタリングツール統合のためのオブザーバビリティプロジェクト"
source: "https://speakerdeck.com/niftycorp/sre-next-2025"
author:
  - "仲上 浩豪"
  - "ニフティ株式会社"
published: 2025-07-11
created: 2025-08-12
description: "ニフティが抱えていた分散モニタリングツールの統合プロジェクトについて。ランニングコスト削減、ノウハウ共有、監視実装統一を目的とし、Azure Monitorを採用した事例を紹介。"
tags:
  - "SRE"
  - "モニタリング"
  - "Azure Monitor"
  - "オブザーバビリティ"
  - "DevOps"
---

## 概要

SRE NEXT 2025での発表資料。ニフティ株式会社の仲上浩豪氏による、分散したモニタリングツールの統合プロジェクトに関する講演内容。

## 発表者情報

### 仲上 浩豪（ナカガミ ヒロトシ）

- ニフティ株式会社
- 2021年4月新卒入社（発表時点で5年目）
- 担当業務：マイページ・カスタマーサポート向けシステム
- SREギルド参加、インナーソース活動

## ニフティ概要

- 1987年からパソコン通信サービス開始
- 現在はノジマグループ傘下
- エンジニア組織：約150名
- 提供サービス：インターネット回線、格安スマホ、Webサービス、メディア・コンテンツなど

## プロジェクトの背景と課題

### 担当システム

- お客様向けマイページ
- カスタマーサポート向けシステム  
- ナビゲーションシステム
- 電話系システム
- 顧客情報表示システム

### 課題

1. **ランニングコストの増加**
   - 複数のモニタリングツールによるコスト増

2. **ノウハウ共有の難化**
   - ツールが分散していることで知見が属人化

3. **監視実装の不統一性**
   - システムごとに異なる監視方法

## 解決アプローチ

### 監視ツールの要件整理

1. **ログ・トレース・メトリクスの監視ができること**
2. **共通の監視設定（メトリクスやシステムログ）を一元管理できること**
3. **監視費用（ランニングコスト・運用コスト）を削減できること**

### ツール比較結果

| ツール | ログ・トレース・メトリクス | 監視設定の管理 | コスト |
|--------|---------------------------|----------------|--------|
| Grafana + Prometheus | △ | △ | △ |
| Datadog | ◎ | ○ | △ |
| Amazon CloudWatch | ◎ | ○ | ◎ |
| Azure Monitor | ◎ | ◎ | ◎ |

## Azure Monitor採用の理由

### 主要な利点

1. **DCR（データ収集ルール）による監視ルールの一元管理**
   - エージェントからAzure Monitorに送るデータのルールを設定・管理可能
   - ETL（抽出・変換・読み込み）プロセスの改善

2. **Terraformエクスポート機能による開発効率向上**
   - 選択したリソースをもとにテンプレート作成
   - ARM テンプレート、Bicep、Terraformの3種類から選択可能

3. **Agentの管理がAzure側で可能**
   - Azure Policyやその他ツールでエージェントのインストール・管理
   - VMやAzure Arc配下のオンプレミスサーバーも対応

## 今後の展望

1. **ダッシュボード作成**
   - 統一されたビューでの監視状況確認

2. **システム固有のアラート設定**
   - 各システムの特性に応じたアラート設定

3. **監視知見共有**
   - チーム内での監視ノウハウの共有促進

## まとめ

ニフティでは分散していたモニタリングツールをAzure Monitorに統合することで、コスト削減と運用効率化を実現。DCRによる一元管理、Terraformエクスポート機能、エージェント管理の自動化により、スケーラブルなモニタリング基盤を構築した事例。

今後は統一基盤を活用したダッシュボード作成、システム個別のアラート設定、監視知見の共有を進める予定。
