---
title: "Claude Code Agent Teams をどう使うか？ サブエージェントの課題から考える"
source: "https://zenn.dev/storehero/articles/f21d49387577bb"
author:
  - "[[永田 (StoreHero CPO)]]"
  - "[[Zenn]]"
published: 2026-02-06
created: 2026-02-16
description: "Claude Code v2.1.32で導入されたAgent Teams機能について、従来のサブエージェントとの違いや課題を整理し、上流工程のブレインストーミングやAPI設計の協調など具体的な活用シーンを考察する記事。"
tags:
  - "clippings"
  - "Claude Code"
  - "Agent Teams"
  - "マルチエージェント"
  - "AI"
  - "LLM"
---

## 概要

2026年2月5日リリースの Claude Code v2.1.32 の目玉機能「Agent Teams」について、StoreHero CPOの永田氏が、従来のサブエージェントの課題と照らし合わせながら使い道を考察した記事。Agent Teams はまだ Research Preview だが、複数の Claude Code インスタンスがチームとして協調動作する新しい仕組みであり、サブエージェントとは設計思想が根本的に異なる。

---

## Agent Teams の概要

### 機能の説明

- 複数の Claude Code インスタンスを**チーム**として動かす機能
- 1つのセッションが「**チームリード**」、他のインスタンスが「**チームメイト**」として参加
- 従来のサブエージェントとの大きな違いは2つ:
  1. **チームメイト同士がリードを経由せず直接メッセージをやり取りできる**
  2. **ユーザー自身がチームメイトに直接指示を出せる**
- 調整には**共有タスクリスト**が使われ、タスクの依存関係や状態管理も組み込まれている

### 利用条件

- **Research Preview** として提供（今後破壊的な変更の可能性あり）
- Claude Code **v2.1.32 以上**が必要
- `settings.json` で環境変数を有効化:

```json
{
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  }
}
```

- **コスト注意**: 各チームメイトが独立した Claude インスタンスとして動くため、トークン消費量はチームメイトの数に比例して増加

---

## サブエージェントとの比較

| 項目 | サブエージェント | Agent Teams |
| --- | --- | --- |
| **コンテキスト** | 独自のコンテキストウィンドウ。結果はメインに返る | 独自のコンテキストウィンドウ。完全に独立 |
| **コミュニケーション** | メインエージェントにのみ結果を返す | チームメイト同士で直接メッセージング |
| **調整方式** | メインエージェントが全作業を管理 | 共有タスクリストで自律的に調整 |
| **向いている場面** | 結果だけが重要な集中タスク | 議論・協調が必要な複雑な作業 |
| **トークンコスト** | 低め（結果がメインに要約される） | 高め（各チームメイトが独立したインスタンス） |

> 端的に言えば、サブエージェントは「**結果だけ返す作業者**」で、Agent Teams は「**議論しながら協調する独立したメンバー**」

---

## サブエージェントの3つの課題

1. **不透明さ**: サブエージェントは途中経過が見えず、正しく進んでいるか不安を抱えたまま完了を待つしかなかった
   - Agent Teams では **Shift+Up/Down** でチームメイトの作業を直接確認可能
2. **割り込み不可**: 作業中に方針変更を伝える手段がなかった
   - Agent Teams ならチームメイトに**直接メッセージ**を送れる
3. **用途の限界**: コンテキストの重い処理のオフロードには向いているが、複数の役割が連携する**オーケストレーション**には不向き
   - Agent Teams はまさにそのオーケストレーションのための仕組み

---

## Agent Teams の具体的な活用シーン

### 1. 上流工程でのブレインストーミング

- PM・アーキテクト・Devil's Advocate・ユーザー代弁者・セキュリティレビュワーなど複数の役割で議論
- 議論の結果を Design Doc や技術仕様書としてまとめる
- **利点**: アウトプットがテキスト中心のためファイル競合リスクが低い

### 2. API 設計のフロント/バック協調

- バックエンドとフロントエンドの2つの視点から Swagger/OpenAPI を設計
- チームメイト同士のメッセージングで設計の齟齬を解消し、合意後にそのまま並行実装に移行
- 従来はメインエージェントが挟まり迂遠だったが、**直接対話**で解消

### 3. 記事執筆ワークフロー

- リサーチャー・ライター・ファクトチェッカーに著者（ユーザー）が直接指示
- 「ここのトーンを変えて」「この情報を追加調査して」などのフィードバックが即座に届く
- 従来の「私 → メイン → サブエージェント」の迂回経路が不要に

### 4. ナレッジベースの並行整備

- 1つのセッション内で複数ドメインを並行整備
- リードが全社共通のトーン・ルールの統一を保ちつつ、各チームメイトが担当領域を進行
- 品質基準をリードが握る構成

---

## Claude Code の進化と OSS エコシステムへの影響

- Claude Code の進化速度が非常に速く、便利な OSS ツールの採用をためらわせる要因になっている
- 例: **[multi-agent-shogun](https://zenn.dev/shio_shoppaize/articles/5fee11d03a11a1)** - 将軍・家老・足軽の三層構造で tmux とファイルベース通信により複数の Claude Code を制御するマルチエージェント管理ツール
- Agent Teams が公式にリリースされたことで、そのコア機能がカバーされつつある
- **公式機能の高速な進化が OSS の陳腐化を早めるというジレンマ**は、Claude Code エコシステム全体に共通する課題

---

## 重要な結論・制約事項

- Agent Teams はまだ **Research Preview** であり、実戦投入は慎重に
- **トークン消費量の大幅増加**やセッション再開不可などの制約を把握した上で使う必要がある
- **テキストベースの議論が必要な場面**（上流工程・設計協調）に最も適している
- サブエージェントとの最大の違いは、**チームメイト同士の直接メッセージング**と**共有タスクリストによる自律的な調整**

---

## 参考資料

- [multi-agent-shogun 紹介記事](https://zenn.dev/shio_shoppaize/articles/5fee11d03a11a1)
- [Anthropic Releases Opus 4.6 with Agent Teams - TechCrunch](https://techcrunch.com/2026/02/05/anthropic-releases-opus-4-6-with-new-agent-teams/)
- [Claude Code CHANGELOG (v2.1.32)](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Claude Code Agent Teams ドキュメント](https://code.claude.com/docs/en/agent-teams)
