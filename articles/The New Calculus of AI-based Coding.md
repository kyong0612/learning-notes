---
title: "The New Calculus of AI-based Coding"
source: "https://blog.joemag.dev/2025/10/the-new-calculus-of-ai-based-coding.html"
author: "Joe Magerramov"
published: 2025-10-19
created: 2025-10-30
description: "Amazon Bedrock エンジニアリングチームがAIエージェントを活用した「エージェンティック・コーディング」により、従来の10倍のコード生産性を達成。しかし、この高速開発を持続可能にするためには、テスト戦略、CI/CDパイプライン、チーム間コミュニケーションなど、ソフトウェア開発ライフサイクル全体の根本的な再設計が必要であることを論じた実践レポート。"
tags:
  - "AI"
  - "agentic-coding"
  - "software-development"
  - "productivity"
  - "testing"
  - "CICD"
  - "engineering-practices"
  - "Amazon-Bedrock"
---
## 概要

Amazon BedrockのエンジニアリングチームにおけるAIエージェント活用の実践報告。著者のチームは、Amazon QやKiroなどのAIエージェントを活用し、「エージェンティック・コーディング」と呼ぶアプローチで**従来の高速開発チームの10倍のコード生産性**を達成した。ただし、これは「vibe coding」（AIに任せきりの開発）ではなく、人間とAIエージェントが協働する厳格なプロセスである。

## エージェンティック・コーディングとは

### 定義と原則

- **すべてのコミットにエンジニアの名前が付与**され、そのエンジニアがコードレビューと責任を負う
- Rustの型システムとコンパイラを活用し、コンパイル時に多くの問題を検出
- 「ステアリングルール」を使用してAIエージェントの動作に制約を設定
- 著者の場合、コミットするコードの**約80%がAIエージェントによって生成**される

### ワークフロー

1. タスクを明確になるまで分解（AIを使って探索することも）
2. AIエージェントにプロンプトを与える
3. 出力をレビューし、満足できるまで反復
4. 必要に応じて自分で変更セットを引き継ぎ完成させる
5. **すべてのコード行に注意を払い、完全に満足するまで受け入れない**

### 測定された成果

チームは**実測値として10倍のスループット**を達成。これは誇張ではなく、メトリクスを収集・分析した結果。

![コード生産性のスクリーンショット](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg0Ko_HfgsgHZCIIbQddBTTVrGcFC2QEu7h8UJDmFaGqhFQ_qJzIQivqwT5RwSHKehkNkRwqpCbgPcPJFYDhoasKRlgO7ulFZfqFM9mXIjdqHyYjc7Z4A9NsA6rE735nuWbVpi192DzFcJqK92sHVHptZHh36-KxbO8yPUSA2E9KA9sjR-DgaRzypvZqQ0/s1384/Screenshot%202025-10-22%20at%206.38.56%E2%80%AFPM.png)

## 時速200マイルでの運転：高速開発の課題

### 問題の本質

- 通常のチームでも、バグは時々本番環境に到達する
- AIアシストのコードも同様にバグを含む可能性があり、**確率は大きく変わらない**
- しかし、**コミット頻度が10倍になると、全体の数学が変わる**
  - 年に1〜2回の本番影響バグ → 週次の発生へ
  - 統合・テスト環境で捕捉されるバグも増加し、調査時間が増える

### 重要な洞察

**エージェンティック開発でエンジニアリング速度を1桁上げるには、問題のあるコミットの確率も1桁下げる必要がある。**さらに、高速度では個々のコミット同士が予期しない方法で相互作用する可能性もある。

> 「時速200マイルで運転するには、車をトラック上に保つための大きなダウンフォースが必要だ！」

## コストと便益のリバランス：テスト戦略の変革

### 従来の課題

著者は航空機製造業のテストアプローチ（シミュレーション、コンポーネントテスト、風洞試験、破壊試験、テストフライト）に触発され、「風洞スタイル」のテストを推奨してきた。

- **高忠実度の「フェイク」外部依存関係**を実装し、ローカルで実行可能にする
- ビルド時テストでシステム全体のエンドツーエンド動作を検証
- コンポーネント間の接合部における微妙なバグを捕捉

### 従来の障壁

- 中程度の複雑性を持つサービスでは、すべての外部依存関係のフェイクを作成するのは困難
- 実際の依存関係の進化に追従する必要がある
- **コストが高すぎて、ほとんどのチームは実装しない**

### エージェンティック・コーディングによる変化

**AIエージェントは大量のコードを生成することが得意**（特に望ましい動作が明確で曖昧さが少ない場合）。

- 原理的には健全だが実装・保守にコストがかかりすぎたアイデアが、**コストが1桁減少**
- 著者のプロジェクトでは、AIエージェントの助けを借りて以下を実装：
  - 認証、ストレージ、チェーンレプリケーション、推論エンジンなどの外部依存関係のフェイク実装
  - これらのフェイクを使用して、開発者マシン上で全分散システム（すべてのマイクロサービスを含む）をスピンアップするテストハーネス
  - ビルド時テストで、完全に組み立てられたスタックに対してカナリアを実行

**比較的複雑なシステムに対して、わずか数日で実装完了。**数年前なら「良いが高すぎる」と抵抗を受けたであろうアイデアが実現可能になった。

## より厳密なフィードバックループの必要性：CI/CDの課題

### 従来のCI/CDパイプライン

- ビルド、パッケージ化、テストに数時間
- プレプロダクションから本番ステージへのロールアウトに数日
- これでも「健全なチーム」と見なされる

### エージェンティック・コーディングでの問題

- 1セットのコミットをビルド・パッケージ・テストする間に、**さらに12個のコミットが待機**
- デプロイ準備が整う頃には、**100以上のコミット**を含む可能性
- 1つのコミットに問題があれば、デプロイメント全体をロールバックし、パイプラインが停止
- その間にさらに変更が蓄積し、カオスとリスクが増大

### Formula 1の比喩

![F1イエローフラッグの画像](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEialqJTyuSXSP58m74n8bie8-iftCmFaWxsx7M0bSKZKJTsRVF3t3pW7WDxM92gcD_WWnhmT3FBZhoYf6IuRN4O1VqB8MuZQ37jNbv3BTqLZtfevScYYKuUt1_-3X-RMaYHD6TbjPxTiEHPPyo0NwAgUdOENAvkA7NcEjIB-zsbPQHwrRwGcIBTrwjOy7c/s497/image-32%20copy.jpg)

- 事故が発生すると、イエローフラッグが掲げられ、すべての車がペースカーの後ろで減速
- レース主催者は、あらゆるタイプの事故に備え、**数分でトラックをクリアして再開できるよう準備**

### 必要な変革

**1時間あたり数十のコミット速度で動くチームには、問題を数分（数時間や数日ではなく）で特定・分離・リバートする必要がある。**

- ビルドとテストインフラストラクチャを**今日より1桁速く**する必要
- オンラインゲームと同様、プレイヤーの入力とゲームの反応の間に高いラグがあればプレイ不可能
- すべてのコミットに長い遅延が必要なら、10倍速く動くことは困難

## コミュニケーションのボトルネック

### 高速化がもたらす意思決定の増加

![繁盛しているレストランのキッチン](https://images.stockcake.com/public/b/c/c/bcc7e845-cba8-4ff1-885f-143ed5fd568f_large/busy-restaurant-kitchen-stockcake.jpg)

- スループットが1桁増加すると、**コードを書くだけでなく、より多くの意思決定**を行う
  - キャッシング戦略の選択
  - エッジケースの処理方法
  - 適切な抽象化
- 通常の速度：週に1〜2件の意思決定
- 10倍速度：**1日に複数の意思決定**

### 相互依存性の課題

- エンジニアAが認証フローをリファクタリング → エンジニアBが拡張しようとしているAPIに影響
- これらは単なる実装の詳細ではなく、**コードベース全体に波及するアーキテクチャ上の選択**

### 従来の調整メカニズムの限界

- Slackの応答待ちや後でのクイックミーティングのスケジューリング = レイテンシーが高すぎる
  - 意思決定がボトルネックになる
  - または、競合に気づく前に間違った方向に進むリスク
- **高スループットでは、調整のコストが支配的になる可能性**

### 著者のチームのアプローチ

**同じフロアに座る**ことが速度にとって重要だった：

- 他者に影響を与える可能性のある意思決定が必要な場合、歩いて行ってホワイトボードの前で数分で解決
- アプローチを調整し、トレードオフをリアルタイムで議論し、両エンジニアが仕事に戻る
- 意思決定が迅速・正確に行われ、ブロックされた作業の山が発生しない

**制限事項：**分散チームにはこのアプローチは解決策にならない（未解決の課題）。

## 今後の道筋

### 機会と可能性

- エージェンティック開発は、ソフトウェア開発の効率を改善するだけでなく、**以前はニッチすぎたり高価すぎたりした問題に取り組むことを可能にする**
- チームの10倍スループット増加は理論的なものではなく、**測定可能な現実**

### 重要な警告

**これらの利益は、既存の開発プラクティスにAIエージェントを単に追加するだけでは実現しない。**

> 「狭いタイヤと古いブレーキを持つ車にターボチャージャーを追加するようなもの。結果はより速いラップタイムではなく、クラッシュになる。」

10倍のコード速度では：

- 現在のテストアプローチ
- デプロイメント手法
- チーム調整方法

これらすべてが**制限要因**になる。ボトルネックが移動するだけ。

### ソフトウェア開発の根本的再考の必要性

- **1日10コミット用に設計されたCI/CDパイプライン**は、100コミットでは崩壊
- **通常速度で「十分」だったテスト戦略**は、高速度では多すぎるバグを通過させる
- **以前は機能していたコミュニケーションパターン**は、ブロックされた作業の絶え間ない山を作る

### 好機：コストの劇的な削減

既に包括的なテスト、迅速なデプロイメント、効率的な調整のための優れたアイデアは存在する。しかし、**実装・保守コストが高すぎて広く採用されていなかった。**

**変化したこと：**

- エージェンティック開発自体がこれらのコストを劇的に削減できる
- コードスループットを増加させているのと同じAIエージェントが、**そのスループットを維持するために必要なインフラストラクチャの構築を支援**できる

### 成功の鍵

**エージェンティック開発で成功するチームは、ソフトウェア開発ライフサイクル全体を協調して進化させる必要があることを認識するチームである。**

単により多くのコードをより速く書くだけでなく、**AIを使用して以前は実用的でなかったエンジニアリングプラクティスを実用的にする**ことが真の機会である。
