---
title: "Why Cline Doesn't Index Your Codebase (And Why That's a Good Thing) - Cline Blog"
source: "https://cline.bot/blog/why-cline-doesnt-index-your-codebase-and-why-thats-a-good-thing"
author:
  - "Nick Baumann"
published: 2025-05-27
created: 2025-06-02
description: |
  Clineが大規模なコードベースをRAGでインデックス化しない理由とその設計哲学について解説。従来のRAGアプローチの問題点（コードの分割によるロジックの断片化、インデックスの陳腐化、セキュリティリスクの増大）を指摘し、開発者のような探索的アプローチによる優位性を説明する。
tags:
  - "AI"
  - "コーディング"
  - "RAG"
  - "Cline"
  - "ソフトウェア開発"
  - "コードベース"
  - "セキュリティ"
---
# Why Cline Doesn't Index Your Codebase (And Why That's a Good Thing)

*投稿者: Nick Baumann | 2025年5月27日 | 5分で読める*

## 概要

Clineの見込みユーザーからよく聞かれる質問：「Clineは大規模なコードベースをどう扱うのか？RAGを使ってすべてをインデックス化するのか？」

この疑問は合理的だ。検索拡張生成（RAG）は、AIシステムに大規模な知識ベースへのアクセスを提供する一般的なソリューションとなっている。しかしClineでは、意図的に異なるアプローチを採用している。コードベースをインデックス化しないという選択は見落としではなく、より良いコード品質、強固なセキュリティ、より信頼性の高い結果を提供する基本的な設計決定である。

## RAGがコードで機能しない理由

RAGは実際の問題への巧妙な解決策として登場した：初期の言語モデルは限られたコンテキストウィンドウしか持たなかったため、より大きなデータセットから関連情報を供給する方法が必要だった。アプローチは単純に見える：データをチャンク化し、埋め込みを作成し、ベクトルデータベースに保存し、必要に応じて関連部分を取得する。

![RAGの概念図](https://cline.ghost.io/content/images/2025/05/image-26.png)

しかし、コードは他のデータとは異なる。相互接続されており、常に進化し、多くの場合最も機密性の高い知的財産を含んでいる。従来のRAGアプローチをコードベースに適用すると、3つの重要な問題が浮上する：

### 1. コードはチャンクで考えない

RAGは大まかに2つの部分に分けられる：知識ベース（この場合はコードベース）のインデックス化と検索だ。しかし問題は：埋め込みのためにコードをチャンク化すると、文字通りそのロジックを引き裂いてしまうことだ。

ランダムな10秒のクリップを聞いて交響曲を理解しようとすることを想像してみてほしい。それがRAGがコードベースに対して行うことだ。関数呼び出しがチャンク47にあり、その定義がチャンク892にあり、なぜそれが存在するかを説明する重要なコンテキストは？12個の他のフラグメントに散らばっている。

洗練されたアプローチでもこれに苦労する。自然言語テキストでは、段落（と文）がチャンク化に明確な境界点を提供する。しかし、素朴なチャンク化手法では、コードの意味のあるセグメントを正確に区切ることに苦労する。

### 2. コードが進化する間にインデックスが陳腐化する

ソフトウェア開発は速く動く。関数がリファクタリングされ、依存関係が更新され、モジュール全体が書き直される。インデックスは定義上、時間に凍結されたスナップショットである。コードは必然的に同期から外れる。

常に変化する本番コードベースでRAGを使用する場合、インデックス化は一回限りや定期的な作業ではない。継続的に新鮮なインデックスを維持するための堅牢なパイプラインが必要だ。すべてのマージは、現実とAIの理解との間の潜在的な分岐である。結果：アシスタントがもはや存在しない関数の呼び出しを自信を持って提案したり、チームが先週導入した重要な抽象化を見逃したりする。

### 3. セキュリティが負債になる

コードベースは単なるテキストではない：競争優位性だ。ベクトル埋め込みを作成すると、どこかに保存する必要がある最も価値のあるIPの二次表現を作成することになる。クラウドプロバイダー？自己ホスト？いずれにしても、セキュリティ面を倍増させたことになる。

確かに、企業はSOC2 Type II認定、強制プライバシーモード、ゼロデータ保持システムを構築できる。しかし、なぜそもそも脆弱性を作り出すのか？

## Clineのアプローチ：開発者のように考え、開発者のように行動する

コードベースをインデックス化するデータセットとして扱う代わりに、Clineはシニアエンジニアが行うようにアプローチする：好奇心、体系的探索、適切なツールで。

### スニペットではなく構造から始める

Clineをコードベースに向けると、すぐにすべてのファイルを読もうとはしない。代わりに、アーキテクチャを理解することから始める。抽象構文木（AST）を使用して、Clineはコードの高レベルマップ（クラス、関数、メソッド、それらの関係）を抽出する。これは完全な実装詳細を必要とせずに構造的理解を提供する`list_code_definition_names`ツールを通じて行われる。

これは経験豊富な開発者が新しいコードベースで自分自身を方向づける方法を反映している。彼らはランダムな関数を読むことから始めない；まず地形を理解する。

### 検索ではなく発見

Clineをコードベースに向けると、あなたが行うようにコードを読む：ファイルごと、接続ごとに。

Reactコンポーネントで作業している。Clineはそれを読み、インポートを見つけ、それを追う。そのファイルが別のファイルをインポートするので、Clineはそれも追う。各ファイルは前のファイルの上に構築され、コードが実際にどのように動作するかの接続された理解を作り出す。

インデックスや埋め込みはない。コードの自然な構造に従って、インテリジェントな探索によってコンテキストを構築するだけだ。

[動画：Clineがリポジトリを読む様子](https://cline.ghost.io/content/media/2025/05/reading-cline-repo.mp4)

### 大きなウィンドウの時代におけるコンテキスト品質

Claude 4やGemini 2.5 Proのような現代の言語モデルは、数年前には不可能に思えたコンテキストウィンドウを提供する。制約はもはやどれだけの情報を提供できるかではなく、その情報が関連性があり、正確で、よく整理されていることを確保することだ。

Clineの探索アプローチは自然に高品質なコンテキストを生成する。コードの論理構造（人間の開発者が取るのと同じパス）に従うことで、手元のタスクに本質的に関連し意味のある情報を収集する。

### これが実際に意味すること

具体例：支払い処理関数にエラーハンドリングを追加するようClineに依頼する。

**RAGベースのアプローチ:**

1. ベクトル空間で「payment」と「error」を検索
2. これらの用語を含むチャンクを取得
3. チームが構築したカスタムエラーハンドリングフレームワークを見逃す可能性
4. パターンに合わない汎用的なtry-catchブロックを提案

**Clineのアプローチ:**

1. 支払い処理関数を特定
2. そのインポートを追跡してエラーハンドリングユーティリティを見つける
3. 類似の関数を検査してパターンを理解
4. 呼び出し関数をチェックしてエラー契約を理解
5. アーキテクチャに完璧に適合するエラーハンドリングを提案

違いは？すべてのファイルの要約レベルの理解ではなく、コードベースの接続された理解。

[動画：エージェント的探索](https://cline.ghost.io/content/media/2025/05/agentic-exploration.mp4)

## パフォーマンスの疑問

「しかし、実際のファイルを検索するのは遅くないのか？」

単純なキーワードマッチの場合？たぶん。しかしClineは単純なキーワードマッチを行っていない。言語モデルがコードを真に理解できるほど強力な場合、ボトルネックは検索速度ではなく、コンテキスト品質だ。

それに、コードは既にマシン上にある。Clineが直接読めるのに、なぜベクトルデータベースにコピーするのか？

確かに、RAGはトークンを節約できる。月額20ドルの製品を構築している場合、その節約は重要だ。しかし私たちは、類似に見えるスニペットを検索するだけのAIではなく、コードを真に理解するAIを望む開発者のためにClineを構築した。

## なぜ今なのか

言語モデルは開発者が行うようにコードと作業できるほど強力になった。問題はAIがソフトウェア開発を変革するかどうかではない：昨日の制限のために設計されたアプローチでその変革を制約するかどうかだ。

私たちは、検索するだけでなく考えることができるAIに未来があると賭けている。あなたが行うのと同じように自然にコードと作業できるAI。

RAGなし。埋め込みなし。ベクトルデータベースなし。コードに直接適用されるインテリジェンスだけ。

*-Nick*

## 主要なポイント

1. **RAGの問題点**: コードを分割すると論理が断片化し、常に変化するコードベースでインデックスが陳腐化し、セキュリティリスクが増大
2. **Clineの革新的アプローチ**: 開発者のような体系的探索により、構造的理解から始めて自然な依存関係を追跡
3. **コンテキスト品質**: 大きなコンテキストウィンドウを活用し、関連性の高い情報を効率的に収集
4. **実用的な利点**: より正確でアーキテクチャに適合した提案、セキュリティリスクの削減、リアルタイムの理解

---

*差を体験する準備はできましたか？自分のプロジェクトで[Cline](https://github.com/cline/cline)を試して、エージェント的探索がAI支援開発で何が可能かを変える様子を見てください。[Discord](https://discord.gg/cline)や[Reddit](https://www.reddit.com/r/cline/)のコミュニティに参加して、体験を共有し、AIコーディングツールの未来を形作るのを手伝ってください。*
