---
title: "Next.js × Hono × モノレポで実践する「リアルオプション戦略」：初期の開発速度と将来の柔軟性を両立させるWebシステム設計"
source: "https://zenn.dev/assign/articles/083dfb24afd335"
author:
  - "須永 高弘"
published: 2025-10-01
created: 2025-10-04
description: |
  ASSIGNの新卒就活支援システム開発におけるリアルオプション戦略の考え方と、Next.js・Hono・モノレポ構成を核にした技術選定・運用体制を整理したレポート。
tags:
  - "Next.js"
  - "Hono"
  - "monorepo"
  - "Prisma"
  - "リアルオプション"
---

![ASSIGNロゴ](https://storage.googleapis.com/zenn-user-upload/avatar/18bc30e08b.jpeg)
![須永高弘アイコン](https://lh3.googleusercontent.com/a/ACg8ocIA00h1QpiGYsJB0z2q5-_xFbA-mCziEXIcVA3b3JomD89soyo=s96-c)
![Next.jsトピック](https://storage.googleapis.com/zenn-user-upload/topics/d87ff27d89.png)
![Prismaトピック](https://storage.googleapis.com/zenn-user-upload/topics/d07488226b.jpeg)
![monorepoトピック](https://zenn.dev/images/topic.png)
![Honoトピック](https://storage.googleapis.com/zenn-user-upload/topics/0eec7d7c6c.png)
![zennfes2025freeトピック](https://zenn.dev/images/topic.png)

## はじめに

ASSIGN CTO須永氏が、新卒就活支援事業向け業務システム構築で採用したリアルオプション戦略の思想と技術選定を報告。2025年6月開始・10月テストリリース・2026年1月正式リリースを目指す少人数体制（メイン1名＋サポート2名）で、変化し続ける業務プロセスや今後のシステム連携を見据えた意思決定を解説する。

## プロジェクトにおける不確実性

- **スケジュール/リソース制約**: 短期リリースと検証サイクルを前提とした限られた人員配置。
- **業務プロセスの流動性**: 年度進行や新施策検証を通じて仕様が継続的に変化するため、学びの蓄積と翌年度への反映が不可欠。
- **将来のシステム連携**: 新卒向けアプリや既存システム、統合顧客基盤とのデータ連携を見据え、アーキテクチャ変更への柔軟性を要求。

## リアルオプション戦略とは

金融工学の概念を技術選定に転用し、将来の最適解を選ぶ自由度を保持する考え方を採用。

- **決め打ち回避**: 現時点の最適だけに固定せず、ランタイムや構成の変更余地を残す。
- **変更容易性**: 疎結合な構造でモジュールを独立させ、選択肢を実行可能に保つ。
- **後戻り可能性**: 想定外の結果でも迅速に軌道修正できるよう、撤退コストを最小化。

## 全体方針：モノレポで速度と品質を両立する開発基盤を構築する

少人数チームでも責務分離と開発効率を両立できるモノレポ構成を採用。Next.js単体構成（UI/API密結合リスク）やリポジトリ分割（管理コスト増）と比較し、型共有・環境構築容易性・柔軟な拡張のバランスを評価して決定。

### 今回採用した技術スタック

- **Next.js(App Router)**: UI/UX向上とサーバー/クライアント責務分離。
- **Hono**: ランタイム非依存の軽量APIフレームワーク。
- **Prisma**: スキーマ駆動・型安全なORM。
- **Zod**: スキーマ統一とバリデーション共有。
- **pnpm + Turborepo**: 依存管理とタスク高速化。
- **AWS CDK**: TypeScriptによるIaC運用。

### ディレクトリ構成

`apps/web`と`apps/api`を中心に、`packages/shared`で型・ユーティリティ、`packages/database`でPrismaスキーマ、`infrastructure/cdk`でIaCを管理。ドキュメントや設定も同一リポジトリに収め、横断的な変更を一元化。

### 主な選定理由①：型定義共有による効率と品質

- `packages/shared`でZodスキーマを定義し、API・UI双方が同一型を利用。
- 型の自動補完とビルド時検知により仕様変更時の漏れを防止。
- PrismaクライアントやAPIレスポンスと整合したエンドツーエンドな型安全性を確保。

### 主な選定理由②：AIとの協業効率最大化

- Everything as Codeを徹底し、コードベースにインフラ・スキーマ・仕様書まで集約。
- AIコーディングエージェントが全体文脈を把握し、複数レイヤー横断の変更提案を自動生成。
- ファイル添付機能の例ではスキーマ更新からCDK設定、E2Eテストまで一連の変更が自動化可能。

### リアルオプション戦略としてのポイント

- 現状はモノレポが最適でも、将来のマイクロサービス化やリポジトリ分割に備え段階的移行手順を整理。
- 共有ライブラリ肥大化防止やサービス境界の明確化で、後続の分割コストを抑える。

## モノレポ管理ツールの選定：シンプルさで初期フェーズの開発速度を最大化

Projen+Nxの高機能・高規律案とTurborepoの軽量案を比較。初期フェーズでは認知負荷と撤退コストを抑えることを優先し、タスク依存のみを記述するTurborepoを採用。将来規律強化が必要になれば追加導入できるオプションを確保。

- **Projen+Nx**: 自動生成や依存グラフなどリッチだが学習コストが高く柔軟性を制約。
- **Turborepo**: 既存`package.json`を維持しつつビルド/テストの高速化に集中。導入・撤退が容易。

## バックエンドの選定：軽量なHonoで身軽さを保つ

NestJSやFastifyと比較し、ランタイム非依存・最小規約のHonoを採用。Zodとの親和性とOpenAPI自動生成、学習コストの低さを評価。

### 主な選定理由①：ビジネスロジックに集中できる

- `@hono/zod-openapi`でZodスキーマを記述するだけでバリデーション・型定義・ドキュメントを統合。
- デコレーター依存のフレームワークよりもシンプルな関数中心設計で開発速度を維持。

### 主な選定理由②：DIによる見通しの良いアーキテクチャ

- `Tsyringe`と組み合わせ、リクエストスコープDIを実装。
- Controllerは抽象トークン経由でServiceを解決し、テスト容易性と疎結合を実現。

### リアルオプション戦略としてのポイント

- Node.js運用から、Bun/DenoやCloudflare Workersなど他ランタイムへ切り替える権利を保持。
- 将来のインフラ移行（AWS Lambda⇔Fargateなど）でも変更範囲を限定。

## フロントエンドの選定：Next.jsで既存知見を活用し品質と速度を両立

App Router構成を採用し、既存プロダクトの知見を再利用。表示密度が異なる画面群でも少人数で品質を担保する狙い。

### 主な選定理由：関心分離とキャッシュ制御

- Server ComponentsとClient Componentsでデータ取得と操作を分離。
- Next.js 15のキャッシュ挙動変更（デフォルト非キャッシュ化）により、業務アプリ特有の動的データ更新を制御しやすくなった。

### リアルオプション戦略としてのポイント

- プロダクト群でNext.js基盤を共有し、UIコンポーネントや品質基盤を横展開できる。
- チーム横断の人材流動や設計共通化を促進し、将来の統合改善余地を確保。

## おわりに

リアルオプション戦略に基づき、現時点の「最適解」ではなく将来の選択権を最大化する構成を採用。モノレポやHonoの導入は組織の技術的引き出しを拡張する挑戦でもあり、今後はWebフロント、バックエンド、インフラ、AI協業、ポストモーテムなどテーマ別にさらなる知見共有を予定。読者には不確実性下のプロジェクトにおける意思決定の参考とすることを期待している。

## 参考文献

- [広木大地 『エンジニアリング組織論への招待 ～不確実性に向き合う思考と組織のリファクタリング』 技術評論社](https://gihyo.jp/book/2018/978-4-7741-9605-3?utm_source=chatgpt.com)
