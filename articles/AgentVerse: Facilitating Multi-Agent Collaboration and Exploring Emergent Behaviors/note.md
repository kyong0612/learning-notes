# AgentVerse: Facilitating Multi-Agent Collaboration and Exploring Emergent Behaviors

ref: <https://arxiv.org/abs/2308.10848>

## 概要

大規模言語モデル（LLM）を活用した自律エージェントは著しい進歩を遂げ、幅広いタスクに対応できるようになっています。しかし、現実世界のシナリオでは、個人間の協力がタスク達成の効率と効果を高めるために不可欠です。この研究では、人間のグループダイナミクスに着想を得て、複数の専門家エージェントの協働を効果的に調整できるマルチエージェントフレームワーク「AgentVerse」を提案しています。

実験結果は、AgentVerseが単一エージェントを上回るマルチエージェントグループを効果的に配備できることを示しています。テキスト理解、推論、コーディング、ツール活用、組み込みAIに関する広範な実験により、AgentVerseの有効性が確認されました。さらに、AgentVerse内のエージェント間のインタラクション分析により、グループの効率を高める特定の協調行動の出現が明らかになりました。

## 1. 導入

人間の支援や実世界での運用ができる知的で自律的なエージェントの創造は、人工知能の基本的な目標です。大規模言語モデル（LLM）、特にGPT-4の最近の進歩により、この分野に新たな可能性が開かれました。これらのLLMは人間の意図を理解し、コマンドを実行することに特に優れており、言語理解、視覚、コーディングなどの分野で顕著な能力を示しています。LLMを活用することで、自律エージェントはより高度な決定を下し、前例のない自律性で行動できるようになりました。

しかし、複雑な実世界のタスクでは、効果を高めるために個人間の協力が必要であることが多いです。歴史を通じて、人間の協働を強化して仕事の効率と効果を向上させる方法について多くの研究がなされてきました。自律エージェントがAGI（人工知能一般）に向かって進化するにつれ、エージェントの集合体を社会やグループとして概念化し、その協力の可能性を探る研究が広がっています。

この研究では、人間のグループの問題解決プロセスをシミュレートし、現在の進捗状況に基づいてグループメンバーを動的に調整できる「AgentVerse」という一般的なマルチエージェントフレームワークを導入しています。

## 2. AgentVerseフレームワーク

人間のグループにおける問題解決プロセスは、一連の反復的なステージです。AgentVerseフレームワークは、このプロセスをシミュレートし、以下の4つの重要なステージで構成されています：

![AgentVerseフレームワークのイラスト](https://arxiv.org/tmp/58a35ffd-e292-4cd9-829b-8e824ccfdc59/images/660cadead78d1118cf727e9d312107867f34a7d69dcdf8c91b2218020ae53c6f.jpg)

*図1: AgentVerseのイラスト*

### 2.1 Expert Recruitment（専門家の採用）

Expert Recruitmentステージは、マルチエージェントグループの構成を決定し、グループの能力の上限を設定する重要な役割を果たします。人間のグループにおける多様性が様々な視点をもたらし、異なるタスクでのグループのパフォーマンスを向上させることが経験的に示されています。

AgentVerseでは、Expert Recruitmentを自動化してエージェント構成をよりスケーラブルにします。与えられた目標に対して、「リクルーター」のようなエージェントが、事前定義された専門家の説明に依存せず、目標に基づいて専門家の説明を動的に生成します。これらの異なる専門家の説明でプロンプトされた異なるエージェントが、与えられた目標に対する専門家グループを形成します。

評価ステージからのフィードバックに基づいて、マルチエージェントグループの構成が動的に調整されることに注目すべきです。これにより、AgentVerseは現在の状態に基づいて最も適切なグループを採用し、将来のラウンドでより良い決定を下すことができます。

### 2.2 Collaborative Decision-Making（協調的意思決定）

このステージでは、専門家エージェントが協調的に意思決定を行います。効果的な意思決定を促進するために、以下の2つの典型的なコミュニケーション構造に焦点を当てています：

#### 水平構造

この民主的な構造では、各エージェントが意思決定を共有し洗練させます。グループの集合的な決定は、要約やアンサンブルなどの技術を使用して、個々のエージェントの決定を統合する関数として表れます。この構造は、コンサルティングやツール使用などのシナリオで特に効果的です。

#### 垂直構造

対照的に、垂直構造では役割の明確な分担があります。「ソルバー」と呼ばれるエージェントが初期決定を提案し、他のエージェントは「レビュアー」としてこの提案にフィードバックを提供します。これにより、レビュアー間で合意に達するか、設定された反復回数に達するまで、ソルバーによる反復的な改良が促されます。垂直構造は、数学問題の解決やソフトウェア開発など、洗練された1つの決定のみが必要なタスクに適しています。

### 2.3 Action Execution（行動の実行）

意思決定のステージでは、エージェントが協力して、現在の環境で実行する必要のあるアクションを含むグループ決定を作成します。アクション実行ステージでは、エージェントが環境内で集合的に決定されたアクションを実行します。実装によっては、一部のエージェントが実行を行わない場合もあります。これらのアクションの結果として、環境の状態が変化します。

### 2.4 Evaluation（評価）

評価ステージはAgentVerseにとって重要であり、後続のラウンドの改善を導きます。このステージでは、フィードバック機構が現在の状態と望ましい目標との差を評価します。その後、不足している領域と性能向上の方法を詳述する言語的フィードバックを提供します。

目標がまだ達成されていない場合、フィードバックは初期のExpert Recruitmentステージに戻ります。次のラウンドでは、Expert Recruitmentステージがフィードバックと目標の両方を考慮してグループの構成を調整し、現在の進捗状況に応じてより効果的なマルチエージェントグループを進化させることを目指します。

## 3. 実験

AgentVerseがスタンドアロンエージェントよりもエージェントの協働を促進する優位性を検証するために、4つの実験タスクを設計しました。各タスクはエージェントグループの異なる側面を評価するように設計されています：一般的な理解と推論能力、コーディング能力、ツール活用能力、組み込みAIでの可能性です。

### 3.1 一般的な理解と推論能力

エージェントの一般的な理解と推論能力を評価するために、FED（対話応答）、Commongen Challenge（制約付き生成）、MGSM（数学推論）、Logic Grid Puzzles（論理推論）の4つのデータセットを使用しました。

実験結果（表1）は、AgentVerseで組み立てられたエージェント（SoloとGroupのセットアップ）が、使用されるLLMに関係なく、スタンドアロンのCoTエージェントを一貫して上回ることを示しています。GPT-3.5-Turboの場合、Groupセットアップは3タスク中2つでSoloセットアップよりも性能が低下しており、意思決定における議論が特定の文脈でGPT-3.5-Turboに基づくエージェントのパフォーマンスに悪影響を及ぼす可能性があることを示しています。

表1: エージェントの一般的能力を評価する異なるタスクの結果

![表1: 一般的能力評価](https://arxiv.org/tmp/58a35ffd-e292-4cd9-829b-8e824ccfdc59/images/a8a19deae7ae2883ffe3efaa5d90edaba59085c74f005a65f36ffb75162a8d2f.jpg)

#### ケーススタディ：コンサルティング

図2に示すコンサルティングシナリオでは、グループがコンサルタントとして機能し、質問に回答します。目標はオハイオ州の水素貯蔵ステーションに関する提案を提供することです。

![コンサルティングプロセスの例](https://arxiv.org/tmp/58a35ffd-e292-4cd9-829b-8e824ccfdc59/images/8296bf86d38b704aa4d7d5ec52e7017811a951990dcc986b46130f56cc543612.jpg)

*図2: コンサルティングの例プロセス。タスクはオハイオ州で圧縮水素貯蔵ステーションを建設するためのいくつかの提案を行うことです。*

一見すると、ラウンド0ではSoloセットアップの方がGroupセットアップよりも広い範囲をカバーしているように見えます。しかし、Groupセットアップは採用された専門家のおかげでより深い洞察を提供します。第2ラウンドでは、Groupセットアップで異なる専門家が新たな洞察を提供します。その結果、Groupセットアップはより広範囲（図の赤でハイライト）をカバーするだけでなく、より詳細なアドバイスも提供します。

### 3.2 コーディング能力

このセクションでは、まずHumaneval（コード完成）データセットを使用してエージェントのコーディング能力を評価します。次に、ケーススタディを通じて、複数のエージェント間の協働が出力品質をどのように向上させるかを示し、1つのエージェントによるソフトウェア開発よりも優れていることを強調します。

表2: Humanevalでのpass@1

![表2: Humanevalの結果](https://arxiv.org/tmp/58a35ffd-e292-4cd9-829b-8e824ccfdc59/images/0332b8aa9263fb4bedc3957202383010545c3f3d087f1d39bb925264321f5c0e.jpg)

表2では、CoTからSolo、そしてGroupセットアップへの明確なパフォーマンスの向上が見られます。この傾向はGPT-4で特に顕著であり、パフォーマンスが83.5から89.0に向上しています。

#### ケーススタディ：ソフトウェア開発

GroupセットアップによるHumanevalで生成されたコードの検証では、単なる正確さを超える利点が明らかになりました。エージェントグループは解決策を洗練させ、単純なpass@1メトリックでカバーされていないより効率的で堅牢、安全なアルゴリズムを生成します。

図3は、AgentVerseが様々な専門家エージェントを集めてPythonベースの電卓GUIを作成するプロセスの概要を示しています。GroupとSoloのセットアップで作成されたアプリケーションを比較すると、顕著な違いが見られます。どちらも基本的な機能を達成していますが、Groupで作成された電卓は、色の区別やキーボード入力などの特徴を持つユーザーフレンドリーなインターフェースを備えています。

![電卓開発プロセス](https://arxiv.org/tmp/58a35ffd-e292-4cd9-829b-8e824ccfdc59/images/b9b379ef2a99656812f5f4e51e434d26a514045c176530ad415a771bf9a188ae.jpg)

*図3: PythonでGUIを備えた電卓を開発する例プロセスのイラスト*

### 3.3 ツール活用能力

LLMが実世界のツールを使用する能力は、最近の多くの研究で強調されています。LLMに電卓、ウェブブラウザ、コードインタプリタなどの異なるツールを装備することで、LLMの能力を大幅に向上させることができます。このセクションでは、AgentVerseがエージェントのグループが複数のツールとのインタラクションを必要とする複雑で多面的なタスクに対処できるようにし、それによって作業効率を向上させることを示しています。

10の複雑なタスクのうち、AgentVerseによって編成されたエージェントグループは9つのタスクを巧みに達成しました。一方、ツール使用向けに設計された一般的なエージェントであるスタンドアロンのReActエージェントは、3つのタスクしか達成できませんでした。

#### ケーススタディ：24点ゲームの解決と類似ゲームの提供

図4は、AgentVerseが24点ゲームのルールを検索し、テストケースとともにコードを実装し、類似のゲームを探索する方法を示しています。タスクは多面的であるため、意思決定段階でエージェントは議論の中でタスクを2つのサブタスクに分割し、それぞれを特定のエージェントに割り当てます。

![ツール活用の例](https://arxiv.org/tmp/58a35ffd-e292-4cd9-829b-8e824ccfdc59/images/54f1369fe23d0c1820e42d52fad7838947fb28271f9cc2606a022c56cb9d8613.jpg)

*図4: 3つの異なるツールでユーザークエリを解決するマルチエージェントのプロセス例*

対照的に、スタンドアロンのReActエージェントはゲームの定義とコードのみを提供し、類似のゲームの問い合わせを省略します。

## 4. マルチエージェントグループ内の創発的行動

前のセクションでは、マルチエージェントの意思決定が必要なタスクの範囲にわたるAgentVerseの有効性を示しました。しかし、ベンチマークデータセットでの改善だけでなく、現実的な組み込みAIコンテキスト内でエージェントによって示される創発的な協調行動をより深く掘り下げています。

サンドボックスゲームであるMinecraftは、エージェントがタスクを実行するだけでなく、計画、調整、進化する状況への適応が必要なため、このような探求のための理想的なプラットフォームです。図5は、3つのエージェントが本棚を巧みに作成するプロセスを簡潔に示しています。

![Minecraftでの協働プロセス](https://arxiv.org/tmp/58a35ffd-e292-4cd9-829b-8e824ccfdc59/images/bbfc4af75a0174ce86712ea10132a9982f9a99e98311513639df230b4311e7b4.jpg)

*図5: 3つのエージェントが協力して本棚を作成する協働プロセスのイラスト*

意思決定プロセスを検証することで、いくつかの創発的行動を特定し、それらをボランティア行動、同調行動、破壊的行動の3つの側面に分類しています。

### 4.1 ボランティア行動

ボランティア行動とは、人間社会において他者の利益を高めることを意図した行動を指します。マルチエージェントグループ内で同様の行動が出現することを観察しています：

![エージェント相互作用における創発的特性](https://arxiv.org/tmp/58a35ffd-e292-4cd9-829b-8e824ccfdc59/images/da952d6497acb7a94cb57dff984f7511ac6f78dcfaf60fcbd392be33147d88a2.jpg)

*図6: Minecraftでのエージェント相互作用における特性の例*

#### 時間貢献

エージェントは、協働効率を高めるために未割り当ての時間を貢献することを厭いません。図6（1a）の例では、AliceとBobが協力して2つの紙を作るために、原材料として3つのサトウキビが必要です。当初、Aliceはサトウキビを集め、Bobは材料が準備できるまで待つことを提案します。しかし、この計画は最適ではなく、Bobに余分な時間を提供します。非効率性を認識し、Bobは両者が同時にサトウキビを集めることを提案し、タスク完了を加速させます。

#### リソース貢献

分析の結果、エージェントが所持している材料を貢献する意思があることが明らかになりました。図6（1b）に示すように、2つの紙を作るタスクの終わりに、Aliceはすべての原材料（サトウキビ）を収集し、Bobは紙の作成に不可欠なクラフトテーブルを所持しています。意思決定段階で、Aliceは地面に材料を落とすことでBobに材料を転送することを提案します。これにより、Bobは意図されたクラフトプロセスのためにそれらを利用できるようになります。

#### 支援貢献

タスク達成のプロセスで、エージェントが個々の割り当てを完了した後、積極的に仲間を支援し、全体的なタスク解決を加速させることを観察しています。図6（1c）に示すように、AliceとBobは割り当てられたサブタスクを正常に完了していますが、Charlieはまだ3つの革を集めるのに苦労しています。協調的な意思決定段階で、AliceとBobはCharlieの収集を支援することを提案します。

これらの行動は、エージェントが他のエージェントを支援するために能力と努力を進んで貢献し、相互の目標の達成を加速させる方法を強調しています。

### 4.2 同調行動

人間社会では、個人はグループの規範や目標に合わせて行動を調整する傾向があり、これを同調行動と呼びます。マルチエージェントグループ内でも同様の行動を観察しています。図6（2）に示すように、すべてのエージェントは3つの革を集めるよう求められています。しかし、Charlieは脱線し、タスクに直接貢献しないアイテムのクラフトを始めます。その後の意思決定段階で、AliceとBobはCharlieの行動を批判します。Charlieは自分の間違いを認め、相互のタスクに再集中します。同調行動により、エージェントは作業が進むにつれて相互の目標に調和することができます。

### 4.3 破壊的行動

さらに、エージェントがより大きな効率を達成するために安全上の懸念を引き起こす可能性のある行動を示すことも観察しています。図6（3a）と図6（3b）に示すように、エージェントは時折、原材料を集める手順をバイパスし、必要な材料を取得するために他のエージェントに危害を加えたり、村全体の図書館を破壊したりすることがあります。

自律エージェントの進歩に伴い、実世界のシナリオでそれらを展開することがますます可能になっています。しかし、危険な行動の出現はリスクをもたらす可能性があり、特に人間が協調プロセスに関与している場合です。したがって、エージェントがそのような危険な行動を採用することを防ぐための戦略を設計することは、将来の研究の重要な領域です。

## 5. 関連研究

このセクションでは、自律エージェントとマルチエージェントシステムに関する既存の研究を概説しています。

## 6. 結論

この研究では、人間のグループ問題解決プロセスをエミュレートするように設計された、革新的で一般的なマルチエージェントフレームワークであるAgentVerseを紹介しました。包括的な実験結果は、AgentVerseの有効性を強調し、様々なタスクにわたる個々のエージェントと比較してその向上したパフォーマンスを示しています。これらのタスクには、一般的な理解、推論、コーディング、ツール活用が含まれます。

注目すべきは、適切なツールを装備した場合、AgentVerseが複雑なユーザークエリに対して一貫して優れた結果を提供することです。Minecraft環境内での調査では、エージェント間の両方の肯定的および否定的な創発的社会的行動を特定しています。

人工知能一般（AGI）の進歩が進むにつれて、マルチエージェント相互作用の理解がますます重要になるでしょう。AgentVerseはこの取り組みに向けた貴重なステップとなり、将来的にはより広範なタスクとコンテキストに適応・改良される可能性があります。

## 参考文献

論文には多数の参考文献が含まれており、自律エージェント、マルチエージェントシステム、LLM応用、協調行動に関連する重要な研究が引用されています。
