# Rulesを全部捨てて認識をリセットした話（with Gemini 2.5 Pro）

ref: <https://zenn.dev/ks0318/articles/16c68d9c8021d1>

## 記事の概要

この記事は、AIコーディングアシスタント（主にCursor、Cline、Windsurf）の「Rules」機能について、著者の経験に基づいた考察と、Gemini 2.5 Proの登場による運用方針の転換について述べたものです。従来の「辞書的なRules」運用に疑問を感じ、一度すべてのRulesを削除し、Gemini 2.5 Proをメインに据えて最小限のRulesから再構築した経緯と、そこから得られた学びをまとめています。

## Rulesを捨てた経緯

* **背景:** 以前は、モデルの性能向上とコンテキストウィンドウ拡大を見越して、プロジェクトの知識や行動規範をRulesに蓄積する方針だった（[参考記事](https://zenn.dev/ks0318/articles/b8eb2c9396f9cb)）。
* **問題点:**
  * Rulesが増大し、コンテキスト長の制限で内容が抜け落ち始めた（特に長時間のセッション）。
  * 運用が煩雑な割に、将来的な有効性に疑問が生じた。
* **転機:** Gemini 2.5 Pro（コンテキストウィンドウ1M）の登場。これまでのLLMとは異なるゲームチェンジャーになると感じた。
* **決断:** 既存のRules運用（辞書的な知識蓄積）は正しくないという認識のもと、すべてのRules（`.cursor/rules`, `.clinerules`, `.windsurfrules` など）を削除し、最小限から再構築することを決定。

## Rulesの再定義

Rulesに記載する内容は、以下の3つの要素に分類できると定義しています（Teslaさんの記事[「呪文からパターンへ」](https://zenn.dev/tesla/articles/0efaff25096435)に影響）。

1. **行動規範:** 振る舞いの制約（例: 日本語で回答、不要なコメント禁止）。
2. **ナレッジ:** プロジェクト固有の知識（例: Next.js App Router使用、Vercelデプロイ）。
3. **手順:** 繰り返す作業の明文化（例: 特定フォーマットでのログ記録）。

## Gemini 2.5 ProでのRules再構築と結論

### 再構築プロセス

1. **全面リセット:** 既存のRulesファイルを全削除。
2. **最小復元:** 「日本語で答えて」など、必須の行動規範のみ引き継ぐ。
3. **調整:** ほぼ「裸」の状態で実戦投入し、必要に応じてRulesを再構築。

### 環境

* **リポジトリ:** モノレポ
* **スタック:** TypeScript (Next.js, NestJS)
* **エージェント:** メイン: Cline (Roo Code), サブ: Cursor
* **モデル:** メイン: Gemini 2.5 Pro, サブ: Sonnet 3.7, GPT-4.1 (一時利用)
* **プロジェクト規模:** 小〜中規模の既存システム

### 結論と学び

1. **行動規範と手順は「モード」毎に記載する:**
    * AIコーディングツールには、特定の開発シナリオ（実装計画、実装、デバッグ、質問など）に最適化された「モード」機能がある (例: RooのArchitect, Code, Debug, Ask)。
    * 従来Rulesに書いていた行動規範や手順の多くは、モード毎のカスタム指示で代替可能。
    * 特にRooのデフォルトのモード指示は優秀で、これをベースに改良するのが効果的。
    * 将来的には、モード毎にRules（行動規範＋手順）を指定し、それを管理する方法が主流になると予測（モード x モデルの組み合わせも考慮）。マルチエージェント協調の流れとも合致する。

2. **ナレッジの記載は最低限で良い:**
    * コードベースから容易に判断できる技術スタックや規約（例: Orvalの使用）は、Rulesに明記しなくても、Gemini 2.5 Proのような高性能モデルは自律的に読み取って遵守できる。
    * モデルの賢さとコンテキスト長の進化により、コード自体がナレッジとして機能する。

3. **Rulesよりプロンプトで勝負:**
    * LLMにはモデル固有の癖がある (例: Sonnet 3.7はお節介、Gemini 2.5 Proは指示待ち＆コメント過多)。
    * モデル固有の癖は、Rulesで矯正するよりも、**プロンプトで都度、具体的な制約や指示を与えた方が効果的**。
    * Gemini 2.5 Proのコメント癖はRulesでは直せなかったが、プロンプトで抑制できる場合がある。
    * よく使うプロンプト（行動規範を含む）をMarkdownファイルに保存し、 `@ファイルパス` で呼び出すスタイルが推奨される。

## 記事全体の結論（伝えたいこと）

* モード機能を活用し、用途に合わせた自作エージェント（モード）を作成することが推奨される。
* Rulesはモード毎の管理に移行する可能性が高い。
* プロンプトエンジニアリングの重要性が増しており、自作プロンプト集の活用が有効。
* コードから読み取れるナレッジはRulesに書く必要性が低下している。
* 既存の認識やサンクコストにとらわれず、**思い切ってRulesを捨ててみることで新しい視点が得られる**。AI時代には、既存の認識をリセットするスキルが重要。

## その他

* 記事は2025年4月20日時点の情報に基づいているため、情報の鮮度に注意が必要。
* 著者はX (Twitter) [@KeisukeShibata_](https://x.com/KeisukeShibata_) で学びを発信している。

---

**注意点:**

* 元の記事に含まれるX(Twitter)の埋め込みや画像は、この要約には含まれていません。
* 参照されている他のZenn記事へのリンクは保持しています。
