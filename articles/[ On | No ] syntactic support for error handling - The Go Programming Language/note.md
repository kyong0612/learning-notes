---
title: "[ On | No ] syntactic support for error handling - The Go Programming Language"
source: "https://go.dev/blog/error-syntax"
author:
  - "Robert Griesemer"
published: 2025-06-03
created: 2025-06-06
description: |
  Go チームがエラーハンドリングの構文サポートについて長年の議論と提案を経て、今後は構文変更を追求しないことを決定した経緯と理由を詳述したブログ記事。過去の提案（check/handle、try、?演算子）の失敗から得た教訓と現状維持の合理的根拠を説明。
tags:
  - go
  - error-handling
  - language-design
  - programming-languages
  - syntax
  - clippings
---

## 概要

Goチームは15年間にわたるエラーハンドリングの冗長性に関する議論と、3つの主要な提案（check/handle、try、?演算子）の失敗を受けて、**今後はエラーハンドリングの構文変更を追求しない**ことを正式に決定した。

## 問題の背景

### エラーハンドリングの冗長性

Goでは以下のような冗長なエラーハンドリングパターンが一般的：

```go
x, err := call()
if err != nil {
    // handle err
}
```

実際のコード例では、10行の関数のうち6行がエラーハンドリングで占められ、実際の処理は4行のみという状況が発生。

### ユーザー調査での継続的な不満

- 長年にわたってユーザー調査のトップの不満点
- ジェネリクス導入後、再びエラーハンドリングが最大の課題として浮上

## 過去の提案とその失敗

### 1. check/handle メカニズム (2018年)

```go
func printSum(a, b string) error {
    handle err { return err }
    x := check strconv.Atoi(a)
    y := check strconv.Atoi(b)
    fmt.Println("result:", x + y)
    return nil
}
```

**結果**: 複雑すぎると判断され放棄

### 2. try 組み込み関数 (2019年)

```go
func printSum(a, b string) error {
    x := try(strconv.Atoi(a))
    y := try(strconv.Atoi(b))
    fmt.Println("result:", x + y)
    return nil
}
```

**結果**:

- 900件近いコメントで激しく議論
- 制御フローが見えにくく、多くの反対を受けて放棄
- プロセスの問題も指摘（完成度の高い提案を早期に示しすぎた）

### 3. ? 演算子 (2024年)

```go
func printSum(a, b string) error {
    x := strconv.Atoi(a) ?
    y := strconv.Atoi(b) ?
    fmt.Println("result:", x + y)
    return nil
}
```

**結果**: Rustの?演算子を参考にしたが、やはり広範囲な支持を得られず

## 現状維持を支持する論拠

### 1. 言語設計の一貫性

- Goの設計原則「同じことを複数の方法で行わない」に準拠
- 15年間の歴史で確立された方法論

### 2. 実用的な観点

- **IDE支援**: 現代のIDEはLLM支援によりエラーチェックコードを自動生成可能
- **デバッグの容易さ**: 専用の`if`文により、ブレークポイント設定や`println`追加が簡単
- **適切なエラーハンドリング**: 実際にエラーを適切に処理する場合、冗長性は相対的に減少

### 3. 新しいアプローチ

- **標準ライブラリ機能**: `cmp.Or`などを使用したエラー処理の簡素化
- **IDE機能**: エラーハンドリングコードを隠すトグル機能の可能性

### 4. コミュニティからの意見

Google Cloud Next 2025での非公式調査では、すべてのGoユーザーが言語変更に反対

## 変更を支持する論拠

### 1. ユーザー調査結果

エラーハンドリングサポートの欠如は依然として最大の不満点

### 2. コード品質の向上

キーワードによる明示的なエラーハンドリングは、コードレビューアーにとって処理の有無を確認しやすくする可能性

### 3. 根本的問題の理解不足

構文的な冗長性と適切なエラーハンドリング（APIの一部として意味のあるエラーの構築）の冗長性の区別が不明確

## 最終決定とその根拠

### 決定内容

**「予見可能な将来において、Goチームはエラーハンドリングの構文変更を追求しない。主にエラーハンドリング構文に関する既存および今後の提案は、さらなる調査なしに閉じる。」**

### 決定の根拠

1. **コンセンサスの欠如**: 数百の提案にもかかわらず、十分な合意に至らず
2. **問題認識の不統一**: 問題の共通理解や、問題の存在自体への合意が不十分
3. **プロポーザルプロセスの原則**: 一般的なコンセンサスに達しない提案は却下される

### 実装コスト

- 言語変更は非常に高コスト
- コード変更、ドキュメント更新、ツール調整が必要
- Goチームは相対的に小規模で他の優先事項も多数存在

## 今後の展望

### ポジティブな成果

- エラーハンドリング議論がGo言語と開発プロセスの他の改善につながった
- コミュニティの情熱を他の改善機会に向けることを期待

### 将来への含み

- 将来的により明確な方向性が見えてくる可能性
- 現時点での決定は「予見可能な将来」という条件付き

## 重要な教訓

1. **言語設計の複雑さ**: 単純に見える構文変更も、実際は多面的で複雑な問題
2. **コミュニティコンセンサスの重要性**: 技術的優位性だけでなく、広範囲な支持が必要
3. **既存システムの価値**: 現在の方法も十分に機能的で、変更のリスクとコストを慎重に評価する必要性
4. **段階的アプローチ**: 一度に完成度の高い提案を示すより、段階的なフィードバック収集が重要
