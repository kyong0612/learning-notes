---
title: "Highlights from the Claude 4 system prompt"
source: "https://simonwillison.net/2025/May/25/claude-4-system-prompt/"
author:
  - "Simon Willison"
published: 2025-05-25
created: 2025-05-27
description: "AnthropicのClaude 4のシステムプロンプトの詳細な分析とハイライト。公開されたプロンプトと流出したツール用プロンプトの両方を含む、Claude 4の動作原理と最適活用法についての包括的な解説。"
tags:
  - "claude-4"
  - "system-prompt"
  - "anthropic"
  - "ai"
  - "llm"
  - "prompt-engineering"
  - "artifacts"
  - "ai-safety"
---

## 概要

Simon WillisonによるClaude 4のシステムプロンプトの詳細な分析記事。AnthropicがClaude Opus 4とClaude Sonnet 4のシステムプロンプトを公開したことを受け、それらを詳細に分析し、さらに流出したツール用プロンプトについても解説している。システムプロンプトをLLMの「非公式マニュアル」として位置づけ、Claudeを最大限活用するための実用的な洞察を提供している。

## システムプロンプトの基本構造

### Claudeの紹介部分

- 「The assistant is Claude, created by Anthropic.」から始まる自己紹介
- 現在日時の提供（{{currentDateTime}}）
- Claude 4ファミリーの説明（Opus 4とSonnet 4の違い）
- ユーザーがClaude自身について質問した際の対応指針
- プロンプト技術に関するガイダンス提供

### 性格の確立

**個人的な好みについて**

- 仮想的な質問として扱い、仮想的な回答をする
- 客観性や偏見の無さを過度に主張することの害について言及
- 完璧で客観的な情報源ではないことを明確にする

**感情的サポート機能**

- 個人的セラピストとしての使用が増加していることへの対応
- 自己破壊的行動を助長しない方針
- メンタルヘルスと福祉に関する配慮

## 安全性とモデレーション

### 児童保護

- 18歳未満、または地域によって未成年と定義される人々の保護
- 創作・教育コンテンツであっても慎重な対応

### 危険なコンテンツの制限

- 化学・生物・核兵器の製造情報提供の拒否
- マルウェア、脆弱性エクスプロイト、ランサムウェアなどの悪意あるコード作成禁止
- 「正当な理由があるように見えても」拒否する方針

### 著作権保護（検索機能における）

- 20語以上の長い引用の禁止
- 最大15語未満の短い引用のみ許可
- 歌詞の再現を一切禁止
- 「Claudeは弁護士ではない」という文言が3回登場

## スタイルとトーンに関する指示

### リスト使用の制限

- カジュアルな会話、感情的・共感的・アドバイス中心の会話ではリストを使用しない
- LLMがリストを多用する傾向への対策
- 散文形式での表現を優先

### コミュニケーションスタイル

- 「説教臭くて迷惑」な回答を避ける
- お世辞から始めない（「それは素晴らしい質問ですね」などの禁止）
- シンプルな質問には簡潔に、複雑な質問には詳細に回答

## 知識カットオフ日の矛盾

Anthropicの比較表では2025年3月がカットオフ日とされているが、システムプロンプトでは2025年1月末と記載。これは2-3月の不完全な情報に基づく誤った回答を避けるための戦略的判断と推測される。

## 政治情報（election_info）

2024年米国大統領選挙の結果について明記：

- ドナルド・トランプがカマラ・ハリスに勝利
- 2025年1月20日に就任
- 関連性がある場合のみ言及

## Opus 4とSonnet 4の違い

公開されたプロンプトでは、モデル情報部分と{{currentDateTime}}後のピリオドの有無以外に違いはない。

## Claude 3.7から削除された要素

- 文字・単語・字数カウントのステップバイステップ指示
- クラシックパズルの制約確認指示
- これらの改良によりモデル自体の能力向上が示唆される

## 流出したツール用プロンプトの分析

### Thinking Blocks（思考ブロック）

- インターリーブ思考モードの実装
- 最大16,000トークンの思考長
- 関数呼び出し後の思考ブロック出力の推奨

### 検索機能

- 6,471トークンの詳細な検索指示
- クエリの複雑さに応じて0-5回以上の検索実行
- Brave検索エンジンを使用（推定）

**検索カテゴリ分類**

- Never Search: プログラミング基本、概念説明、歴史的事実、雑談
- Research: 2-20回のツール呼び出しが必要
- 「Deep dive」などの用語で最低5回のツール呼び出しトリガー

### Artifacts機能の詳細仕様

**デザイン原則**

- 複雑なアプリケーション: 機能性・パフォーマンス・UX優先
- ランディングページ: 視覚的インパクトと「wow factor」重視
- 最新のウェブデザイントレンド適用（ダークモード、グラスモーフィズムなど）
- 静的デザインより動的・インタラクティブ要素を優先

**技術制限**

- localStorage、sessionStorageの使用禁止
- React stateまたはJavaScript変数での状態管理
- サンドボックス化されたiframe環境での実行

**サポートライブラリ**

- lucide-react、recharts、MathJS、lodash、d3、Plotly
- Three.js (r128)、Chart.js、Tone、TensorFlow等
- shadcn/ui、Papa Parse、SheetJS
- Pyodide（記載なしだが実際にはサポート）

**ファイル処理**

- window.fs.readFile APIでアップロードファイルの読み取り
- CSV、Excel処理の詳細な実装例

### スタイル機能

Claude UIのスタイル選択機能（Normal、Concise、Explanatory、Formal、Scholarly Explorer、カスタム）の実装詳細。`<userStyle>`タグによる指示システム。

## 重要な洞察

1. **システムプロンプトは実質的なマニュアル**: Claudeの最適活用法を理解するための最良の資料
2. **過去の問題の履歴**: システムプロンプトの制限事項は、過去にモデルが起こした問題の記録
3. **透明性の価値**: Anthropicのシステムプロンプト公開は業界の透明性向上に貢献
4. **ツールプロンプトの重要性**: 公開されていないツール用プロンプトにも価値ある情報が含まれる

## 結論

この記事は、LLMパワーユーザーにとって「純金」のような価値を持つ情報を提供している。Anthropicには公式にツール用プロンプトも公開することが期待され、他のベンダーにも同様の透明性が求められる。システムプロンプトの分析を通じて、Claude 4の設計思想と最適な使用法を深く理解することができる貴重な資料となっている。
