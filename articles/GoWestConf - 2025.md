---
title: "GoWestConf - 2025"
source: "https://www.youtube.com/live/qKH3aT0owF8"
author:
  - "[[Forge Utah]]"
published: 2025-10-25
created: 2025-10-27
description: "GoWestConf 2025のライブストリーム録画。GoによるAIインフラ構築、LLMのセルフホスティング、観測可能性、並行処理、メモリ管理、nil参照問題、ASTを使った静的解析、データストリーミングなど、Goの実践的なトピックを幅広くカバーしたカンファレンス。"
tags:
  - "clippings"
  - "golang"
  - "AI"
  - "LLM"
  - "observability"
  - "concurrency"
  - "memory-management"
  - "AST"
  - "data-streaming"
  - "conference"
---

## 概要

GoWestConf 2025は、Goプログラミング言語に関する幅広いトピックをカバーするカンファレンスです。本動画には、AIインフラ構築、LLMのセルフホスティング、観測可能性、並行処理パターン、メモリ管理、nil参照問題、抽象構文木(AST)、データストリーミングなど、実践的な内容が含まれています。

---

## 1. GoによるAIインフラ構築とLLMのセルフホスティング

### TwitchチャットボットへのAI統合

**プロジェクト概要:**

- Twitchチャットボットに自己ホスト型LLM(Llama 3.1 8Bパラメータ)を統合
- RTX 5090 GPUを使用して自宅でホスティング
- コスト削減とデータプライバシーの向上が目的

**技術スタック:**

- **バックエンド:** Go言語
- **LLM:** Llama 3.1 8Bパラメータモデル
- **ハードウェア:** RTX 5090 GPU
- **観測可能性:** Prometheus + Grafana

### 観測可能性の実装

**収集メトリクス:**

- **Time to First Token (TTFT):** 最初のトークンが生成されるまでの時間
- **End-to-End Latency:** リクエストから完了までの総時間
- **Queue Depth (Q depth):** 処理待ちのリクエスト数
- **Key-Value Cache:** モデルの内部状態キャッシュ
- **Success/Failure Rates:** 成功率と失敗率
- **Heap/Memory Usage:** メモリ使用量の監視

**アラート設定:**

- Discord連携によるアラート通知
- クリティカルレベルと警告レベルの2段階設定
- 問題の早期発見とトラブルシューティングを支援

### デバッグ戦略

**主な対処法:**

1. **キャッシュのクリア:** パフォーマンス問題の解決
2. **サービスの再起動:** 一時的な問題の解消
3. **スロットリング:** 負荷制御
4. **履歴データベース:** 過去のリクエストと応答の追跡
5. **複数VLMインスタンス:** 負荷分散
6. **量子化モデル:** メモリ使用量の削減

### AIの安全性とガードレール

**実装した対策:**

- **レート制限:** 悪用防止
- **メッセージクリーンアップ:** 不適切なコンテンツの検出と削除
- **プロンプトエンジニアリング:** 適切な応答を促す
- **文字列パース:** 不適切なコンテンツのフィルタリング

### Go並行処理の活用

- **チャネルによるメッセージキューイング:** 複数のメッセージを効率的に処理
- スレッドセーフな設計により、並行リクエストの処理が可能

---

## 2. Goのメモリ管理

### メモリの基礎

**メモリの種類:**

- **スタック:** 高速、サイズ制限あり、関数のローカル変数に使用
- **ヒープ:** 低速、サイズ制限なし、動的メモリ割り当てに使用
- **ガベージコレクション(GC):** ヒープ上の未使用メモリを自動回収

### ヒープエスケープ解析

**エスケープが発生する条件:**

- 変数が関数のスコープを超えて使用される場合
- 大きすぎる変数(スタックに収まらない)
- インターフェースへの変換時

**パフォーマンスへの影響:**

- ヒープ割り当てはスタックより遅い
- GCの圧力が増加
- パフォーマンスが重要な場合は、ヒープエスケープを最小化

### ゼロアロケーション

**最適化手法:**

- 不要なメモリ割り当てを避ける
- スタック上で処理を完結させる
- プロファイリングツールで確認

### Goroutineの柔軟なスタック

**特徴:**

- 初期スタックサイズは小さい(2KB)
- 必要に応じて自動的に拡張
- 何千ものGoroutineを効率的に実行可能

---

## 3. Goのnil参照問題

### nil参照の一般的な原因

1. **Nilable型:** ポインタ、スライス、マップ、チャネル、インターフェース、関数
2. **ポインタからインターフェースへの暗黙的変換:** nil値を持つポインタがインターフェースに変換される際の問題
3. **変数のシャドーイング:** スコープ内で同名の変数を再宣言することによる混乱
4. **`return nil, nil`の問題:** インターフェースを返す際、nilエラーとnil値の組み合わせが予期しない動作を引き起こす

### 対策と静的解析ツール

**ツール:**

- **`go vet`:** Go標準の静的解析ツール
- **`staticcheck`:** より高度な静的解析
- **`golangci-lint`:** 複数のリンターを統合
- **`nilaway`:** Uber開発のnil参照検出ツール
- **GoLandのnil参照アナライザー:** IDE統合の解析機能

**ベストプラクティス:**

- 早期にnilチェックを行う
- 静的解析ツールをCI/CDパイプラインに統合
- コードレビューでnil参照に注意

---

## 4. 標準ライブラリ vs オープンソースツール

### 議論のポイント

**標準ライブラリ派:**

- 安定性と互換性
- 学習コストの低減
- 依存関係の最小化

**オープンソース派:**

- より豊富な機能
- 柔軟性とカスタマイズ性
- コミュニティによる継続的な改善

### 主要な比較領域

1. **HTTPフレームワーク:**
   - 標準: `net/http`
   - オープンソース: Gin, Echo, Chi

2. **テスティング:**
   - 標準: `testing`パッケージ
   - オープンソース: Testify, GoConvey

3. **ロギング:**
   - 標準: `log`パッケージ
   - オープンソース: Zap, Logrus, Zerolog

4. **依存関係管理:**
   - 標準: `go mod`
   - サプライチェーン規制への対応が必要

### セキュリティと静的解析

**`capslock`ツール:**

- サプライチェーンのセキュリティリスク評価
- 依存関係が使用する機能の分析(ファイルシステム、ネットワーク、環境変数など)
- オープンソース依存関係の監査に有用

---

## 5. Go抽象構文木(AST)

### ASTとは

**定義:**

- ソースコードの構造をツリー形式で表現
- コンパイラやツールがコードを理解・操作するための中間表現

### Go標準パッケージ

**主要パッケージ:**

- **`go/ast`:** AST のノード定義
- **`go/parser`:** Goコードの解析
- **`go/token`:** トークン定義と位置情報

### AST の使用例

**コード解析:**

```go
fset := token.NewFileSet()
node, err := parser.ParseFile(fset, "example.go", nil, 0)
ast.Inspect(node, func(n ast.Node) bool {
    // ノードの検査と処理
    return true
})
```

**`ast.Inspect`関数:**

- ASTを深さ優先探索でトラバース
- 各ノードに対してカスタム処理を実行

### コード書き換え

**`dst`パッケージ:**

- Decorator Syntax Treeの略
- コメントやフォーマットを保持したままASTを書き換え可能
- リファクタリングツールやコードジェネレータの構築に有用

### ビジュアライゼーション

**`astexplorer.net`:**

- AST構造をインタラクティブに可視化
- 複数の言語に対応
- 学習とデバッグに便利

### 実用例

- カスタムリンターの作成
- コード自動生成
- リファクタリングツール
- メトリクス収集
- セキュリティ監査

---

## 6. Conduitによるデータストリーミング

### Conduitとは

**概要:**

- Go言語で構築されたリアルタイムデータストリーミングプラットフォーム
- ETL(Extract, Transform, Load)処理に特化
- 単一バイナリで動作、設定はYAML

**開発元:**

- Meroxa社がオープンソースプロジェクトとして開発

### 主要機能

1. **シンプルな設定:** YAMLベースの宣言的設定
2. **プラグインアーキテクチャ:** カスタムコネクタとプロセッサの追加が容易
3. **観測可能性:** 組み込みのメトリクスとモニタリング
4. **高パフォーマンス:** Go言語の並行処理を活用

### アーキテクチャ

**主要コンポーネント:**

- **ソースコネクタ:** データの読み取り元(データベース、API、ファイルなど)
- **プロセッサ:** データ変換とフィルタリング
- **デスティネーションコネクタ:** データの書き込み先

### カスタムコネクタとプロセッサ

**開発方法:**

- Goインターフェースを実装
- プラグインとして組み込み
- 既存のエコシステムと統合

### ユースケース

1. **データベースレプリケーション:** PostgreSQL → Snowflake
2. **イベント駆動アーキテクチャ:** Kafka連携
3. **医療データ処理:** HIPAA準拠のデータパイプライン
4. **海事データ:** リアルタイム船舶追跡
5. **ソーシャルメディア:** エンゲージメントトラッキング

### パフォーマンスベンチマーク

**結果:**

- 毎秒数千〜数万レコードの処理が可能
- 低レイテンシー(ミリ秒単位)
- スケーラブルな設計

### 競合製品との比較

**類似ツール:**

- Apache Kafka Connect
- Debezium
- Airbyte

**Conduitの優位性:**

- Go言語によるシンプルなデプロイ(単一バイナリ)
- 低メモリフットプリント
- 高速な起動時間

---

## 結論

GoWestConf 2025では、Goプログラミング言語の多様な側面が探求されました。AIインフラのセルフホスティングから、メモリ管理の最適化、nil参照問題への対処、ASTを使った静的解析、そしてリアルタイムデータストリーミングまで、実践的なトピックが幅広くカバーされています。

これらのセッションは、Goの強力な並行処理モデル、効率的なメモリ管理、そして豊富な標準ライブラリとツールエコシステムを活用した、現代的なソフトウェア開発の実例を示しています。

**主要な教訓:**

- 観測可能性はAIシステムの運用に不可欠
- 静的解析ツールはnil参照などの一般的なバグの早期発見に有効
- ASTはコード解析と自動化の強力なツール
- Go言語は高性能なデータストリーミングアプリケーションに適している
- セルフホスティングLLMはコスト削減とプライバシー保護に有効
