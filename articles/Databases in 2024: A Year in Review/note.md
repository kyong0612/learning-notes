# Databases in 2024: A Year in Review

ref: <https://www.cs.cmu.edu/~pavlo/blog/2025/01/2024-databases-retrospective.html>

衝撃的な年明けとともに、再び「データベース界の一年」を振り返る記事をお届けします。かつてはOtterTuneのブログで執筆していましたが、その会社は今や存在せず（安らかに眠れ）。現在は私の教授ブログでこれを行っています。

過去1年には、多額の買収、ライセンス変更に伴う混乱、さらには有名な80代のデータベース開発者が大学フットボール選手を勧誘するために巨額の資金を投じるといった多くの出来事がありました。

今年はもっとプロフェッショナルな文章を書くと最初の妻に約束しました。また、一部の大学では私のこの年次ブログ記事がデータベースコースの必読教材として採用されていると知らされました。どのような仕上がりになるか、見てみましょう。

## これは私のデータベースだ、だからライセンスは好きにする

私たちはデータベースの黄金時代に生きています。あらゆるアプリケーションドメインに対応する優れた（リレーショナル）データベースが数多く存在しています。それらの多くは、営利企業がVC（ベンチャーキャピタル）からの資金を得て開発したオープンソース製品です。

しかし、VCは投資資金を回収したがり、その利益を最大化したいと考えています。そのため、これらの企業は自社のDBMS（データベース管理システム）をクラウドでホストするサービスとして提供します。しかし、クラウド環境はオープンソースのDBMSにとって厄介な存在です。もしあるシステムが非常に人気を集めた場合、クラウドベンダー（例えばAmazon）がそのシステムをサービスとして展開し、ソフトウェアの開発費を負担している企業よりも多くの収益を上げることができます。この脅威を回避するために、多くのデータベース企業はクラウドベンダーが製品を再販できないようにするための制限付きライセンスへと変更しています。MongoDBが2018年にServer Side Public License（SSPL）を採用したのがその先駆けです。

過去1年は、ライセンス変更が相次ぎ、特に注目を集めたのがRedis™とElasticsearchです。

## Redis

Redis Ltd.（会社名）はIPO（新規株式公開）に向けて積極的に動いています。この会社は2011年にRedis Labsとして設立され、2021年にSalvatore Sanfilippo（Redisの創始者）からRedisの商標を買収した際に現在の社名に変更しました。それ以来、Redis Ltd.はRedisエコシステムの管理を強化しようとしています。同時に、Redisが主にインメモリキャッシュとして利用されるという認識を払拭しようとし、ベクターデータやその他のデータモデルのサポートを追加しました。

2024年3月、Redis Ltd.はシステムの元々の（非常に寛容な）BSD-3ライセンスから、独自のRedis Source Available LicenseとMongoDBのSSPLによるデュアルライセンスに変更することを発表しました。同日に、RocksDBのオープンソースフォークであるSpeedbの買収も発表しています。

このライセンス変更に対する反発は迅速でした。同じ週に、元のBSD-3コードラインに基づく2つのフォークが発表されました。それがValkeyとRedictです。ValkeyはAmazonでスタートし、すぐにGoogleやOracleのエンジニアも参加しました。一週間で、ValkeyプロジェクトはLinux Foundationの一部となり、複数の大企業が開発努力をValkeyにシフトしました。さらに、Redis Ltd.はオープンソースのRedis拡張機能を管理下に置こうとする動きで悪評を増す結果となりました。

2024年12月には、Bushwick Bill（RIP）、Scarface、Willie Dが2015年に再結成したことを彷彿とさせる出来事がありました。Redisの創始者がRedis Ltd.の経営陣と接触し、Redisコミュニティを再統一するために復帰を目指していると発表しました。

## Elasticsearch

Elastic N.V.は、テキスト検索データベース管理システム（DBMS）として広く利用されるElasticsearchの開発を支援する営利企業です。2021年、ElasticはライセンスをElastic LicenseとMongoDBのSSPLのデュアルライセンスモデルに変更することを発表しました。この変更は、2015年から提供されていたAmazonによるElasticsearchサービスの急成長に対応するためのものでした。しかし、Amazonはこの変更を快く思わず、独自のオープンソースフォーク「OpenSearch」を発表しました。

その3年後、Elastic N.V.は2024年8月に再びライセンスを変更し、今度はAGPL（GNU Affero General Public License）を採用しました。この変更を発表したブログ記事では、Kendrick Lamarの曲（例：「Not Like Us」）が引用されていました。この変更に対してAmazonは快く思わず、Elasticを「データベース界のDrake」と呼び、翌月にはOpenSearchプロジェクトの所有権をLinux Foundationに移管することを発表しました。

## Andyの見解

この一連のライセンスに関する混乱は、単なるライセンスの問題に見えますが、実際には大金が絡んでいます。そして、これらはたった2つのシステムの話に過ぎません！例えば、Greenplumは9年にわたるオープンソースリポジトリの提供をひっそりと終了し、プロプライエタリ化しましたが、誰も気づきませんでした。なぜなら、もう誰もGreenplumを自発的に使いたがらないからです。Altibaseが2023年にオープンソースを取りやめた例を除けば、このような逆行する動きは他には見られません。

Redisについては、正直に言えば私はあまり好きではありません。遅いし、偽のトランザクション機能があり、クエリ構文も異常です。CMUでの実験では、Dragonflyの方がはるかに優れたパフォーマンスを示しました（たとえ1つのCPUコアしか使わない場合でも）。私のデータベースコースでは、Redisのクエリ言語を「こうしてはいけない例」として教えています。それでも、Amazonに圧倒されているRedis Ltd.の苦境には同情します。ただし、Redisのような単純なシステムを構築するための参入障壁は、Postgresのようなフル機能のDBMSを構築する場合よりもずっと低いです。そのため、Redisの代替となる選択肢は数多く存在しています。コミュニティがこのような振る舞いを受け入れる状況にはありません。

Elasticsearchの騒動はRedisと同じ話ですが、プロットがさらに進んだ段階にあります。会社がライセンス変更を発表し、競合がオープンソースフォークを作成し、最終的に会社がオープンソースライセンスに戻すという流れです。

RedisやElasticsearchが、他のシステム（例：MongoDB、Neo4j、Kafka、CockroachDB）のライセンス変更時よりも反発を受けているのは注目に値します。これらのシステムではフォークが大規模に進むことはありませんでした。RedisやElasticsearchがこれほどまでに批判を浴びるのは、それらのインストールベースが他のシステムよりも大きいからだけではないでしょう。むしろ、Redis Ltd.がシステムの創設者ではないにもかかわらず利益を得ているという「不当な利得」のイメージが批判の根底にあると考えられます。

## これらのライセンス変更の根本的な問題

これらのライセンス変更で見られる根本的な問題は、データベース市場におけるオープンソース独立系ソフトウェアベンダー（ISV）の長期的な存続可能性にあります。クラウドベンダーは無限の資金力を持つ巨人です。もしオープンソースのDBMSが成功すれば、クラウドベンダーはそのDBMSをホストし始め、開発元のISVよりも多くの利益を上げるでしょう。あるいは、AWSが2024年3月にTimestream DBMSにInfluxDB v2プロトコルを追加したように、既存のDBMSにそのDBMSの通信プロトコルをフロントエンドとして追加することもあります。こうした動きにより、クラウドベンダーは開発元を圧倒するような競争優位を築きます。

さらに、AWSはValkey互換サービスを発表し、そのRedis互換サービスよりも30%安価で提供することを発表しました。このような価格競争の結果、オープンソースベンダーが自社システムの開発を続けるインセンティブが削がれる可能性があります。

> 2025年1月1日のアップデート
> 私は以前、AWSがTimestream DBMSにInfluxDB v2プロトコルを追加したと述べました。しかし、実際にはAWSはInfluxDataと協力してInfluxDB v2 DBMSのマネージドサービスを提供しています。

## Databricks vs. Snowflakeの対立は続く

DatabricksとSnowflakeの間の対立は依然として激しいものがあります。この争いは、データベース業界の典型的な戦いの一つであり、その影響は業界全体に広がっています。これまで両者はクエリパフォーマンスでの競争を繰り広げてきましたが、最近ではデータ管理の他の分野にも広がり、さらに多額の資金が投入されています。

2024年3月、Databricksは1億ドルを費やして1320億パラメータを持つオープンソースのLLM「DBRX」を構築したと発表しました。このモデルは2023年に13億ドルで買収したMosaicチームが開発しました。これに対し、Snowflakeは翌月、4800億パラメータを持つオープンソースLLM「Arctic」を発表しました。Snowflakeは、このモデルが「エンタープライズ」タスク（例：SQL生成）でDBRXを上回る性能を発揮すると主張しています。Snowflakeは他のLLM（例：Llama3）が自身よりも優れていることを認めつつも、特にDBRXとの比較に焦点を当てた発表を行いました。これにより、両者の対立がさらに深刻化しました。

さらに、この対立はカタログ管理の分野にも及びました。2024年6月、SnowflakeはオープンソースのPolarisカタログサービスを発表しようとしましたが、その直前にDatabricksがカタログシステム「Tabular」を20億ドルで買収し、その発表タイミングでSnowflakeを出し抜きました。DatabricksはさらにUnityカタログをオープンソース化することを発表し、対立は激化しています。

## Andyの見解

このデータベース戦争において興味深いのは、単なる性能比較に留まらない点です。かつての1990年代のOracle対Informixの戦いでは、主にクエリ遅延時間を巡る競争が行われていました。しかし、今回のDatabricks対Snowflakeの争いは、データベースそのものの性能を超えて、エコシステム全体の競争に広がっています。すなわち、データベースにデータを取り込むためのインフラや、そのデータを活用するためのツールが主な焦点となっています。

OLAP（オンライン分析処理）のクエリ向けのベクトル化実行エンジンは今やコモディティ化しています。Databricksや他のすべてのOLAPベンダーは、Snowflakeが2013年に発表したアーキテクチャ設計を追随しています。この設計はSnowflakeの共同創設者の博士論文を基にしています。現在重要視されているのは、品質の向上やツールとの互換性、さらにはAIやLLM（大規模言語モデル）の活用といった部分です。

少なくとも、SnowflakeとDatabricksの競争は消費者にとってメリットがあります。この激しい競争により、データ活用のための製品や技術が進化し、例えばSnowflakeのPolarisがApacheプロジェクトになったり、価格が下がる可能性があります。かつてのOracle対SalesforceのCEO間の争いのように、単に二人のリッチな人物が高額なカンファレンスでお互いを批判するだけの戦いとは異なります。

## あらゆるものにDuckを組み込む

Postgresが新しい運用型データベースを始める際のデフォルト選択肢であるように、DuckDBはデータ上で分析クエリを実行したい場合のデフォルトの選択肢として注目を集めています。以前はPandasがその地位を占めていましたが、DuckDBの驚異的な携帯性により、多くのシステムがDuckDBを内部に組み込む動きを見せています。2024年には、PostgresにDuckDBを組み込むための4つの異なる拡張機能がリリースされました。

### 主な発表内容

 1. Crunchy Data
2024年5月、Crunchy DataはPostgresのOLAPクエリをDuckDBにリルートするためのプロプライエタリブリッジを発表しました。その後、DuckDBの地理空間機能を活用してPostGISクエリを加速させるために、この拡張機能を拡張したバージョンを発表しました。
 2. ParadeDB
2024年6月、ParadeDBはオープンソース拡張機能「pg_analytics」を発表しました。これはPostgresの外部データラッパーAPIを使用してDuckDBを呼び出すものです。それ以前のバージョン（pg_lakehouse）ではDataFusionを使用していましたが、DuckDBに切り替えました。
 3. pg_duck
2024年8月には、DuckDB for Postgresの拡張機能「pg_duck」がリリースされました。この拡張機能のソースコードはDuckDB LabsのGitHub組織でホストされており、公式に認可されたDuckDB拡張機能とされています。発表時には、MotherDuck、Hydra、Microsoft、Neonの共同プロジェクトとされていましたが、開発統制の問題でMicrosoftとNeonが排除されたとされています。現在ではMotherDuckとHydraによる共同プロジェクトとしてリストされています。
 4. pg_mooncake
2024年11月には、最新のDuckDB拡張機能「pg_mooncake」がリリースされました。この拡張機能は、Postgresを通じてIcebergテーブルにデータを書き込む際のトランザクションサポートを備えています。

## Andyの見解

ほとんどのOLAPクエリは、それほど大量のデータにアクセスしません。FivetranがSnowflakeとRedshiftのトレースを分析した結果、クエリによってスキャンされるデータの中央値はわずか100MBであることがわかりました。このように少量のデータであれば、単一のDuckDBインスタンスでほとんどのクエリを処理できます。

DuckDBの利便性と携帯性が、Postgresコミュニティ内での普及の理由です。ClickHouseは2016年から存在していますが、DuckDBほど簡単に利用できるようになったのは最近のことです。DuckDB拡張機能は、データエコシステムへの単一のエントリーポイントを提供します。IcebergやS3のデータにアクセスするために個別の拡張機能をインストールする必要がなく、DuckDBがこれをすべて処理してくれます。その結果、企業は高価なデータウェアハウスを必要とせずに、高性能な分析を実現できます。

Postgresの拡張性とプラグインサポートは非常に優れています。Postgresの設計目標の一つは、新しいアクセス方式やデータ型、そしてそれらのデータ型に対する新しい操作を簡単にサポートできるようにすることでした。現在、Postgresの「フック」APIは非常に広範で、多様な拡張エコシステムを備えています。ただし、これらの拡張機能が相互に干渉し、誤動作を引き起こすリスクもあります。

以前の列指向ストレージをPostgresに追加するプロジェクト（例：Citus、Timescale）は、問題の一部しか解決していませんでした。列指向データ形式はストレージからデータを取得する際のパフォーマンスを向上させますが、Postgresのような行指向のクエリ処理モデルを使い続ける限り、これらの形式を十分に活用することはできません。DuckDBを使用することで、列指向ストレージとベクトル化クエリ処理の両方を活用できます。

（ここでターキー、ダック、エレファントを使った「ターダッキン」ジョークが浮かびますが、大学から解雇されたり停職処分を受けたりしたくないので控えておきます。）

## 様々な出来事

過去1年でデータベース界では多くの一発屋的な出来事がありました。それらを見逃しているかもしれないので、以下に簡単にまとめます。

### リリース

 • Amazon Aurora DSQL
AWSが新たに発表した「Spanner風」のDBMSについては、まだ多くの情報が公開されていません。Mark BrookerがこのDBMSのアーキテクチャについて議論した内容がわずかに知られています。キーとなるアイデアは分散ログサービス（かつて存在したQLDBを基にしたものと噂されています）と、Time Syncによるタイムスタンプ順序付けです。この発表では、「Aurora」というブランド名がデータベース界でいかに認知されているかが示されています。この新DBMSは、AWSのフラッグシップであるAurora Postgres RDSとはコードを共有していないとされています。
 • CedarDB
Umbraは、世界最高のデータベース研究者であるThomas Neumannによって書かれた最先端のDBMSです。しかし、Thomasは大学にとどまり、Umbraの研究に集中しており、顧客対応には興味を示していません。そのため、彼の優秀な博士課程の学生たちがコードをフォークし、「CedarDB」として商業化を進めています。
 • Google Bigtable
発表で最も注目すべき点は、NoSQLムーブメントの先駆者であったBigtableが、2024年にSQLサポートを開始したことです。
 • Limbo
TursoはSQLiteのフォークであるlibSQLに取り組んでいましたが、2024年にはSQLiteをRustで完全に書き直した「Limbo」を発表しました。この発表では、SQLiteの価値が単なるコードにあるのではなく、すべての環境で正しく動作することを保証するテストエンジニアリングにあることが強調されています。このため、Limbo開発者はFoundationDBの元エンジニアたちが設立したテストの専門スタートアップと協力しています。
 • Microsoft Garnet
このキーバリューストアは、Microsoft Researchの「FASTER」システムの後継であり、Redis互換を持ちながら、クエリ間並列処理、メモリ容量を超えたデータベース、リアルトランザクションをサポートしています。現在では、Redisは第一選択肢ではなくなっています。
 • MySQL v9
MySQL v8が一般提供されてから6年後、新バージョンのMySQL v9がリリースされました。しかし、データベースに8000以上のテーブルがあるとクラッシュするという問題が報告されています。この新バージョンの機能一覧には目を見張るものがなく、OracleがMySQL Heatwaveサービスに集中しているため、MySQLそのものへの関心は薄れています。多くの人々がすでにPostgresへ移行しています。
 • Prometheus v3
最新のメジャーバージョンから7年ぶりにPrometheus v3がリリースされました。ただし、現在では互換性のある多くの代替案が存在するため、元祖Prometheusがすべての組織にとって最適な選択肢ではなくなっています。

### 買収

 • Alteryx → プライベートエクイティ
私はAlteryxを使っている人に会ったことがなく、この買収について特に意見はありません。
 • MariaDB → プライベートエクイティ
MariaDB Corporationを買収したPE（プライベートエクイティ）企業が、この混乱を収束させることを願っています。MariaDBの現状については、昨年の分析を参照してください。
 • OrioleDB → Supabase
Postgres ISV（独立系ソフトウェアベンダー）のリーダー格であれば、この買収は理にかなっています。Postgresは優れたフロントエンドを持っていますが、ストレージアーキテクチャが古いです。OrioleDBはその問題を解決します。
 • PeerDB → ClickHouse
PostgresからClickHouseへのデータ移行ツールの強化です。ClickHouse Inc.による賢明な動きです。
 • PopSQL → Timescale
高機能なSQLエディタUIを購入しました。これはユーザー体験を向上させる投資です。
 • Speedb → Redis Ltd.
Redisのデータをディスクに保存できるようにするためにSpeedbを活用する可能性があります。Speedbの開発者はRocksDBフォークに加えた変更点を明確に説明していませんが、Mark Callaghanの最近の比較が参考になります。
 • Rockset → OpenAI
大きなニュースですが、2024年9月にDBaaS（Database-as-a-Service）を閉鎖しました。Facebookの優秀なデータベースエンジニアたちによる素晴らしいチームでしたが、そのDBMSはインデックスにデータを3コピー保存するという設計が個人的には好きではありませんでした。
 • Tabular → Databricks
これについては前述の議論を参照してください。Icebergは標準となっています（Hudiには申し訳ないですが）。Amazon S3も今やこれをサポートしています。

### 資金調達（Funding）

 • Databricks
シリーズJで100億ドルを調達
Databricksは2年連続でデータベース界で最も大規模な資金調達を達成しました。この100億ドルの調達は、従業員がDatabricksのIPOを待ちきれず、株式を現金化したいという需要に対応したものでした。2023年のシリーズI（5億ドル）や2021年のシリーズH（16億ドル）に続くものです。CMU-DBの卒業生の中にもDatabricksで働いている者が複数おり、その中にはIPOを待ち望んでいる人もいます。
 • DBOS
シードラウンドで850万ドルを調達
データベースの新興勢力として注目されています。
 • LanceDB
シードラウンドで800万ドルを調達
オープンソースのベクターデータベースとして、AIモデルのスピードを向上させることを目指しています。
 • SDF
シードラウンドで900万ドルを調達
MicrosoftやMetaのベテランたちが率いるデータウェアハウススタートアップです。
 • SpiceDB
シリーズAで1200万ドルを調達
セキュアなアクセス制御システムを提供しています。
 • TigerBeetle
シリーズAで2400万ドルを調達
トランザクション処理のための強力なソリューションを開発しています。

これ以外にもCedarDBやSpiralDBなどの資金調達が行われましたが、これらの詳細な金額はまだ公表されていません。

### 終了（Deaths）

 • Amazon QLDB
Amazonでさえブロックチェーンデータベースを収益化する方法を見つけられなかったのであれば、誰にも不可能でしょう。ちなみに、QLDBは本格的なP2Pブロックチェーンではないですが、それに近い存在です。
 • OtterTune
私、Dana、Bohanは、この研究プロジェクトとスタートアップに10年近く取り組んできましたが、ついに終焉を迎えました。ある企業による扱いには失望しています。そのため、その企業は今後CMU-DBの学生を採用することを禁止しています。彼らは何をしたのか分かっているはずです。

## Andyの見解

Databricksは、2024年もデータベース分野の資金調達を独占しました。100億ドルという額は驚異的ですが、この資金は社員の株式売却をサポートするためのものでした。これにより、DatabricksのIPOへの期待がさらに高まっています。他の多くのデータベーススタートアップ（例：CockroachDB、Starburst、Imply、DataStax、SingleStore、Firebolt）は、Databricksの成功を追い風にして自らのIPOを模索するでしょう。

特に注目すべきはdbtLabsです。業界関係者によると、dbtLabsは順調に業績を伸ばしており、競争相手を圧倒しているようです。

## Larry Ellisonの2024年での動向

2024年に80歳の誕生日を迎えた伝説的なLarry Ellisonは、ますます活発に活動を続けています。彼は「落ち着く」ことや「型にはまる」ことを拒否し、さらなる高みを目指しています。

まず、2024年3月にはOracle株の急騰により、わずか1日で150億ドルを稼ぎ出しました。この成功を受けて、彼は2024年7月に息子のためにParamount Studiosを60億ドルで購入し、Palm Beachのリゾートを2億7700万ドルで購入するなど、一年を通じて大規模な買い物を楽しみました。しかし、これらは彼の2024年における最大の成果ではありません。

### 大学フットボールへの寄与

2024年11月、Larry Ellisonがミシガン大学のフットボールプログラムを支援していたというニュースが世間を驚かせました。ミシガン大学は、ルイジアナ州立大学（LSU）から最高のカレッジクォーターバックが転校すると発表しました。そのプレスリリースでは、「Larryと彼の妻Jolin」に感謝する旨が記載されていました。この「Larry」が他ならぬLarry Ellisonであることが判明し、彼が1200万ドルをブースターキャンペーンに寄付し、このクォーターバックの移籍を支援していたことが明らかになりました。

このニュースを受けて、多くの人々が「Jolin」という女性が誰なのかについて興味を持ちました。調査の結果、Larryが以前テニスの試合を観戦していた際、ミシガン大学の帽子を被った女性が隣にいた写真が見つかりました。そして、主要メディアが早朝に報じたところによると、この女性は「Jolin（Keren）Zhu」であり、Larryの新しい妻であることが確認されました。

## Andyの見解

私はLarryの2024年の成果を非常に誇りに思っています。彼はどの大学も卒業しておらず、ミシガン大学との直接的なつながりもありませんでした。それにもかかわらず、彼が人生の愛とされる女性が10年前にミシガン大学に通っていたことを理由に、1200万ドル（彼の純資産の約0.0055%）を寄付して、フットボールチームのために奇跡を起こしたのです。

さらに素晴らしいのは、Larryが再び恋に落ちたという事実です。今日の世界では、多くの人が特別な誰かを見つけるのに苦労しています。出会い系アプリは複雑ですし、スピードデートはぎこちないですし、子供のいない人がシングルペアレントを探すために公園をうろつくのは、今や不適切と見なされています。最終的に「運命の人」を見つけたと思ったとしても、その人が靴下を洗わない習慣や冷たいシリアルにホットソースをかける癖を知った途端、すべてが崩れることもあります。

そのため、多くの人々が「Larryは2010年に4番目の妻であるMelanie Craft（ロマンス小説家）と離婚した後、二度と結婚しないだろう」と言っていました。また、2020年に5番目の妻であるNikita Kahnと離婚した後も、同じことを言う人々がいました。しかし、私はそうは思いませんでした。そしてLarryは、6番目の妻Keren Zhuとの結婚を通じて、私の予想が正しかったことを証明しました。

## 結論（Conclusion）

この記事の冒頭では、3年ぶりに健康な状態で新年を迎えたと自慢するつもりでした。しかし、娘が私にCOVIDをうつしてしまい、現在はそれに苦しんでいます。2024年9月にブースター接種を受けており、Paxlovidも服用しているため、乗り越えられるでしょう。

OtterTuneが終了してしまったのは残念ですが、このプロジェクトを通じて多くのことを学び、多くの才能あふれる人々と働くことができました。Intel CapitalやRace Capitalが最後まで支えてくれたことには感謝しています。次のスタートアップについても、近いうちに発表できるといいですね。（ヒント：それもデータベース関連です！）

現在はカーネギーメロン大学（CMU）にフルタイムで戻り、Jignesh Patelと共に素晴らしい研究プロジェクトに取り組んでいます。今年は新しいクエリ最適化のコースを教える予定で、この分野でさらに成果を上げたいと考えています。

最後に、ByteBaseの「Database Tools in 2024: A Year in Review」に感謝します。例年、私の記事を翻訳したいというメールが届いていましたが、今年は彼らが私の記事を待たずに独自のレビュー記事を書いたようです。それだけ私の執筆に影響力があるということでしょうか。
