---
title: "システムコンポーネント（CPU、メモリ、ディスク、ネットワーク等）のレイテンシとタイムスケールなどなど"
source: "https://kazuhira-r.hatenablog.com/entry/2021/05/01/150306"
author:
  - "Kazuhira"
published: "2021-05-01"
created: "2025-08-26"
description: |
  CPUサイクル、メモリアクセス、ディスクアクセスなどのレイテンシ比に関する情報を備忘録としてまとめた記事。各リソースアクセスへのスケール感を把握することを目的としている。主な出典は「詳解 システム・パフォーマンス」。
tags:
  - "Linux"
  - "Java"
  - "performance"
  - "latency"
  - "system-design"
---

この記事は、CPUサイクル、メモリアクセス、ディスクI/O、ネットワーク遅延など、各種システムコンポーネントのレイテンシ（遅延）とそのタイムスケール感を比較しまとめたものです。主な出典はBrendan Gregg氏の著書「詳解 システム・パフォーマンス」です。

### システムコンポーネントのレイテンシとタイムスケール

3.3GHzのCPUのレジスタアクセスを基準（1秒）とした場合、各操作のレイテンシがどれくらいの時間に相当するかを示しています。メインメモリへのアクセスは6分、SSD I/Oは2〜6日、回転ディスクI/Oは1〜12ヶ月、大陸間のインターネット通信は数年単位となり、そのスケール感の違いが明確に示されています。

| 操作 | レイテンシ | 対比 |
| --- | --- | --- |
| 1 CPU（3.3GHz）サイクル | 0.3 nano秒 | 1秒 |
| レベル1 キャッシュアクセス | 0.9 nano秒 | 3秒 |
| レベル2 キャッシュアクセス | 2.8 nano秒 | 9秒 |
| レベル3 キャッシュアクセス | 12.9 nano秒 | 43秒 |
| メインメモリアクセス（DRAM、CPUから） | 120 nano秒 | 6分（360秒） |
| SSD I/O（フラッシュメモリ） | 50 〜 150 μ秒 | 2〜6日 |
| 回転ディスク I/O | 1〜10 m秒 | 1〜12ヶ月 |
| インターネット： サンフランシスコ - ニューヨーク | 40 m秒 | 4年 |
| インターネット： サンフランシスコ - イギリス | 81 m秒 | 8年 |
| インターネット： サンフランシスコ - オーストラリア | 183 m秒 | 19年 |
| TCPパケット再送 | 1〜3秒 | 105〜317年 |
| OS仮想化システムリブート | 4秒 | 423年 |
| SCSIコマンドタイムアウト | 30秒 | 3,000年 |
| ハードウェア仮想化システムリブート | 40秒 | 4,000年 |
| 物理システムリブート | 5分 | 32,000年 |

![f:id:Kazuhira:20210501145509p:plain](https://cdn-ak.f.st-hatena.com/images/fotolife/K/Kazuhira/20210501/20210501145509.png)

### ディスクI/Oのレイテンシのタイムスケール

ディスクI/Oに特化したレイテンシの比較です。オンディスクキャッシュヒットを1秒とした場合、フラッシュメモリからの読み出しは1〜10秒、回転ディスクからのランダム読み出しは1分以上、最悪条件の仮想ディスクI/Oでは約2.8時間にもなることが示されています。

| イベント | レイテンシ | 対比 |
| --- | --- | --- |
| オンディスクキャッシュヒット | < 100 μ秒 | 1秒 |
| フラッシュメモリからの読み出し | 〜100から1,000 μ秒 | 1〜10秒 |
| 回転ディスクからのシーケンシャル読み出し | 〜1 m秒 | 10秒 |
| 回転ディスクからのランダム読み出し（7,200rpm） | 〜8 m秒 | 1.3分 |
| 回転ディスクからのランダム読み出し（遅く、キューイングされる） | > 10 m秒 | 1.7分 |
| 回転ディスクからのランダム読み出し（キューで大量に待っている） | > 100 m秒 | 17分 |
| 最悪の条件の仮想ディスクI/O | 〜1 m秒 | 2.8時間 |

### ネットワークのレイテンシのタイムスケール

`ping`コマンドでのネットワークレイテンシの比較です。`localhost`へのpingを1秒とした場合、同じサブネット内の通信は数秒、大陸間のインターネット通信は10分〜1時間規模になることがわかります。

| 送信 | 受信 | 媒体 | レイテンシ | 対比 |
| --- | --- | --- | --- | --- |
| localhost | localhost | カーネル | 0.05 m秒 | 1秒 |
| ホスト | ホスト（同じサブネット） | 10GbE | 0.2 m秒 | 4秒 |
| ホスト | ホスト（同じサブネット） | 1GbE | 0.6 m秒 | 12秒 |
| ホスト | ホスト（同じサブネット） | WiFi | 3 m秒 | 1分 |
| サンフランシスコ | ニューヨーク | インターネット | 40 m秒 | 13分 |
| サンフランシスコ | イギリス | インターネット | 81 m秒 | 27分 |
| サンフランシスコ | オーストラリア | インターネット | 183 m秒 | 1時間 |

### キャッシュオブジェクトへのアクセス

JCacheを例に、キャッシュオブジェクトへのアクセス速度を比較した図です。ヒープ上のオブジェクト取得が最も速く、シリアライズ/デシリアライズやネットワーク越しのアクセスには相応のオーバーヘッドがかかることが示されています。

![f:id:Kazuhira:20210501145340p:plain](https://cdn-ak.f.st-hatena.com/images/fotolife/K/Kazuhira/20210501/20210501145340.png)
