# E2Eテストにおける要素選択のベストプラクティス

ref: <https://blog.autify.jp/article/best-practices-for-element-locating-in-e2e-testing>

- 端末間テスト(E2Eテスト)における要素の選択の重要性が強調され、特にIDやクラスに依存することの問題点が指摘されています。
- E2Eテストはシステムの外部的な振る舞いを確認するものであり、内部構造に依存したテストコードはメンテナンス性を損なうことが述べられています。
- 適切な一意のロケーターの使用が重要であり、IDの使用が長らくベストプラクティスとされてきました。
- しかし、IDやクラスはHTML内部構造に基づくため、将来の変更に対して脆弱であることが指摘されています。
- ユーザーが要素を見つける方法に基づいたロケーターの使用が推奨されており、テキストや役割の利用が提案されています。
- Testing Libraryが提供するAPIを使用することで、ロールベースの要素探索が容易になることが述べられています。
- PlaywrightなどのE2Eテストフレームワークも、Testing Libraryと同様の要素探索をサポートしていることが説明されています。
- アクセシビリティ属性の確認が重要であり、Chrome DevToolsを使用してアクセシビリティツリーを確認することが推奨されています。
- 現代のベストプラクティスに従うことで、テストコードは外部的な振る舞いに依存し、内部構造の変化に対して強くなることが述べられています。
- Kent C. Dodds氏の言葉を引用し、テストが実際の使用方法に似ているほど、開発者に自信を与えるという考えが強調されています。
