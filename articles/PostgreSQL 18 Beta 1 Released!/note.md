---
title: "PostgreSQL 18 Beta 1 Released!"
source: "https://www.postgresql.org/about/news/postgresql-18-beta-1-released-3070/"
author:
  - "[[The PostgreSQL Global Development Group]]"
published: 2025-05-08
created: 2025-06-10
description: "PostgreSQL 18 Beta 1は、非同期I/O、強化されたクエリ最適化、仮想生成列、OAuth認証、改善されたアップグレード体験など、主要なパフォーマンス改善を導入。2025年9月/10月の一般提供を目標としている。"
tags:
  - "postgresql"
  - "database"
  - "beta-release"
  - "performance"
  - "security"
---
公開日：**2025年5月8日** / PostgreSQL Global Development Group

## 概要

PostgreSQL Global Development Groupは、PostgreSQL 18の最初のベータ版が[ダウンロード可能](https://www.postgresql.org/download/)になったことを発表しました。このリリースには、PostgreSQL 18が一般提供される際のすべての機能のプレビューが含まれていますが、ベータ期間中にリリースの詳細が変更される可能性があります。

## エグゼクティブサマリー

PostgreSQL 18 Beta 1は、パフォーマンス、セキュリティ、開発者体験を大幅に向上させる画期的な機能を導入し、PostgreSQLの進化における重要なマイルストーンを示しています。

### 主要なハイライト

- **非同期I/O (AIO) サブシステム** - I/O操作で2〜3倍のパフォーマンス向上を実現
- **メジャーバージョンアップグレード体験の向上** - プランナー統計情報の保持が可能に
- **仮想生成列** - クエリ実行時にジャストインタイムで値を計算
- **OAuth認証のサポート** - 最新の認証メカニズムに対応
- **データチェックサムがデフォルトで有効** - データ整合性の向上
- **新しいワイヤープロトコルバージョン3.2** - PostgreSQL 7.4（2003年）以来初のアップデート

一般提供は2025年9月/10月を予定しています。

PostgreSQL 18のすべての機能と変更点については、[リリースノート](https://www.postgresql.org/docs/18/release-18.html)で確認できます。

## コミュニティへの協力要請

オープンソースPostgreSQLコミュニティの精神に基づき、バグやその他の問題を排除するために、システムでPostgreSQL 18の新機能をテストすることを強く推奨します。PostgreSQL 18 Beta 1を本番環境で実行することは推奨しませんが、通常のアプリケーションワークロードをこのベータリリースに対して実行する方法を見つけることを推奨します。

あなたのテストとフィードバックは、PostgreSQL 18が世界で最も先進的なオープンソースリレーショナルデータベースとして、安定した信頼性の高いリリースを提供するという基準を維持することに役立ちます。[ベータテストプロセス](https://www.postgresql.org/developer/beta/)の詳細と貢献方法については、こちらをご覧ください。

## PostgreSQL 18 の主要機能

PostgreSQL 18は、パフォーマンス、開発者体験、セキュリティ、監視を含む幅広い分野で大幅な改善をもたらします。以下のセクションでは、このリリースで計画されている主要な機能強化について詳しく説明します。

### パフォーマンスの改善

#### 非同期I/O (AIO) サブシステム

PostgreSQL 18は、非同期I/O (AIO) サブシステムを導入します。この新しいサブシステムにより、I/Oスループットの向上とI/Oレイテンシの隠蔽が可能になります。

- **Linux環境**: `io_uring`をAIOに使用可能
- **クロスプラットフォーム**: ワーカーベースの実装が利用可能
- **パフォーマンス向上**: シーケンシャルスキャン、ビットマップヒープスキャン、VACUUMなどで2〜3倍の性能向上

#### クエリ最適化とインデックス機能

- **スキップスキャン**: 複数列B-treeインデックスでのスキップスキャン検索をサポート
- **WHERE句の最適化**: `OR`や`IN (...)`句を含むWHERE句の最適化
- **結合の改善**: ハッシュ結合の全体的なパフォーマンス向上、マージ結合でのインクリメンタルソートの使用

#### その他のパフォーマンス改善

- **GINインデックスの並列構築**: JSONや全文検索で一般的に使用されるGINインデックスの並列構築をサポート
- **パーティションキーとマテリアライズドビュー**: B-tree以外のユニークインデックスの定義が可能
- **ロックパフォーマンス**: 多数のリレーションにアクセスするクエリのロックパフォーマンスを改善
- **テキスト処理**: `upper`/`lower`関数の高速化、新しい組み込み照合`PG_UNICODE_FAST`

### メジャーバージョンアップグレード体験

#### プランナー統計情報の保持

PostgreSQL 18以前は、メジャーバージョンアップグレード後に`ANALYZE`を実行して統計情報を生成する必要がありました。これは時間がかかるプロセスであり、完了するまでクエリパフォーマンスに影響を与える可能性がありました。

PostgreSQL 18では、メジャーバージョンアップグレードを通じてプランナー統計情報を保持する機能が導入され、アップグレードされたクラスターが期待されるパフォーマンス状態により早く到達できるようになりました。

#### pg_upgradeの改善

- **パフォーマンス向上**: 多数のオブジェクト（テーブルやシーケンスなど）があるアップグレードを高速化
- **並列チェック**: `--jobs`フラグの設定に基づいてチェックを並列処理
- **`--swap`フラグ**: ファイルのコピー、クローン、リンクの代わりにアップグレードディレクトリをスワップ

### 開発者体験の向上

#### 仮想生成列

PostgreSQL 18では、列の値を格納する代わりに、クエリ実行時にジャストインタイムで計算する仮想生成列が導入されました。これが生成列のデフォルトオプションとなります。また、格納された生成列が論理レプリケーションできるようになりました。

#### RETURNING句の機能拡張

`INSERT`、`UPDATE`、`DELETE`、`MERGE`コマンドの`RETURNING`句で、以前の値（`OLD`）と現在の値（`NEW`）の両方にアクセスできるようになりました。

#### UUIDサポートの強化

- **UUIDv7生成**: `uuidv7()`関数を通じてUUIDv7の生成をサポート
- **タイムスタンプ順序**: より良いキャッシュ戦略をサポートするタイムスタンプ順序のランダムUUID生成
- **`uuidv4()`エイリアス**: `gen_rand_uuid`のエイリアスとして追加

#### テキスト処理と制約の改善

- **非決定的照合でのLIKE比較**: より複雑なパターンマッチングが可能に
- **CASEFOLD**: 大文字小文字を区別しないマッチングをサポート

- **時間制約**: `WITHOUT OVERLAPS`句を使用した`PRIMARY KEY`と`UNIQUE`制約、`PERIOD`句を使用した`FOREIGN KEY`制約

### セキュリティ機能

#### OAuth認証の導入

PostgreSQL 18は、PostgreSQL拡張機能を通じてサポートされるOAuth 2.0メカニズムを使用してユーザーが認証できる`oauth`認証を導入します。

#### 認証関連の変更

- **md5認証の非推奨化**: PostgreSQL 10で初めて追加されたSCRAM認証を支持
- **将来的な削除**: md5認証は今後のメジャーバージョンで完全に削除予定
- **SCRAMパススルー認証**: リモートPostgreSQLインスタンスへの認証時に`postgres_fdw`と`dblink`でサポート

#### その他のセキュリティ強化

- **FIPSモード**: FIPSモード動作の検証と強制機能を追加
- **TLS v1.3設定**: `ssl_tls13_ciphers`を追加し、サーバーが使用できるTLS v1.3暗号スイートを設定可能

### 監視と可観測性

#### EXPLAINユーティリティの強化

- **バッファアクセス情報**: `EXPLAIN ANALYZE`実行時にアクセスされたバッファ数を自動表示
- **インデックス検索回数**: インデックススキャン中のインデックス検索回数を表示
- **詳細統計**: `EXPLAIN ANALYZE VERBOSE`でCPU、WAL、平均読み取り統計を含む

#### 統計情報の拡充

- **VACUUM/ANALYZE時間**: `pg_stat_all_tables`にテーブルのVACUUMとANALYZEに費やした合計時間情報を含む
- **接続ごとの統計**: I/OとWAL使用率の接続ごとの統計を表示
- **論理レプリケーション**: 書き込み競合に関する詳細な情報をログと`pg_stat_subscription_stats`ビューに表示

### その他の注目機能

#### データチェックサムのデフォルト有効化

PostgreSQL 18から、新しいPostgreSQLクラスターではデータチェックサムがデフォルトで有効になります。これは、格納されたデータの整合性を検証するために使用されます。`initdb --no-data-checksums`コマンドを使用して、この動作を無効にすることも可能です。

#### 制約機能の改善

- **外部キーとチェック制約**: `NOT ENFORCED`として設定可能、または強制可能に変更可能
- **NOT NULL制約**: SQL標準に従って名前を保持、`NOT VALID`と`NO INHERIT`句をサポート

#### その他の機能

- **pg_createsubscriber**: `--all`フラグをサポートし、単一コマンドでインスタンス内のすべてのデータベースの論理レプリカを作成
- **外部テーブル定義**: `CREATE FOREIGN TABLE ... LIKE`コマンドでローカルテーブルの定義を使用して外部テーブルのスキーマ定義を作成
- **新しいワイヤープロトコル**: バージョン3.2を導入（PostgreSQL 7.4 (2003)以来初の新プロトコルバージョン）

## その他の機能

PostgreSQL 18には、他にも多くの新機能と改善が追加されています。新機能と変更された機能の完全なリストについては、[リリースノート](https://www.postgresql.org/docs/18/release-18.html)をご参照ください。

## バグと互換性のテスト

各PostgreSQLリリースの安定性は、コミュニティがPostgreSQL 18の一般提供前にワークロードやテストツールでバグやリグレッションを見つけることに大きく依存しています。

### テストの重要性

- **ベータ版の性質**: データベースの動作、機能の詳細、APIに軽微な変更が加えられる可能性があります
- **フィードバックの価値**: あなたのフィードバックとテストが、新機能の最終調整を決定するのに役立ちます

### バグ報告

- **オープンイシュー**: PostgreSQL wikiに[オープンイシュー](https://wiki.postgresql.org/wiki/PostgreSQL_18_Open_Items)のリストが公開されています
- **バグ報告**: PostgreSQLウェブサイトの[バグ報告フォーム](https://www.postgresql.org/account/submitbug/)を使用して報告できます

## ベータスケジュール

これはバージョン18の最初のベータリリースです。PostgreSQLプロジェクトは、テストに必要に応じて追加のベータ版をリリースし、その後1つ以上のリリース候補を経て、2025年9月/10月頃に最終リリースを予定しています。詳細については[ベータテスト](https://www.postgresql.org/developer/beta/)ページをご参照ください。

## 関連リンク

- [ダウンロード](https://www.postgresql.org/download/)
- [ベータテスト情報](https://www.postgresql.org/developer/beta/)
- [PostgreSQL 18 ベータリリースノート](https://www.postgresql.org/docs/18/release-18.html)
- [PostgreSQL 18 オープンイシュー](https://wiki.postgresql.org/wiki/PostgreSQL_18_Open_Items)
- [バグ報告](https://www.postgresql.org/account/submitbug/)
- [寄付](https://www.postgresql.org/about/donate/)

## まとめ

PostgreSQL 18 Beta 1は、データベースのパフォーマンス、セキュリティ、開発者体験を大幅に向上させる重要なリリースです。非同期I/Oサブシステムによるパフォーマンスの大幅な改善、OAuth認証のサポート、メジャーバージョンアップグレード体験の向上など、多くの革新的な機能が導入されています。コミュニティの積極的なテストとフィードバックが、このリリースの成功に不可欠です。