---
title: "Claude Code ベストプラクティス"
source: "https://www.youtube.com/watch?v=gv0WHhKelSE"
author:
  - "Cal Rueb"
published: "2025-05-22"
created: "2025-08-03"
description: |
  2025年5月22日に開催された「Code w/ Claude」イベントでの、AnthropicのCal RuebによるClaude Codeのベストプラクティスに関する発表の文字起こし。Claude Codeの技術的な仕組み、主要な使用ケース、効率的なワークフロー、そしてベストプラクティスについて解説しています。
tags:
  - "Claude Code"
  - "AI Agent"
  - "Anthropic"
  - "Development"
  - "Workflow"
  - "Best Practices"
  - "clippings"
---
# Claude Code ベストプラクティス - 完全文字起こし

**発表者**: Cal Rueb（Anthropic Applied AIチーム、Member of Technical Staff）  
**日時**: 2025年5月22日  
**場所**: サンフランシスコ「Code w/ Claude」イベント

## 発表者自己紹介

Cal Ruebは約1年半前にAnthropicに入社し、Applied AIチームの立ち上げを支援した。このチームの使命は、顧客やパートナーがClaude上で優れた製品や機能を構築できるよう支援することである。Calは日々Claudeのプロンプティングを行い、モデルから最高の出力を得ることに多くの時間を費やしている。

プログラミングも愛好しており、多くのプロジェクトを開始するが完成させることが少ないタイプの開発者である。昨年末、Slackで新しいツールについて聞き、金曜日の夜にClaude Codeをダウンロードした。週末を通じてノートテイキングアプリの構築に取り組み、この体験がプログラミングとソフトウェアエンジニアリングに対する考え方を完全に変えた。

週末中、使用トークン数でAnthropicの内部リーダーボードで1位になったことをきっかけに、Claude Codeチームと出会い、現在はコアコントリビューターとしてプロンプティング、システムプロンプト、ツールの動作、ツールの説明と結果、およびツールの評価に携わっている。

## Claude Codeとは

Claude Codeは「ターミナルですべてを行う同僚」のような存在である。GUIを一切触らず、ターミナルでの作業に長けた人物のようなものだ。メンターのTonyのように、複雑なbashコマンドやVimでの編集を駆使してバグを修正する専門家が、常にそばにいるような感覚である。

## 技術的仕組み

Anthropicでは「シンプルで効果的なもの」を常に目指している。Claude Codeは「純粋なエージェント」と考えられ、以下の要素で構成される：

- **指示**: 基本的なガイドライン
- **強力なツール**: ターミナルに精通した人が使用するようなツール
- **ループ実行**: モデルが完了を判断するまで継続的に動作

Claude Codeは複雑なインデックス化やRAG（Retrieval-Augmented Generation）検索は行わない。代わりに、新しいチームや新しいコードベースに参加した人が探索するのと同様の方法でコードベースを理解する。glob、grep、findなどの同じ検索ツールを使用して、エージェント的検索を実行する。

これは、モデルが検索を実行し、結果を確認し、さらに調査が必要と判断した場合はさらなる検索を実行するという意味である。

### アーキテクチャの層

1. **軽量UIレイヤー**: Claude Codeの作業を監視し、テキストの流れを確認
2. **権限システム**: エージェントの作業を許可し、危険な操作時に人間の介入を求める
3. **セキュリティ**: Anthropic APIだけでなく、AWSやGCPなどのクラウドプロバイダー経由でもClaudeにアクセス可能

## Claude Codeの使用ケース

Claude Codeは基本的に「あらゆることに優れている」が、主要な使用ケースは以下の通り：

### 1. 発見・探索

新しいコードベースに参加した際の生産性向上。機能の実装場所を特定したり、ファイルのGit履歴を確認して変更の背景を理解したりできる。

### 2. 思考パートナー

機能実装前に、Claude Codeに検索させて複数のオプションを提示させ、実際の作業開始前に計画を検証できる。

### 3. コード構築・記述

- **ゼロから開始**: 空のディレクトリでアプリやゲームを構築
- **既存コードベース**: より重要な実際の使用ケースとして、既存プロジェクトでの作業

Claude Codeチームでは、ツールにより単体テストの追加が簡単になったため、異常に高いテストカバレッジを維持している。また、作業完了時にコミットメッセージやPRメッセージの作成も依頼している。

### 4. デプロイメントとライフサイクル

Claude Code SDKを使用したヘッドレス実行により、CI/CDパイプラインやGitHubアクションでプログラム的に活用可能。

### 5. サポートとスケール

エラーのデバッグ高速化。顧客から「大規模なコードベース移行（古いJavaから新しいバージョンへ、PHPからReact/Angularへ）を延期していたが、Claude Codeにより実現可能になった」という声が多数寄せられている。

### 6. CLIツールの活用

Git、Docker、BigQueryなどのCLIツールとの優れた連携。複雑なrebaseの問題なども簡単に解決できる。

## ベストプラクティス

### 1. claude.mdファイルの使用

Claude Codeはエージェントであり、メモリを持たないため、セッション間や チーム間での状態共有の主な方法がclaude.mdファイルである。

**配置場所**:

- プロジェクト内（チーム全体で共有）
- ホームディレクトリ（個人設定用）

**記載内容**:

- 単体テストの実行方法
- プロジェクト構造の概要
- テストの場所、モジュール情報
- スタイルガイド

### 2. 権限管理

- **読み取り操作**: 自動で許可
- **書き込み/bash実行**: 権限確認が必要
- **自動承認モード**: Shift+Tabで継続作業
- **特定コマンドの常時許可**: 設定で`npm run test`などを常時承認可能

### 3. 統合設定

CLIツールやMCPサーバーの追加により、Claude Codeの機能を拡張可能。GitHubのghコマンドなどの例がある。よく知られて文書化されたCLIツールの使用を推奨（MCPサーバーより）。

### 4. コンテキスト管理

Anthropicのモデルは200,000トークンのコンテキストウィンドウを持つが、長時間のセッションでは限界に達する可能性がある。

**オプション**:

- `/clear`: 全てをクリア（claude.mdは保持）
- `/compact`: セッション内容を要約し、新しいセッションの種として使用

## 効率的ワークフロー

### 1. 計画とToDo

- バグ修正前に検索と計画の作成を依頼
- Claude作成のToDoリストを監視し、問題がある場合はEscapeで介入

### 2. スマートなライブコーディング

- テスト駆動開発
- 小さな変更とテスト実行の繰り返し
- TypeScriptとlintingのチェック
- 定期的なコミット

### 3. スクリーンショットの活用

Claudeのマルチモーダル機能を活用し、スクリーンショットやmock.pngファイルを使用してWebサイト構築を指示できる。

## 高度なテクニック

### 1. 複数Claude並列実行

4つのClaude Codeを同時実行し、複雑なタスクを協調させることも可能。

### 2. Escapeキーの活用

- 作業中のClaudeを停止し、軌道修正が可能
- 適切なタイミングでのEscape使用がツールの効果的活用の鍵
- 隠し機能: Escape二回押しで会話内の過去の地点にジャンプ可能

### 3. ツール拡張とMCP

bashと既存ツールで実現できない場合のMCPサーバーの検討。

### 4. ヘッドレス自動化

プログラム的なClaude使用。GitHubアクションでの活用例があり、他の創造的な使用場所を模索中。

## 新機能（2025年5月時点）

### 1. モデル選択

`/model`コマンドで現在のモデル確認、`/config`で変更可能（Sonnet、Opusなど）。

### 2. ツール呼び出し間の思考

Claude 4では、ツール呼び出し間での思考が可能になった。「think hard」または「extended thinking」を指示すると、より深い分析を実行。軽いグレーのテキストで思考過程を確認できる。

### 3. IDE統合

VS CodeとJetBrainsとの新しい統合により、Claudeが現在のファイルを認識し、より文脈に応じた支援を提供。

## 継続的な更新について

Claude Codeは急速に開発が進んでおり、AnthropicのGitHubプロジェクト「Claude Code」でイシューの投稿やchangelogの確認が可能。週次でのチェックを推奨。

## Q&A セッション

### 質問1: 複数のclaude.mdファイル

**回答**: 同一ディレクトリ内では1つのみ可能。サブディレクトリには配置可能だが、デフォルトでは読み込まれない（Anthropicのmonorepoでコンテキストが爆発するため）。Claudeが関連ファイルを発見した際に読み込むよう推奨される。新機能として、claude.md内で@記号を使用して他のファイルを参照可能。

### 質問2: Claude.mdの指示が無視される問題

**回答**: これは主にモデルの問題だった。Claude 3.7では「コメントを残すな」という多くのプロンプトがあったにも関わらず、モデルがコメントを残す傾向があった。Claude 4ではこの問題が大幅に改善され、指示に従う能力も向上。早期テスターからは「claude.mdがより正確に従われるようになった」との報告あり。新モデルへの移行時にclaude.mdの内容を見直すことを推奨。

### 質問3: マルチエージェント実行と並列化

**回答**: 現在のアプローチは「シンプルで効果的なもの」、つまり全てを行う単一の優秀なコーディングエージェントに焦点。エージェント間のコミュニケーションが必要な場合は、共有markdownファイルへの書き込みを推奨。例：「ticket.mdに他の開発者向けの情報を書いて」→ 別のClaude Codeを起動して「ticket.mdを読んで、これがあなたの作業内容」という方式。将来的にはより直接的な機能が製品に統合される可能性がある。

---

*注記: この文字起こしは2025年5月22日のプレゼンテーション内容に基づいており、Claude Codeの機能や仕様は継続的にアップデートされている。最新情報については公式ドキュメントやGitHubリポジトリを参照のこと。*
