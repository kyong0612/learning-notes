---
title: "LLMを本番品質に育てる PromptOps：”100回の試行錯誤”を支えた仕組みと文化"
source: "https://zenn.dev/elyza/articles/3b25b8e44fc280"
author:
  - "曽我部 (@sog4be)"
  - "堤 (@ozro_223)"
published: 2025-07-07
created: 2025-07-11
description: |
  本記事では、ELYZAと株式会社マイナビが共同開発した「マイナビAI Pencil」の開発過程において重要な役割を果たした「Prompt Engineering」と、それを支える体系的な運用基盤「PromptOps」について解説します。
tags:
  - "prompt"
  - "llm"
  - "生成AI"
  - "大規模言語モデル"
  - "社会実装"
---

## 0. はじめに

ELYZAと株式会社マイナビが共同開発した「マイナビAI Pencil」の公開に伴い、本記事では開発過程で重要な役割を果たした「Prompt Engineering」と、それを支える体系的な運用基盤「PromptOps」について解説します。

- **株式会社ELYZA プレスリリース:** <https://prtimes.jp/main/html/rd/p/000000062.000047565.html>
- **株式会社マイナビ様 プレスリリース:** <https://www.mynavi.jp/news/2025/07/post_49493.html>

本ブログの研究開発は、MLエンジニアの曽我部氏（[@sog4be](https://x.com/sog4be)）、堤氏（[@ozro_223](https://x.com/ozro_223)）らが担当し、曽我部氏が執筆しました。

## 1. LLM 社会実装の「理想」と「現実」

最新のLLMは高性能ですが、その出力を本番運用レベルに引き上げるには、細部にこだわった泥臭い試行錯誤が必要です。「なんだか出力が微妙」「期待通りの答えが安定して返ってこない」といった課題は、LLMを業務へ組み込もうとする際に多くの人が直面する"壁"です。

プロトタイプの「動く」レベルと、本番環境で「ビジネス価値を生み続ける」レベルには大きな隔たりがあります。この溝を埋めるのが、数%の精度改善のために100以上のバージョンを生み出すような、妥協のないプロンプトエンジニアリングとその仕組みです。

ELYZAでは、特定のモデルに固執せず、GPTシリーズ、Gemini、Claudeなど最適なモデルを組み合わせてソリューションを構築しています。

## 2. 「なんだか微妙」を解き明かす、Prompt Engineering

Prompt Engineeringの本質は、「なんだか微妙」という曖昧な課題を具体的な指示に変換するプロセスです。例えば、「自然な表現」という抽象的な要求ではなく、「『〜しました』という表現が5回連続しており、リズムが単調で稚拙な印象を与えている」と具体的に問題を特定します。

そして、「同一の文末表現が連続するのは2回まで」といった明確な指示をプロンプトに加えることで、改善プロセスに再現性を持たせます。

転職活動の自己PR文章生成タスクでは、約100パターンのプロンプトを試行錯誤しました。このような地道な作業が、最終的な出力品質を決定づけます。Prompt Engineeringは単なる「指示書の書き方」ではなく、「ビジネス要件に応じた言語化の技術」です。

## 3. 属人化を防ぎ、改善を加速させる仕組みの中核「PromptOps」

特定の個人の経験や勘に依存するプロンプトエンジニアリングは、「属人化」というリスクを生みます。担当者が不在だと改善が停滞し、ノウハウが組織の力になりません。

そこで重要なのが、個人の「職人芸」をチームの「仕組み」へと昇華させ、継続的な改善を可能にする運用基盤「**PromptOps**」です。PromptOpsは、市場の変化や新しいLLMの登場、顧客の要望に迅速に対応し続けるための継続的な改善活動の心臓部です。

### 私たちの取り組み

PromptOpsを「文化」と捉え、以下の3つの要素を根幹としています。

#### ① エンジニアに閉じない「開かれたプロンプト改善」

MLエンジニアだけでなく、顧客課題を深く理解するプロジェクトマネージャーや、業界のドメイン知識を持つビジネスサイドのメンバーが一体となってプロンプトをレビュー・改善します。プロンプトや実験結果、改善経緯をNotionに集約し、職種を超えた共同作業を文化として醸成しました。

#### ② バージョン管理：変更の意図を未来へつなぐ

ソフトウェア開発で使われる`SemVer`（セマンティックバージョニング）を参考に、プロンプトのバージョン管理ルールを策定。新しいバージョンを作成する際は、Gitのコミットメッセージのように「何を狙って、何を変えて、どうだったか」を記録します。これにより、変更の意図と履歴が明確になり、チームでの開発がスムーズになりました。

![実際にプロンプトを管理しているNotionページの抜粋](https://storage.googleapis.com/zenn-user-upload/43bf9368e252-20250704.png)

#### ③ 客観的データに基づく実験管理と高速な改善サイクル

勘や経験だけでなく、客観的なデータに基づいた評価が不可欠です。`使用モデル`と`プロンプトバージョン`の組み合わせごとの出力結果をGoogleスプレッドシートで一元管理し、最適な組み合わせをデータに基づいて選定します。

以下の3ステップで改善プロセスを高速に回しています。

1. **クイック改善 (Notion上):** 少量の評価データで細かな改善アイデアをスピーディに試す。
2. **定性・定量評価 (スクリプト実行):** 有望な候補をより大きなデータセットで評価。`LLM-as-a-Judge`などの手法で性能をスコア化し、ランキングボードで可視化。
3. **顧客レビュー (評価シート):** 技術評価でトップの候補をお客様に確認してもらい、現場のリアルなフィードバックを得て、次なる改善に繋げる。

![](https://storage.googleapis.com/zenn-user-upload/f9c74d8e0928-20250704.png)

## 4. 仕組み化がもたらした成果と、次なる挑戦

PromptOpsの導入により、以下の成果が得られました。

- **成果① 混沌からの脱却と資産化:** プロンプトがバージョン管理され、変更履歴や意図が記録されることで、過去の試行錯誤が「資産」として活用されるようになりました。
- **成果② 職種を超えたチーム開発の実現:** ビジネスサイドからの指摘が気軽に行われ、技術的な正しさに加え「ビジネスとしての正しさ」を追求する文化が定着しました。

### 今後の展望と次なる挑戦

現状のNotionとスプレッドシートベースの運用は手作業が多く、実験規模の拡大に伴い管理が課題となっています。今後は、内製ツール（GAS, Notion SDK）の深化と、`PromptLayer`や`agenta`といった最先端の外部ツールを組み合わせたハイブリッドな開発基盤を目指します。

## 5. PromptOps 実践 Tips

明日から試せるTipsを2つ紹介します。

### Tips 1: プロンプトにもバージョン管理を！ SemVerの効果的な使い方

`v1.2.3`のようなバージョン番号に明確な意味を持たせる`SemVer`をプロンプト管理に応用します。

- **MAJOR (v1.x.x → v2.0.0):** 互換性のない大きな変更（入力データの形式変更など）。
- **MINOR (v1.2.x → v1.3.0):** 互換性を保ちながらの機能的な改善（文字数変更など）。
- **PATCH (v1.2.3 → v1.2.4):** 誤字修正など、ごくわずかな改良。

プロジェクト初期（v0.x）では、ルールに縛られず大胆な変更を試すのが効率的です。

### Tips 2: `.toml`でプロンプト管理すると幸せになれる理由

プロンプトの保存形式として`JSON`や`YAML`よりも`TOML`を推奨します。理由は以下の通りです。

- **複数行の文章が見たまま書ける:** `'''`で囲むだけで改行を含んだ長文を直感的に記述可能。
- **インデントエラーに悩まされにくい:** YAMLよりインデントルールが緩やかでストレスが少ない。

**例 (`.toml`):**

```toml
# プロンプトのバージョンや設定を記述
version = "v0.1.0"
engine = "jinja2" # 変数を埋め込むためのテンプレートエンジンを指定

[engine_options]
undefined = "debug"

# ここから下が、LLMに渡す実際の指示
# OpenAIのAPIなどで使われる形式に合わせています
[[messages]]
role = "system"
content = '''
あなたは、キャリアコンサルタントのプロフェッショナルです。
ユーザーが入力した情報に基づき、採用担当者の心に響く、論理的で魅力的な自己PR文章を作成してください。
'''

[[messages]]
role = "user"
content = '''
以下のルールを厳守して、自己PR文章を生成してください。

# ルール
- 全体で400字程度にまとめること。
- 同一の文末表現（「〜しました」など）が3回以上連続しないように、多様な表現を用いること。
- ユーザーが提供する「強み」と「具体的なエピソード」を必ず含めること。

# ユーザー情報
- 強み: {{ strength }}
- 具体的なエピソード: {{ episode }}
'''
```

## 6. おわりに

ELYZAは『未踏の領域で、あたりまえを創る』というミッションのもと、LLMを活用した社会課題解決に取り組んでいます。この記事で紹介した「Prompt Engineering」、「PromptOps」、「開かれた開発文化」に共感し、一緒に事業を前に進めてくれる仲間を募集しています。

- **採用情報:** <https://open.talentio.com/r/1/c/elyza/homes/2507>
