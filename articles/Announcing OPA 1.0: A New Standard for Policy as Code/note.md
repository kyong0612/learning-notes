# Announcing OPA 1.0: A New Standard for Policy as Code

ref: <https://blog.openpolicyagent.org/announcing-opa-1-0-a-new-standard-for-policy-as-code-a6d8427ee828>

## OPA 1.0の主な変更点

- Rego v1の新しいデフォルト:
  - すべてのルール定義に if を使用することが必須化され、複数値ルールでは contains を使用します。
  - 新しいキーワード（例: every、in）がインポートなしで利用可能になりました。
  - 以前は「厳密モード（strict mode）」でのみ必要だった設定（例: opa check --strict）がデフォルトとなり、重複したインポートや互いに影響を与えるインポートが許可されなくなりました。
- 互換性と移行支援:
  - 互換性を保つための機能が提供されており、v0 Regoを引き続きサポートする必要がある場合には互換性ガイドを参照してください。
- 移行は主に自動化されたプロセスで行うことが可能で、以下のコマンドが推奨されています：
  - opa check --v0-v1：古いコードでの構文エラーやコンパイルエラーを検出。
  - opa check --v0-v1 --strict：OPA 1.0で許可されなくなったコードの問題を検出。
  - opa fmt --write --v0-v1：コードを自動的に新しい構文に更新。
  - regal lint：バグやパフォーマンス問題を検出するRego専用リンター。
- OPAのGoパッケージを使用している開発者へ:
  - SDKまたは低レベルのRegoパッケージを利用している場合、新しいv1パッケージへの移行が推奨されます。同時にv0とv1のRegoをサポートする必要がある場合は、互換性ガイドを参照してください。
- パフォーマンス改善:
  - このリリースではパフォーマンスが大幅に向上しています。詳細はリリースノートで確認できます。
