---
title: "XSS in sandbox domains | Google Bug Hunters"
source: "https://bughunters.google.com/learn/invalid-reports/web-platform/xss/6619189462433792/xss-in-sandbox-domains"
author: Google Bug Hunters Team
published:
created: 2025-09-04
description: "Googleのサンドボックスドメインは、ユーザー生成コンテンツを安全にホストするために設計されていますが、XSS脆弱性の報告において無効とされるケースについて説明しています。"
tags:
  - "clippings"
  - "XSS"
  - "security"
  - "sandbox"
  - "google"
  - "bug-hunting"
  - "web-security"
---

## 概要

Googleは、様々な種類のユーザー生成コンテンツを安全にホストするため、複数のサンドボックスドメインを使用しています。これらのサンドボックスは、特にユーザーがアップロードしたHTML、JavaScript、Flashアプレットなどを分離することを目的として設計されており、メインのサービスドメインへの悪影響を防ぐアプローチを採用しています。

## サンドボックスドメインの目的

### 主要な機能

- **コンテンツ分離**: ユーザー生成コンテンツを専用ドメインで分離
- **セキュリティ境界**: メインサービスからの分離によるリスク軽減
- **実行環境の制御**: 悪意のあるスクリプトの影響範囲を限定

### 対象コンテンツ

- HTML ファイル
- JavaScript コード
- Flash アプレット
- その他のユーザーアップロードコンテンツ

## XSS脆弱性の扱い

### サンドボックスドメインでのXSS報告について

Googleのバグハンターズプログラムでは、サンドボックスドメインにおけるXSS脆弱性の報告について特別な方針を設けています：

#### 無効な報告とされるケース

1. **設計による意図的な動作**: サンドボックスドメインは意図的にユーザーコンテンツの実行を許可している
2. **影響範囲の限定**: 分離されたドメインでのXSSは、他のGoogleサービスに直接的な影響を与えない
3. **セキュリティ境界の維持**: 適切に分離されている場合、重大なセキュリティリスクとはみなされない

#### 有効な報告となるケース

- サンドボックス境界を突破する脆弱性
- メインドメインへのアクセスを可能にする脆弱性
- 意図された分離メカニズムを回避する攻撃

## セキュリティ対策の実装

### 分離メカニズム

1. **ドメイン分離**: 専用サブドメインまたは完全に異なるドメインの使用
2. **Content Security Policy (CSP)**: 厳格なCSPの実装
3. **Same-Origin Policy**: ブラウザの同一オリジンポリシーの活用
4. **サンドボックス属性**: HTMLのsandbox属性の適切な使用

### 追加のセキュリティ層

- **入力検証**: アップロード時の基本的な検証
- **コンテンツタイプの制御**: MIME タイプの適切な設定
- **実行権限の制限**: 必要最小限の権限での実行

## バグハンターズプログラムでの対応

### 報告ガイドライン

1. **脆弱性の影響範囲**: サンドボックス境界を超える影響があるかを検証
2. **実際の攻撃シナリオ**: 実用的な攻撃パスの存在を確認
3. **証拠の提供**: 明確なPoC（Proof of Concept）の提示

### 評価基準

- **境界突破の可能性**: サンドボックスを突破できるか
- **データアクセス**: 他ユーザーのデータへのアクセス可能性
- **権限昇格**: より高い権限での実行可能性

## 重要な考慮事項

### セキュリティの限界

- サンドボックス環境でもゼロリスクではない
- ブラウザの脆弱性により境界が突破される可能性
- 設定ミスによる分離の失敗

### ベストプラクティス

1. **多層防御**: サンドボックスだけに依存しない
2. **定期的な監査**: 分離メカニズムの有効性確認
3. **更新とパッチ適用**: セキュリティアップデートの継続的な適用

## まとめ

Googleのサンドボックスドメインは、ユーザー生成コンテンツを安全に扱うための重要なセキュリティメカニズムです。XSS脆弱性の報告において、サンドボックス環境での動作は意図された設計の一部として扱われることが多く、境界を突破する明確な脆弱性でない限り、有効な報告とはみなされません。

バグハンターは、真のセキュリティリスクを特定するために、サンドボックスの境界を超える攻撃パスを見つける必要があります。これには、技術的な理解と創造的な攻撃手法の両方が求められます。
