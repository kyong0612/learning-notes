---
title: "A Guide to Claude Code 2.0 and getting better at using coding agents"
source: "https://sankalp.bearblog.dev/my-experience-with-claude-code-20-and-how-to-get-better-at-using-coding-agents/"
author: "Sankalp (@dejavucoder)"
published: 2025-12-27
created: 2025-12-30
description: "Claude Code 2.0とOpus 4.5を活用したコーディングエージェントの包括的ガイド。コンテキストエンジニアリング、サブエージェント、MCPサーバー、スキル、実用的なワークフローを解説し、AI支援型コーディングツールの生産性を最大化する方法を紹介。"
tags:
  - "Claude Code"
  - "Opus 4.5"
  - "コンテキストエンジニアリング"
  - "AIエージェント"
  - "コード生成"
---

## はじめに

本記事は著者が2025年7月に投稿したClaude Codeに関する記事のフォローアップであり、コーディングエージェントの使用を改善したい技術者および技術に詳しくない読者の両方を対象としている。著者は、これを規範的なガイダンスではなく、可能性と思考プロセスの探求として位置づけている。

## なぜこの記事が重要か

著者は、自己強化を可能にする3つの要素を提示している：

1. **ツールの最新情報を把握する**
2. **自分の領域でスキルアップする**
3. **オープンな実験的マインドセットを維持する**

重要な主張として、ドメイン知識はLLMでの実行効率を倍増させ、より高速な実装サイクルにより、ソフトウェアエンジニアリングプラクティスにおける美学の洗練に多くの時間を割けると述べている。

## 著者のClaude対代替ツールの使用遍歴

著者の完全なナラティブアーク：

- **2025年6月〜9月**：Claude Codeを主要ツールとして使用したが、GPT-5-codexのコード品質がSonnet 4/Opus 4より優れていたため、OpenAI Codexに切り替え
- **9月〜10月**：Codexがメインドライバーになり、Claude Maxサブスクリプションをキャンセル
- **10月〜11月**：AnthropicがMaxプランの割引（月額$200）を提供し、著者はSonnet 4.5を試用
- **11月24日以降**：Opus 4.5のリリースがClaude主要ツールへの復帰の転機となる

著者は、この切り替えをOpus 4.5の優れた速度、協調性、コミュニケーションスキル、意図検出に起因すると説明している。これらがより高速なフィードバックループを作り出し、GPT-5.2-Codexが若干の生の能力優位性を持つ可能性があるにもかかわらず、それを補っている。

## Claude Code 2.0のQOL（Quality of Life）改善

主な機能：

- diff表示でのシンタックスハイライト（v2.0.71）
- 思考フェーズ中のコンテキストヒント
- 1〜3評価を素早く行えるエレガントなフィードバックUI
- 複数の応答オプションを持つAskモード
- 厳密な推論タスク用のUltrathink
- `/context`コマンドによるコンテキスト使用量の可視化
- チェックポイント/巻き戻し機能（Esc+Escまたは`/rewind`）
- プロンプト提案（v2.0.73）
- プロンプト履歴検索（Ctrl+R）
- プロンプト境界でのカーソルサイクリング
- メッセージキューナビゲーション
- ファジーファイル検索の改善
- LSP（Language Server Protocol）サポート

## Claude Code機能の詳細

### Commands（コマンド）

プロジェクトレベルまたはグローバルレベルで作成できるカスタムスラッシュコマンド。本質的には反復タスク用に会話に追加される静的プロンプト。著者は、新しい会話を開始する前のセッション要約用に`/handoff`コマンドを作成した。

### Sub-agents（サブエージェント）

自動的またはコマンドで生成される別個のClaudeインスタンス。主要なタイプ：

- **general-purpose**：フルツールアクセス、コンテキスト継承あり
- **Explore**：読み取り専用のコードベース検索スペシャリスト
- **Plan**：ソフトウェアアーキテクチャ計画
- **claude-code-guide**：ドキュメント参照
- **statusline-setup**：設定タスク

Exploreエージェントは、検索タスクが通常独立しているため、意図的にコンテキストを継承しない。しかし、メインエージェントはExplore要約を受け取った後、関連ファイルを自ら読むことで利益を得る。これにより、アテンションメカニズムがコンテキストセグメント間のペアワイズ関係を抽出できる。

### Task Tool

Taskツールを介して生成され、以下のパラメータを持つ：

- description（説明）
- prompt（プロンプト）
- subagent_type（サブエージェントタイプ）
- オプションのモデル選択
- run_in_background フラグ

サブエージェントは会話を通じてメインエージェントに結果を返す。

## ワークフロー実践

著者のアプローチ：

1. **セットアップ**：CLAUDE.mdとスクラッチパッドを広範に使用
2. **探索**：明確化質問をする、要件を理解する、複雑な決定には時折`/ultrathink`を使用
3. **実行**：変更をマイクロマネージメント、問題を監視
4. **レビュー**：コードレビューとバグ発見にGPT-5.2-Codexを使用（このタスクではClaudeより優れていることが判明）

著者は、難しい機能に対して「使い捨ての最初のドラフト」アプローチを採用している：要件を理解するための実験的実装を作成し、次にメンタルモデルから逸脱した内容から学んだシャープなプロンプトで反復する。

## コンテキストエンジニアリングの基礎

### トークン消費

ツール呼び出しとその結果の両方がコンテキストトークンを消費する。LLMはステートレスであり、モデルが後続のメッセージでアクセスするには結果がコンテキスト内に残る必要がある。エージェントは複数のツール呼び出しを通じて、コンテキストウィンドウを迅速に埋める可能性がある。

### コンテキストエンジニアリングの定義

Anthropicからの引用：「コンテキストエンジニアリングとは、『どのコンテキスト構成がモデルの望ましい動作を最も生成しやすいか』に答えることである」

### コンテキスト劣化

新しいトークンが導入されると、アテンションメカニズムがより長い距離でペアワイズ関係モデリングを困難にするため、パフォーマンスが劣化する。効果的なコンテキストウィンドウは、公称容量の50〜60%程度にすぎない可能性がある。GPT-5.2は400Kトークン、Opus 4.5は200K、Gemini 3 Proは1Mを持つ。

### システムリマインダー

Claude Codeは、コンテキスト全体にリマインダータグ（例：`<system-reminder>`タグ）を挿入し、目標を繰り返し暗唱することで、「中間で迷子」問題に対処する。このテクニックは、長いタスクシーケンス中のドリフトを防ぎ、目標を最近のアテンションスパンに保つ。

## スキル、プラグイン、フック

### スキル

SKILL.mdメタデータファイルとサポートコードを含むフォルダ。モデルはすべての指示をシステムプロンプトに前もって含めるのではなく、オンデマンドでスキルをロードする。500行未満に保つことが推奨される。frontend-designプラグインは、デザイン思考ガイドラインと美的方向性の指示を含み、このパターンを示している。

### プラグイン

スキル、スラッシュコマンド、サブエージェント、フック、MCPサーバーを配布可能なユニットにバンドルするパッケージングメカニズム。名前空間付きコマンド（例：`/my-plugin:hello`）を持つ。

### フック

エージェントループのライフサイクル段階（Stop、UserPromptSubmitなど）でトリガーされるBashスクリプト。例として、Claudeが終了したときに通知音を再生したり、継続的な実行を維持するために「Do more」プロンプトを実行したりする。

### MCPサーバー

標準化されたプロトコルを通じてアクセスされる外部ツール/サービス。ツール定義が前もってコンテキストにロードされるため、肥大化を引き起こす。MCPを使ったコード実行では、ツール定義ではなくコードAPIを公開することを提案しており、Claudeがサンドボックス環境でコードを書けるようにする。

## システムプロンプトからの技術的洞察

Exploreエージェントプロンプトは、洗練されたツール呼び出しガイダンスを示している：

- どのツールがどのシナリオに適しているかを指定
- 不要な生成を防ぐための「使用すべきでない場合」セクションを含む
- 読み取り専用操作のみを強調
- 効率性のための並列ツール呼び出しを推奨

Taskツールスキーマは、モデル選択（"sonnet"、"opus"、"haiku"）とバックグラウンド実行オプションのパラメータ柔軟性を示し、簡単なタスクに安価なモデルを使用してコストを最適化できる。

## 比較分析：Claude対代替ツール

### Claude Code対Codex

- **Claude**：会話的なトーン、高コントラストのテキスト、協調的なペアリングスタイル
- **Codex**：簡潔なネスト箇条書き、細いフォントレンダリング、読みにくい思考トレース
- **Claude**：より高速なフィードバックループが内臓的な進捗感覚を可能にする
- **Codex**：指示を無視し、依頼されていない変更を行う可能性がある

### モデル能力

GPT-5.2-Codexは、生のコード生成能力でOpus 4.5をわずかに上回るが、Opus 4.5のコミュニケーション優位性、高速スループット、より良い意図検出が、実用的な使用において補完している。

## より広い業界コンテキスト

著者は、2025年にOpenAIとAnthropicから複数のフロンティアモデルリリースがあったことを指摘している。中国の代替品（GLM-4.7、Kimi-K2、Minimax-2.1）は低〜中難度タスクに対してより安価なオプションを提供するが、AnthropicとOpenAIは個人的なコーディング使用においてリードを維持している。DeepSeek R1とKimi K2の論文はオープンソースの技術を貢献した。

著者は、急速な反復に「追いつく」ことに関するAndrej Karpathyの懸念に言及し、それを単なる追跡ではなく強化として再フレーム化している—ツールを使って自分の領域内で自己改善する。

## 実用的な推奨事項

技術に詳しくないユーザー向けに、著者はコンテキストウィンドウ、ツール呼び出し、エージェント、エージェント動作に関する概念入門を提供している。すべてのユーザー向けの推奨事項：

- この投稿から1つの新機能を試す
- 実験を通じて直感を構築する
- 重いカスタマイズのためにフック、スキル、リマインダーを組み合わせる
- カスタムSKILL.mdファイルをファイル全体で分割することで管理可能（約500行）に保つ
- 最初の試行について不確かな場合は、検索にExploreエージェントを使用する
- より良いコンテキスト統合のために、Explore要約を受け取った後に関連ファイルを直接読む

## 制限と注意事項

- サブエージェントのコンテキスト継承はエージェントタイプによって異なる
- 並列サブエージェントはUIフリッカーバグを引き起こす可能性がある
- MCPサーバーは前もってツール定義をロードすることでコンテキストを肥大化させる
- コンテキスト腐敗と劣化は根本的な課題のままである
- この投稿は1人のユーザーのワークフローを表しており、普遍的な処方箋ではない
- 機能と能力は急速に進化し続けている

## 結論

著者は、これがAIツーリングにおける変革的な時代を表していることを強調している。すべてのリリースを追跡するプレッシャーを感じるのではなく、ユーザーはドメイン専門知識を深め、定期的なツール使用を通じて直感を開発することに焦点を当てるべきである。Opus 4.5からの高速なフィードバックループ、改善されたコード品質、より良いコミュニケーションの組み合わせは、GPT-5.2が限界的な能力優位性を提供する可能性があるにもかかわらず、著者がClaude Codeを主要ドライバーとして復帰させる説得力のある体験を作り出している。
